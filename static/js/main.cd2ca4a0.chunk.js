(this["webpackJsonpsorta-cart-admin"]=this["webpackJsonpsorta-cart-admin"]||[]).push([[0],{269:function(e,t,a){e.exports=a(362)},280:function(e){e.exports=JSON.parse('{"name":"sorta-cart-admin","version":"0.0.1","private":true,"homepage":"https://marshlife-art.github.io/sorta-cart-admin/","scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build","deploy":"gh-pages -d build"},"dependencies":{"@material-ui/core":"latest","@material-ui/icons":"^4.5.1","@material-ui/lab":"^4.0.0-alpha.36","@types/react":"latest","@types/react-dom":"latest","material-table":"^1.54.2","react":"latest","react-dom":"latest","react-redux":"^7.1.3","react-router-dom":"^5.1.2","react-scripts":"latest","redux":"^4.0.5","redux-logger":"^3.0.6","redux-thunk":"^2.3.0","typescript":"latest"},"devDependencies":{"@types/react-redux":"^7.1.5","@types/react-router-dom":"^5.1.3","@types/redux-logger":"^3.0.7","gh-pages":"^2.1.1"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},362:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),l=a.n(c),o=a(418),i=a(415),u=a(24),s=a(7),m=a(22),d=a(60),p=a(2),f=a(424),g=a(409),h=a(413),E=a(184),b=a(248),v=a.n(b),y=a(369),O=a(402),j=a(205),S=a(108),w=a.n(S),k=a(241),C=a(412),I=a(403),x=a(235),_=a.n(x),T=a(236),N=a.n(T),A=a(238),z=a.n(A),R=a(143),L=a.n(R),P=a(240),F=a.n(P),B=a(161),W=a.n(B),M=a(239),D=a.n(M),q=a(237),H=a.n(q),U=r.a.createElement("div",null,r.a.createElement(y.a,{button:!0,component:m.b,to:"/"},r.a.createElement(O.a,null,r.a.createElement(_.a,null)),r.a.createElement(j.a,{primary:"Dashboard"})),r.a.createElement(y.a,{button:!0,component:m.b,to:"/products"},r.a.createElement(O.a,null,r.a.createElement(N.a,null)),r.a.createElement(j.a,{primary:"Products"})),r.a.createElement(y.a,{button:!0,component:m.b,to:"/products/import"},r.a.createElement(O.a,null,r.a.createElement(H.a,null)),r.a.createElement(j.a,{primary:"Import Products"})),r.a.createElement(y.a,{button:!0,component:m.b,to:"/orders"},r.a.createElement(O.a,null,r.a.createElement(z.a,null)),r.a.createElement(j.a,{primary:"Orders"})),r.a.createElement(y.a,{button:!0,component:m.b,to:"/wholesaleorders"},r.a.createElement(O.a,null,r.a.createElement(D.a,null)),r.a.createElement(j.a,{primary:"Wholesale Orders"})),r.a.createElement(y.a,{button:!0,component:m.b,to:"/users"},r.a.createElement(O.a,null,r.a.createElement(w.a,null)),r.a.createElement(j.a,{primary:"Users"})),r.a.createElement(y.a,{button:!0,component:m.b,to:"/members"},r.a.createElement(O.a,null,r.a.createElement(L.a,null)),r.a.createElement(j.a,{primary:"Members"})),r.a.createElement(y.a,{button:!0,component:m.b,to:"/pages"},r.a.createElement(O.a,null,r.a.createElement(F.a,null)),r.a.createElement(j.a,{primary:"Pages"}))),J=(r.a.createElement("div",null,r.a.createElement(I.a,{inset:!0},"Saved reports"),r.a.createElement(y.a,{button:!0},r.a.createElement(O.a,null,r.a.createElement(W.a,null)),r.a.createElement(j.a,{primary:"Current month"})),r.a.createElement(y.a,{button:!0},r.a.createElement(O.a,null,r.a.createElement(W.a,null)),r.a.createElement(j.a,{primary:"Last quarter"})),r.a.createElement(y.a,{button:!0},r.a.createElement(O.a,null,r.a.createElement(W.a,null)),r.a.createElement(j.a,{primary:"Year-end sale"}))),a(45)),G=a.n(J),V="https://api.marshcoop.org",K=.06175,$="".concat((100*K).toFixed(3),"%"),Q={new:"new",needs_review:"needs review",pending:"pending",complete:"complete",void:"void",archived:"archived"},Y={balance_due:"balance due",paid:"paid",credit_owed:"credit owed",failed:"failed",void:"void"},X={backorder:"backorder",pending:"pending",ready:"ready",shipped:"shipped",partial:"partial",canceled:"canceled"},Z="v".concat(Object({NODE_ENV:"production",PUBLIC_URL:"/sorta-cart-admin"}).npm_package_version||a(280).version," made with \u2665 in NYC"),ee=function(e){return{type:"SET",user:e}},te=function(e){return{type:"SET_ERROR",error:e}},ae=function(e){return{type:"SET_FETCHING",isFetching:e}},ne={id:void 0,email:void 0,token:void 0},re=function(){return function(e){return G.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e(ae(!0)),localStorage&&localStorage.removeItem("token"),e(ee(ne)),e(ae(!1)),t()})));case 1:case"end":return t.stop()}}))}},ce={dark_mode:"false"},le=function(e){return{type:"SET_PREFERENCES",preferences:e}},oe=function(e){return{type:"SET_FETCHING_PREFERENCES",isFetching:e}},ie=a(404),ue=a(419);function se(){return r.a.createElement(ie.a,{fixed:!0},r.a.createElement(ue.a,{pt:4,style:{textAlign:"center"}},"L O A D I N G . . ."))}var me=a(407),de=a(180),pe=a(406),fe=a(206),ge=a(210),he=a(209),Ee=a(207),be=a(208),ve=a(94);function ye(e){return r.a.createElement(ve.a,{component:"h2",variant:"h6",color:"primary",gutterBottom:!0},e.children)}function Oe(e,t,a,n,r,c){return{id:e,date:t,name:a,shipTo:n,paymentMethod:r,amount:c}}var je=[Oe(0,"16 Mar, 2019","Elvis Presley","Tupelo, MS","VISA \u2800\u2022\u2022\u2022\u2022 3719",312.44),Oe(1,"16 Mar, 2019","Paul McCartney","London, UK","VISA \u2800\u2022\u2022\u2022\u2022 2574",866.99),Oe(2,"16 Mar, 2019","Tom Scholz","Boston, MA","MC \u2800\u2022\u2022\u2022\u2022 1253",100.81),Oe(3,"16 Mar, 2019","Michael Jackson","Gary, IN","AMEX \u2800\u2022\u2022\u2022\u2022 2000",654.39),Oe(4,"15 Mar, 2019","Bruce Springsteen","Long Branch, NJ","VISA \u2800\u2022\u2022\u2022\u2022 5919",212.79)];function Se(e){e.preventDefault()}var we=Object(k.a)((function(e){return{seeMore:{marginTop:e.spacing(3)}}}));function ke(){var e=we();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ye,null,"Recent Orders"),r.a.createElement(fe.a,{size:"small"},r.a.createElement(Ee.a,null,r.a.createElement(be.a,null,r.a.createElement(he.a,null,"Date"),r.a.createElement(he.a,null,"Name"),r.a.createElement(he.a,null,"Ship To"),r.a.createElement(he.a,null,"Payment Method"),r.a.createElement(he.a,{align:"right"},"Sale Amount"))),r.a.createElement(ge.a,null,je.map((function(e){return r.a.createElement(be.a,{key:e.id},r.a.createElement(he.a,null,e.date),r.a.createElement(he.a,null,e.name),r.a.createElement(he.a,null,e.shipTo),r.a.createElement(he.a,null,e.paymentMethod),r.a.createElement(he.a,{align:"right"},e.amount))})))),r.a.createElement("div",{className:e.seeMore},r.a.createElement(pe.a,{color:"primary",href:"#",onClick:Se},"See more orders")))}var Ce=Object(k.a)((function(e){return{root:{padding:e.spacing(2)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}));function Ie(){var e=Ce(),t=Object(p.a)(e.paper,e.fixedHeight);return r.a.createElement(me.a,{container:!0,spacing:3,className:e.root},r.a.createElement(me.a,{item:!0,xs:12,md:8,lg:9},r.a.createElement(de.a,{className:t},"CHART")),r.a.createElement(me.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(de.a,{className:t},"DEPOZ")),r.a.createElement(me.a,{item:!0,xs:12},r.a.createElement(de.a,{className:e.paper},r.a.createElement(ke,null))))}var xe=a(211),_e=a(183),Te=Object(k.a)((function(e){return{form:{width:"100%",minHeight:"100vh",marginTop:e.spacing(1),display:"flex",flexDirection:"column",justifyContent:"center"},title:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"},submit:{margin:e.spacing(3,0,2)}}}));var Ne=Object(u.b)((function(e,t){return{userService:e.session.userService}}),(function(e,t){return{login:function(t,a){return e(function(e,t){return function(a){return G.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){a(ae(!0)),fetch("".concat(V,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){"ok"===e.msg&&e.user&&e.user.token?(localStorage&&localStorage.setItem("token",e.user.token),a(ee(e.user))):a(te({error:"error",reason:e.message}))})).catch((function(e){console.log("login error:",e),a(te({error:"error",reason:"unable to login right now :("}))})).finally((function(){a(ae(!1)),n()}))})));case 1:case"end":return n.stop()}}))}}(t,a))}}}))(Object(d.h)((function(e){var t=e.userService,a=e.history,c=Te(),l=Object(n.useState)(""),o=Object(s.a)(l,2),i=o[0],u=o[1];return Object(n.useEffect)((function(){t.user&&!t.isFetching&&t.user.role&&"admin"===t.user.role&&a.push("/")}),[t,a]),r.a.createElement(ie.a,{maxWidth:"sm"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),u("");var a=t.currentTarget,n=a.elements.namedItem("email"),r=a.elements.namedItem("password");n&&n.value.length>0&&r&&r.value.length>0&&e.login(n.value,r.value)},className:c.form},r.a.createElement("div",{className:c.title},r.a.createElement(ve.a,{variant:"h2",display:"block"},"MARSH COOP"),r.a.createElement(ve.a,{variant:"overline",display:"inline"},"admin")),r.a.createElement(xe.a,{label:"email",name:"email",type:"text",autoFocus:!0,fullWidth:!0,required:!0}),r.a.createElement(xe.a,{label:"password",name:"password",type:"password",fullWidth:!0,required:!0}),r.a.createElement("div",null,r.a.createElement(_e.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:e.userService.isFetching,className:c.submit},"Login")),r.a.createElement(ue.a,{color:"error.main"},e.userService.error&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,{variant:"overline",display:"block"},"onoz! an error!"),r.a.createElement(ve.a,{variant:"body1",display:"block",gutterBottom:!0},e.userService.error.reason)),i&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,{variant:"overline",display:"block"},"onoz! an error!"),r.a.createElement(ve.a,{variant:"body1",display:"block",gutterBottom:!0},i)))))}))),Ae=Object(k.a)((function(e){return{container:{},form:{width:"100%",minHeight:"100vh",marginTop:e.spacing(1),display:"flex",flexDirection:"column",justifyContent:"center"},submit:{margin:e.spacing(3,0,2)}}}));var ze=Object(u.b)((function(e,t){return{userService:e.session.userService}}),(function(e,t){return{register:function(t,a){return e(function(e,t){return function(a){return G.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){a(ae(!0)),fetch("".concat(V,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({regKey:e,password:t})}).then((function(e){return e.json()})).then((function(e){"ok"===e.msg&&e.user&&e.user.token?(localStorage&&localStorage.setItem("token",e.user.token),a(ee(e.user))):a(te({error:"error",reason:e.message}))})).catch((function(e){console.log("register error:",e),a(te({error:"error",reason:"unable to register right now :("}))})).finally((function(){a(ae(!1)),n()}))})));case 1:case"end":return n.stop()}}))}}(t,a))}}}))(Object(d.h)((function(e){var t=new URLSearchParams(Object(d.g)().search).get("regKey");console.log("[Register] regKeyParam",t);var a=e.userService,c=e.history,l=Ae(),o=Object(n.useState)(""),i=Object(s.a)(o,2),u=i[0],m=i[1];return Object(n.useEffect)((function(){a.user&&!a.isFetching&&a.user.role&&"admin"===a.user.role&&c.push("/")}),[a,c]),r.a.createElement(ie.a,{maxWidth:"sm",className:l.container},r.a.createElement("form",{onSubmit:function(a){a.preventDefault(),m("");var n=a.currentTarget,r=n.elements.namedItem("password"),c=n.elements.namedItem("password_confirm"),l="";if(t&&(l=t),!l){var o=n.elements.namedItem("regKey");o&&o.value.length>1&&(l=o.value)}l||m("no registration key"),r&&r.value.length>0&&c&&c.value.length>0&&(c.value!==r.value?m("passwords do not match"):e.register(l,c.value))},className:l.form},!t&&r.a.createElement(xe.a,{label:"registration key",name:"regKey",type:"text",autoFocus:!0,fullWidth:!0,required:!0}),r.a.createElement(xe.a,{label:"password",name:"password",type:"password",autoFocus:!!t,fullWidth:!0,required:!0}),r.a.createElement(xe.a,{label:"password_confirm",name:"password_confirm",type:"password",fullWidth:!0,required:!0}),r.a.createElement("div",null,r.a.createElement(_e.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:e.userService.isFetching,className:l.submit},"submit")),r.a.createElement(ue.a,{color:"error.main"},e.userService.error&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,{variant:"overline",display:"block"},"onoz! an error!"),r.a.createElement(ve.a,{variant:"body1",display:"block",gutterBottom:!0},e.userService.error.reason)),u&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ve.a,{variant:"overline",display:"block"},"onoz! an error!"),r.a.createElement(ve.a,{variant:"body1",display:"block",gutterBottom:!0},u)))))}))),Re=a(251),Le=function(e){var t=e.component,a=e.userService,n=e.children,c=Object(Re.a)(e,["component","userService","children"]);return r.a.createElement(d.b,Object.assign({},c,{render:function(e){return function(e){return!(!e.user||!e.user.role||"admin"!==e.user.role)}(a)?t?r.a.createElement(t,e):n:r.a.createElement(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Pe=a(137),Fe=a(212),Be=a(410);var We=Object(u.b)((function(e){return{userService:e.session.userService}}),(function(e){return{logout:function(){return e(re())}}}))((function(e){var t=e.userService,a=e.logout,n=r.a.useState(null),c=Object(s.a)(n,2),l=c[0],o=c[1],i=function(){o(null)},u=function(){return!!(t&&t.user&&t.user.role&&"admin"===t.user.role)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{"aria-controls":"user-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)}},r.a.createElement(Be.a,{badgeContent:0,color:"secondary"},r.a.createElement(w.a,null))),r.a.createElement(Pe.a,{id:"user-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:i},u()&&r.a.createElement(Fe.a,{onClick:function(){a(),i()}},"Logout"),!u()&&r.a.createElement(Fe.a,{onClick:i},"Login")))})),Me=a(93),De=a.n(Me),qe=a(422),He=a(59),Ue=a.n(He),Je=a(11),Ge=localStorage&&localStorage.getItem("token"),Ve=function(e,t){var a=Object(n.useState)({status:"loading"}),r=Object(s.a)(a,2),c=r[0],l=r[1];return Object(n.useEffect)((function(){e&&0!==e.length?fetch("".concat(V,"/page?slug=").concat(e)).then((function(e){return e.json()})).then((function(e){l({status:"loaded",payload:e})})).catch((function(e){console.warn("usePageService fetch caught err:",e),l(Object(Je.a)({},e))})).finally((function(){t(!1)})):t(!1)}),[e,t]),c},Ke=function(e,t){var a=Object(n.useState)({status:"loading"}),r=Object(s.a)(a,2),c=r[0],l=r[1];return Object(n.useEffect)((function(){e&&fetch("".concat(V,"/pages"),{headers:{Authorization:"Bearer ".concat(Ge)}}).then((function(e){return e.json()})).then((function(e){l({status:"loaded",payload:e.rows})})).catch((function(e){console.warn("usePageService fetch caught err:",e),l(Object(Je.a)({},e))})).finally((function(){return t(!1)}))}),[e,t]),c},$e=function(e,t,a,r,c){var l=Object(n.useState)({status:"loading"}),o=Object(s.a)(l,2),i=o[0],u=o[1];return Object(n.useEffect)((function(){t&&e&&0!==e.slug.length?fetch("".concat(V,"/page"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Ge)},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){u({status:"loaded",payload:e}),r(e.msg),c(!0)})).catch((function(e){console.warn("usePageSaveService fetch caught err:",e),u(Object(Je.a)({},e)),r("o noz! ".concat(e)),c(!0)})).finally((function(){a(!1)})):a(!1)}),[e,t,a,r,c]),i},Qe=a(6),Ye=a(411),Xe=a(148),Ze=a.n(Xe),et=a(149),tt=a.n(et),at=a(109),nt=a.n(at),rt=function(e){return r.a.createElement(Pe.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e))},ct=Object(Qe.a)((function(e){return{root:{"&:focus":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(Fe.a);function lt(e){var t=r.a.useState(null),a=Object(s.a)(t,2),n=a[0],c=a[1],l=function(){c(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{variant:"contained",color:"primary","aria-label":"split button"},r.a.createElement(_e.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(Ze.a,null),onClick:e.onSaveBtnClick},"save"),r.a.createElement(_e.a,{"aria-controls":"customized-menu","aria-haspopup":"true",variant:"contained",color:"primary",size:"small",onClick:function(e){c(e.currentTarget)}},r.a.createElement(nt.a,null))),r.a.createElement(rt,{id:"customized-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:l},r.a.createElement(ct,{onClick:function(){window.confirm("are you sure?")&&e.onDeleteBtnClick(),l()},disabled:!e.page.id},r.a.createElement(O.a,null,r.a.createElement(tt.a,{fontSize:"small"})),r.a.createElement(j.a,{primary:"delete page"}))))}var ot=localStorage&&localStorage.getItem("token"),it=Object(k.a)((function(e){return Object(C.a)({row:{display:"flex"},pageName:{marginBottom:e.spacing(2),marginRight:e.spacing(2)}})}));var ut=Object(d.h)((function(e){var t=it(),a=Object(n.useState)(""),c=Object(s.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)({slug:"",content:""}),u=Object(s.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(!0),f=Object(s.a)(p,2),g=f[0],h=f[1],b=Object(n.useState)(!1),v=Object(s.a)(b,2),y=v[0],O=v[1],j=Ve(l,h);Object(n.useEffect)((function(){"loaded"===j.status&&(j.payload?d(j.payload):d({slug:l,content:""}))}),[j,l]);var S=r.a.useState(!1),w=Object(s.a)(S,2),k=w[0],C=w[1],I=r.a.useState(""),x=Object(s.a)(I,2),_=x[0],T=x[1],N=function(e,t){"clickaway"!==t&&C(!1)},A=e.match.params.slug;return Object(n.useEffect)((function(){A&&o(A)}),[A]),$e(m,y,O,T,C),m?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:t.row},r.a.createElement(xe.a,{className:t.pageName,label:"permalink",fullWidth:!0,value:m.slug,onChange:function(e){d((function(t){return Object(Je.a)({},t,{slug:e.target.value})}))}}),r.a.createElement(lt,{page:m,onSaveBtnClick:function(){O(!0)},onDeleteBtnClick:function(){fetch("".concat(V,"/page"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(ot)},body:JSON.stringify(m)}).then((function(e){return e.json()})).then((function(t){t.error?(T(t.msg),C(!0)):e.history.replace("/pages")})).catch((function(e){console.warn("delete page fetch caught err:",e),T("o noz! ".concat(e)),C(!0)}))}})),g?r.a.createElement(se,null):r.a.createElement(xe.a,{label:"content",multiline:!0,fullWidth:!0,rows:4,rowsMax:28,value:m.content,onChange:function(e){d((function(t){return Object(Je.a)({},t,{content:e.target.value})}))}}),r.a.createElement(qe.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:k,autoHideDuration:6e3,onClose:N,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},_),action:[r.a.createElement(E.a,{key:"close","aria-label":"close",onClick:N},r.a.createElement(Ue.a,null))]})):r.a.createElement(se,null)})),st=Object(k.a)((function(e){return Object(C.a)({root:{padding:e.spacing(2),maxWidth:"100vw",minHeight:"100vh"},title:{display:"flex",alignItems:"center"},titleText:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,height:"100%"}})})),mt=function(){return r.a.createElement("h3",null,"pages!")};var dt=Object(u.b)((function(e){return{userService:e.session.userService}}),void 0)(Object(d.h)((function(e){var t=st(),a=e.userService,c=Object(n.useState)([]),l=Object(s.a)(c,2),o=l[0],i=l[1],u=Object(n.useState)(!0),p=Object(s.a)(u,2),f=p[0],b=p[1],v=Ke(f,b);Object(n.useEffect)((function(){"loaded"===v.status&&i(v.payload)}),[v]);var O=Object(n.useState)(!1),S=Object(s.a)(O,2),w=S[0],k=S[1],C=function(e,t){"clickaway"!==t&&k(!1)};return a?r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch",className:t.root,spacing:2},r.a.createElement(me.a,{xs:12,sm:4,md:3,lg:2,item:!0},r.a.createElement(de.a,{className:t.paper},r.a.createElement(g.a,null,r.a.createElement(y.a,null,r.a.createElement(j.a,null,r.a.createElement("div",{className:t.title},r.a.createElement("span",{className:t.titleText},"PAGES"),r.a.createElement(E.a,{"aria-label":"add page",title:"add page",onClick:function(){return e.history.push("/pages/edit/newpage"),void k(!0)}},r.a.createElement(De.a,null))))),r.a.createElement(h.a,null),o.map((function(e,t){return r.a.createElement(y.a,{button:!0,component:m.b,to:"/pages/edit/".concat(e.slug),key:"page".concat(t)},r.a.createElement(j.a,{primary:e.slug}))}))))),r.a.createElement(me.a,{xs:12,sm:8,md:9,lg:10,item:!0},r.a.createElement(de.a,{className:t.paper},r.a.createElement(d.d,null,r.a.createElement(Le,{userService:a,path:"/pages",component:mt,exact:!0}),r.a.createElement(Le,{userService:a,path:"/pages/edit/:slug",component:ut}))))),r.a.createElement(qe.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:w,autoHideDuration:4e3,onClose:C,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},"Created new page!"),action:[r.a.createElement(E.a,{key:"close","aria-label":"close",onClick:C},r.a.createElement(Ue.a,null))]})):null}))),pt=a(72),ft=a.n(pt),gt=Object(k.a)((function(e){return Object(C.a)({root:{marginRight:e.spacing(2),borderLeft:"".concat(e.spacing(6),"px solid ").concat(e.palette.divider)},gridHeading:{color:e.palette.text.secondary},gridItem:{paddingBottom:e.spacing(2),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),textAlign:"center"},lastUpdated:{marginLeft:e.spacing(2)}})}));function ht(e){var t=gt(),a=e.order,n=e.order.OrderLineItems||[],c=n.filter((function(e){return"product"!==e.kind}));return r.a.createElement("div",{className:t.root},r.a.createElement(fe.a,{"aria-label":"order details table",size:"small"},r.a.createElement(Ee.a,null,r.a.createElement(be.a,null,r.a.createElement(he.a,{component:"th"},"Line Items (",a.item_count,")"),r.a.createElement(he.a,{component:"th",align:"right"},"price"),r.a.createElement(he.a,{component:"th",align:"right"},"unit"),r.a.createElement(he.a,{component:"th",align:"right"},"qty"),r.a.createElement(he.a,{component:"th",align:"right"},"total"))),r.a.createElement(ge.a,null,n.map((function(e,t){return"product"===e.kind&&r.a.createElement(be.a,{key:"orderli".concat(t)},r.a.createElement(he.a,{component:"td",scope:"row"},e.vendor&&"[".concat(e.vendor,"] ").concat(e.description," "),e.data&&e.data.product?"".concat(e.data.product.unf):""),r.a.createElement(he.a,{align:"right"},e.price),r.a.createElement(he.a,{align:"right"},e.selected_unit),r.a.createElement(he.a,{align:"right"},e.quantity),r.a.createElement(he.a,{align:"right"},e.total))})),r.a.createElement(be.a,null,r.a.createElement(he.a,{component:"td",scope:"row",colSpan:3}),r.a.createElement(he.a,{component:"td",scope:"row",align:"right"},r.a.createElement("b",null,"Sub Total")),r.a.createElement(he.a,{component:"td",scope:"row",align:"right"},a.subtotal)),c.length>0&&r.a.createElement(be.a,null,r.a.createElement(he.a,{component:"td",scope:"row"},r.a.createElement("b",null,"Adjustments"))),c.map((function(e,t){return r.a.createElement(be.a,{key:"orderli".concat(t)},r.a.createElement(he.a,{component:"td",scope:"row",colSpan:3},"(".concat(e.kind,") ")," ",e.description),r.a.createElement(he.a,{align:"right"},e.quantity),r.a.createElement(he.a,{align:"right"},e.total))})))),r.a.createElement(me.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-start"},r.a.createElement(me.a,{item:!0,xs:4},r.a.createElement("div",{className:t.gridItem},r.a.createElement(ve.a,{variant:"overline",display:"block",className:t.gridHeading,gutterBottom:!0},"customer"),r.a.createElement(ve.a,{variant:"body1"},a.name," ",r.a.createElement(pe.a,{color:"primary",href:"mailto:".concat(a.email)},a.email),r.a.createElement("br",null),r.a.createElement(pe.a,{color:"primary",href:"tel:".concat(a.phone)},a.phone),r.a.createElement("br",null),a.address," ",r.a.createElement("br",null)))),a.User&&a.User!==a.Member&&r.a.createElement(me.a,{item:!0,xs:4},r.a.createElement("div",{className:t.gridItem},r.a.createElement(ve.a,{variant:"overline",display:"block",className:t.gridHeading,gutterBottom:!0},"created by"),r.a.createElement(ve.a,{variant:"body1"},r.a.createElement(pe.a,{color:"primary",href:"mailto:".concat(a.User.email)},a.User.email)," ",a.User.role&&r.a.createElement(r.a.Fragment,null,"(",a.User.role,") ")))),r.a.createElement(me.a,{item:!0,xs:4},r.a.createElement("div",{className:t.gridItem},r.a.createElement(ve.a,{variant:"overline",display:"block",className:t.gridHeading,gutterBottom:!0},"notes"),r.a.createElement(ve.a,{variant:"body2"},a.notes)))),a.createdAt!==a.updatedAt&&r.a.createElement("div",{className:t.lastUpdated},r.a.createElement("i",null,"Last updated")," ",new Date(a.updatedAt).toLocaleString()))}var Et=Object(k.a)((function(e){return Object(C.a)({root:{padding:e.spacing(2),maxWidth:"100vw",minHeight:"100vh"}})}));var bt=Object(d.h)((function(e){var t=Et(),a=Object(n.createRef)(),c=Object(n.useState)(!1),l=Object(s.a)(c,2),o=l[0],i=l[1],u=Object(n.useState)(!1),m=Object(s.a)(u,2),d=m[0],p=m[1],f=localStorage&&localStorage.getItem("token"),g={icon:o?"zoom_out":"search",tooltip:o?"CLOSE SEARCH":"SEARCH",isFreeAction:!0,onClick:function(){return i(!o)}},h={icon:"add",tooltip:"NEW ORDER",isFreeAction:!0,onClick:function(){return e.history.push("/orders/create")}},E={tooltip:"PRINT",icon:"print",onClick:function(e,t){var a=t.map((function(e){return e.id}));console.log("printAction orderIds:",a," data:",t),fetch("".concat(V,"/orders/print"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({orderIds:a})}).then((function(e){return e.text()})).then((function(t){try{var a=window.open("about:blank");a&&(a.document.body.innerHTML+=t)}catch(e){console.warn("caught error doing this razzle dazze shit e:",e)}})).catch((function(e){console.warn(e)}))}},b={tooltip:"EDIT",icon:"edit",onClick:function(t,a){a[0]&&a[0].id&&e.history.push("/orders/edit/".concat(a[0].id))}},v=Object(n.useState)([g,h]),y=Object(s.a)(v,2),O=y[0],j=y[1];return Object(n.useEffect)((function(){!d&&j([g,h])}),[o,d]),r.a.createElement("div",{className:t.root},r.a.createElement(ft.a,{tableRef:a,columns:[{title:"created",field:"createdAt",type:"datetime",filtering:!1,render:function(e){return new Date(e.createdAt).toLocaleString()}},{title:"status",field:"status",type:"string",lookup:Q},{title:"payment status",field:"payment_status",type:"string",lookup:Y},{title:"shipment status",field:"shipment_status",type:"string",lookup:X},{title:"name",field:"name",type:"string",filtering:!1},{title:"email",field:"email",type:"string",filtering:!1},{title:"items",field:"item_count",type:"numeric",filtering:!1},{title:"total",field:"total",type:"currency",filtering:!1},{title:"updated",field:"updatedAt",type:"datetime",filtering:!1,hidden:!0},{title:"phone",field:"phone",type:"string",hidden:!0},{title:"address",field:"address",type:"string",hidden:!0},{title:"notes",field:"notes",type:"string",hidden:!0},{title:"WholesaleOrderId",field:"WholesaleOrderId",type:"string",hidden:!0},{title:"history",field:"history",type:"string",hidden:!0},{title:"id",field:"id",type:"string",hidden:!0}],data:function(e){return new Promise((function(t,a){fetch("".concat(V,"/orders"),{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){return console.warn(e),t({data:[],page:0,totalCount:0})}))}))},detailPanel:function(e){return r.a.createElement(ht,{order:e})},onRowClick:function(e,t,a){return a&&a()},title:"Orders",options:{headerStyle:{position:"sticky",top:0},maxBodyHeight:"calc(100vh - 121px - 28px)",pageSize:50,pageSizeOptions:[50,100,500],debounceInterval:750,filtering:!0,search:o,emptyRowsWhenPaging:!1,selection:!0},onSelectionChange:function(e,t){o&&i(!1),0!==e.length?(p(!0),1===e.length?j([E,b]):j([E])):p(!1)},actions:O}))})),vt=a(247),yt=a.n(vt),Ot=a(188),jt=a(182),St=a(186),wt=localStorage&&localStorage.getItem("token"),kt={id:"",vendor:"",notes:"",status:"new",payment_status:"balance_due",shipment_status:"backorder",createdAt:"",updatedAt:""},Ct=function(e,t,a,r){var c=Object(n.useState)({status:"loading"}),l=Object(s.a)(c,2),o=l[0],i=l[1];return Object(n.useEffect)((function(){return e?"new"===e?(i({status:"loaded",payload:kt}),t(!1),void r(!1)):void fetch("".concat(V,"/wholesaleorder/").concat(e),{headers:{Authorization:"Bearer ".concat(wt)}}).then((function(e){return e.json()})).then((function(e){i({status:"loaded",payload:e})})).catch((function(e){console.warn("useWholesaleOrderService fetch caught err:",e),i(Object(Je.a)({},e))})).finally((function(){t(!1),r(!1)})):(t(!1),void r(!1))}),[e,t,a,r]),o},It=function(e,t,a,r){var c=Object(n.useState)({status:"loading"}),l=Object(s.a)(c,2),o=l[0],i=l[1];return Object(n.useEffect)((function(){a&&fetch("".concat(V,"/wholesaleorders"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(wt)},body:JSON.stringify({status:e})}).then((function(e){return e.json()})).then((function(e){i({status:"loaded",payload:e.data})})).catch((function(e){console.warn("useWholesaleOrderService fetch caught err:",e),i(Object(Je.a)({},e))})).finally((function(){r(!1),t(!1)}))}),[a,r,e,t]),o},xt=function(e,t,a,r,c){var l=Object(n.useState)({status:"loading"}),o=Object(s.a)(l,2),i=o[0],u=o[1];return Object(n.useEffect)((function(){if(t&&e&&e.id){var n="new"===e.id?"/wholesaleorder/create":"/wholesaleorder/upsert";fetch("".concat(V).concat(n),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(wt)},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){u({status:"loaded",payload:e.order}),r(e.msg),c(!0)})).catch((function(e){console.warn("useWholesaleOrderSaveService fetch caught err:",e),u(Object(Je.a)({},e)),r("o noz! ".concat(e)),c(!0)})).finally((function(){a(!1)}))}else a(!1)}),[e,t,a,r,c]),i},_t=a(246),Tt=a.n(_t),Nt=function(e){return r.a.createElement(Pe.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e))},At=Object(Qe.a)((function(e){return{root:{"&:focus":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(Fe.a);function zt(e){var t=r.a.useState(null),a=Object(s.a)(t,2),n=a[0],c=a[1],l=function(){c(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{variant:"contained",color:"primary","aria-label":"split button"},r.a.createElement(_e.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(Ze.a,null),onClick:e.onSaveBtnClick},"save"),r.a.createElement(_e.a,{"aria-controls":"wholesaleorders-menu","aria-haspopup":"true",variant:"contained",color:"primary",size:"small",onClick:function(e){c(e.currentTarget)}},r.a.createElement(nt.a,null))),r.a.createElement(Nt,{id:"wholesaleorders-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:l},r.a.createElement(At,{onClick:function(){window.confirm("are you sure?")&&e.onDeleteBtnClick(),l()},disabled:!e.wholesaleOrder.id},r.a.createElement(O.a,null,r.a.createElement(tt.a,{fontSize:"small"})),r.a.createElement(j.a,{primary:"delete wholesale order"})),r.a.createElement(At,{onClick:function(){e.onProductsExportToCsv(),l()},disabled:!e.wholesaleOrder.id},r.a.createElement(O.a,null,r.a.createElement(Tt.a,null)),r.a.createElement(j.a,{primary:"export products to .csv"}))))}var Rt=a(101),Lt=a(216),Pt=Object(k.a)((function(e){return Object(C.a)({liTable:{marginTop:e.spacing(4)},deleteBtn:{width:"88px"},unf:{minWidth:"105px"},groupedRow:{backgroundColor:e.palette.background.default},groupedRowTotals:e.typography.h6})}));var Ft=Object(d.h)((function(e){var t,a=Pt(),c=null===e||void 0===e?void 0:null===(t=e.wholesaleOrder)||void 0===t?void 0:t.OrderLineItems,l=e.lineItemData,o=e.setLineItemData;return Object(n.useEffect)((function(){var e={};o((function(e){return Object(Je.a)({},e,{productTotal:0,adjustmentTotal:0,orderTotal:0})})),null===c||void 0===c||c.forEach((function(t){var a=t.data&&t.data.product&&t.data.product.id,n=a||t.description,r=e[n],c=t.data&&t.data.product&&"EA"===t.selected_unit?t.quantity/t.data.product.pk:t.quantity,l=t.data&&t.data.product?+(parseFloat(t.data.product.ws_price_cost)*c).toFixed(2):t.total;e[n]={qtySum:r?r.qtySum+c:c,totalSum:r?r.totalSum+l:l,product:t&&t.data&&t.data.product,vendor:t.vendor,description:t.description,line_items:r?[].concat(Object(Rt.a)(r.line_items),[t]):[t]},o((function(e){return Object(Je.a)({},e,{productTotal:e.productTotal+parseFloat("".concat(l)),orderTotal:e.orderTotal+l})}))})),Object.values(e).forEach((function(e){if(e.qtySum%1!==0&&e.product){var t=e.product.pk,a=e.line_items.reduce((function(e,t){return e+t.quantity}),0),n=Math.abs(a%t-t),r=+(n*parseFloat(e.product.u_price_cost)).toFixed(2),c=r;e.line_items.push({quantity:n,price:r,total:c,kind:"adjustment",description:"add ".concat(n," EA")}),e.totalSum=e.totalSum+c,e.qtySum=Math.round(e.qtySum+n/t),o((function(e){return Object(Je.a)({},e,{adjustmentTotal:e.adjustmentTotal+ +c,orderTotal:e.orderTotal+c})}))}})),o((function(t){return Object(Je.a)({},t,{groupedLineItems:e})}))}),[c]),r.a.createElement(fe.a,{size:"small",className:a.liTable},r.a.createElement(Ee.a,null,r.a.createElement(be.a,null,r.a.createElement(he.a,{className:a.deleteBtn}),r.a.createElement(he.a,{className:a.unf},"unf"),r.a.createElement(he.a,null,"description"),r.a.createElement(he.a,null,"price"),r.a.createElement(he.a,null,"cost"),r.a.createElement(he.a,null,"pk"),r.a.createElement(he.a,{align:"center"},"qty"),r.a.createElement(he.a,{align:"right"},"total"))),r.a.createElement(ge.a,null,Object.values(l.groupedLineItems).map((function(t,n){return r.a.createElement(r.a.Fragment,{key:"wsgli".concat(n)},r.a.createElement(be.a,{className:a.groupedRow},r.a.createElement(he.a,{className:a.deleteBtn},r.a.createElement(Lt.a,{title:"remove these line item(s)"},r.a.createElement(E.a,{"aria-label":"remove these line item(s)",onClick:function(){return function(t){var a=t.line_items.map((function(e){return e.id})).filter((function(e){return e}));if(a&&a.length&&window.confirm("are you sure?")){var n=localStorage&&localStorage.getItem("token");fetch("".concat(V,"/wholesaleorder/removelineitem"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({ids:a})}).then((function(e){return e.json()})).then((function(t){return!t.error&&e.setReload(!0)})).catch((function(e){return console.warn("members removelineitem caught err",e)}))}}(t)}},r.a.createElement(Ue.a,null)))),r.a.createElement(he.a,null,t.product&&"".concat(t.product.unf?t.product.unf:t.product.upc_code," ")),r.a.createElement(he.a,null,t.product&&"".concat(t.product.name," ").concat(t.product.description),t.product&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),"".concat(t.product.upc_code," ").concat(t.product.category," > ").concat(t.product.sub_category)," ")),r.a.createElement(he.a,null,t.product&&t.product.ws_price,t.product&&t.product.ws_price!==t.product.u_price?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),"(".concat(t.product.u_price,"EA)")):""),r.a.createElement(he.a,null,t.product&&" ".concat(t.product.ws_price_cost),r.a.createElement("br",null),t.product&&"".concat(t.product.ws_price_cost!==t.product.u_price_cost?"(".concat(t.product.u_price_cost,"EA)"):"")),r.a.createElement(he.a,null,t.product&&t.product.pk),r.a.createElement(he.a,{align:"center",className:a.groupedRowTotals},+t.qtySum.toFixed(2)),r.a.createElement(he.a,{align:"right",className:a.groupedRowTotals},t.totalSum.toFixed(2))),t.line_items.map((function(t){return r.a.createElement(be.a,{key:"wsli".concat(t.id)},r.a.createElement(he.a,{colSpan:2}),r.a.createElement(he.a,null,"[",t.kind,"] ",t.vendor," ",t.data&&t.data.product&&t.data.product.import_tag?t.data.product.import_tag:t.description," ",t.OrderId&&r.a.createElement(pe.a,{color:"primary",href:"",onClick:function(a){a.preventDefault(),e.history.push("/orders/edit/".concat(t.OrderId))}},"Order #",t.OrderId)),r.a.createElement(he.a,null),r.a.createElement(he.a,null),r.a.createElement(he.a,null,"adjustment"===t.kind?"".concat(t.quantity," EA"):"".concat(t.quantity," ").concat(t.selected_unit)),r.a.createElement(he.a,{align:"center"},t.data&&t.data.product&&"EA"===t.selected_unit?+(t.quantity/t.data.product.pk).toFixed(2):null),r.a.createElement(he.a,{align:"right"},t.total))})))})),r.a.createElement(be.a,null,r.a.createElement(he.a,{colSpan:2,align:"center"},"ITEM COUNT"),r.a.createElement(he.a,{colSpan:2,align:"right"},"PRODUCT TOTAL"),r.a.createElement(he.a,{colSpan:2,align:"right"},"ADJUSTMENTS TOTAL"),r.a.createElement(he.a,{colSpan:2,align:"right",className:a.groupedRowTotals},"TOTAL")),r.a.createElement(be.a,null,r.a.createElement(he.a,{colSpan:2,align:"center"},Object.keys(l.groupedLineItems).length),r.a.createElement(he.a,{colSpan:2,align:"right"},l.productTotal.toFixed(2)),r.a.createElement(he.a,{colSpan:2,align:"right"},l.adjustmentTotal.toFixed(2)),r.a.createElement(he.a,{colSpan:2,align:"right",className:a.groupedRowTotals},l.orderTotal.toFixed(2)))))})),Bt=localStorage&&localStorage.getItem("token"),Wt=Object(k.a)((function(e){return Object(C.a)({vendor:{marginBottom:e.spacing(2),marginRight:e.spacing(2)},editMenu:{padding:"".concat(e.spacing(2),"px 0"),textAlign:"right"}})}));var Mt=Object(d.h)((function(e){var t=Wt(),a=Object(n.useState)(""),c=Object(s.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(),u=Object(s.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(!0),f=Object(s.a)(p,2),g=f[0],h=f[1],b=Object(n.useState)(!1),v=Object(s.a)(b,2),y=v[0],O=v[1],j=Object(n.useState)(!0),S=Object(s.a)(j,2),w=S[0],k=S[1],C=Object(n.useState)({groupedLineItems:{},productTotal:0,adjustmentTotal:0,orderTotal:0}),I=Object(s.a)(C,2),x=I[0],_=I[1],T=Ct(l,h,w,k);Object(n.useEffect)((function(){"loaded"===T.status&&T.payload&&d(T.payload)}),[T,l]);var N=r.a.useState(!1),A=Object(s.a)(N,2),z=A[0],R=A[1],L=r.a.useState(""),P=Object(s.a)(L,2),F=P[0],B=P[1],W=function(e,t){"clickaway"!==t&&R(!1)},M=e.match.params.id;function D(e){return m&&m[e]?m[e]:""}return Object(n.useEffect)((function(){M&&o(M)}),[M]),xt(m,y,O,B,R),m?r.a.createElement(r.a.Fragment,null,g?r.a.createElement(se,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"flex-start"},r.a.createElement(me.a,{item:!0,sm:5},r.a.createElement(xe.a,{className:t.vendor,label:"vendor",fullWidth:!0,value:D("vendor"),onChange:function(e){d((function(t){if(t)return Object(Je.a)({},t,{vendor:e.target.value})}))}}),r.a.createElement(jt.a,{fullWidth:!0},r.a.createElement(Ot.a,{id:"order-status-select-label"},"status"),r.a.createElement(St.a,{labelId:"order-status-select-label",id:"order-status-select",value:D("status"),onChange:function(e){d((function(t){if(t)return Object(Je.a)({},t,{status:e.target.value})}))}},Object.keys(Q).map((function(e){return r.a.createElement(Fe.a,{key:"os-sel-".concat(e),value:e},Q[e])})))),r.a.createElement(jt.a,{fullWidth:!0},r.a.createElement(Ot.a,{id:"payment-status-select-label"},"payment status"),r.a.createElement(St.a,{labelId:"payment-status-select-label",id:"payment-status-select",value:D("payment_status"),onChange:function(e){d((function(t){if(t)return Object(Je.a)({},t,{payment_status:e.target.value})}))}},Object.keys(Y).map((function(e){return r.a.createElement(Fe.a,{key:"ps-sel-".concat(e),value:e},Y[e])})))),r.a.createElement(jt.a,{fullWidth:!0},r.a.createElement(Ot.a,{id:"shipment-status-select-label"},"shipment status"),r.a.createElement(St.a,{labelId:"shipment-status-select-label",id:"shipment-status-select",value:D("shipment_status"),onChange:function(e){d((function(t){if(t)return Object(Je.a)({},t,{shipment_status:e.target.value})}))}},Object.keys(X).map((function(e){return r.a.createElement(Fe.a,{key:"ship-sel-".concat(e),value:e},X[e])}))))),r.a.createElement(me.a,{item:!0,sm:7},r.a.createElement(xe.a,{label:"notes",multiline:!0,fullWidth:!0,rows:4,rowsMax:28,value:D("notes"),onChange:function(e){d((function(t){if(t)return Object(Je.a)({},t,{notes:e.target.value})}))}}),r.a.createElement("div",{className:t.editMenu},r.a.createElement(zt,{wholesaleOrder:m,onSaveBtnClick:function(){"new"===l&&d((function(e){if(e)return Object(Je.a)({},e,{id:"new"})})),O(!0),e.setReloadOrders(!0)},onDeleteBtnClick:function(){m&&fetch("".concat(V,"/wholesaleorder"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Bt)},body:JSON.stringify({id:m.id})}).then((function(e){return e.json()})).then((function(t){t.error?(B(t.msg),R(!0)):e.history.replace("/wholesaleorders")})).catch((function(e){console.warn("delete wholesaleOrder fetch caught err:",e),B("o noz! ".concat(e)),R(!0)}))},onExportToCsv:function(){console.log("handle onExportToCsv wholesaleOrder:",x)},onProductsExportToCsv:function(){var e=m&&m.vendor;e&&fetch("".concat(V,"/whosaleorder/exportcsv"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"text/csv",Authorization:"Bearer ".concat(Bt)},body:JSON.stringify({lineItemData:x})}).then((function(e){return e.text()})).then((function(t){return function(e,t){if(window.navigator.msSaveBlob){var a=new Blob([t],{type:"text/csv"});window.navigator.msSaveBlob(a,e)}else{var n=document.createElement("a");if(n.download=e,window.URL.createObjectURL){var r=new Blob([t],{type:"text/csv"});n.href=window.URL.createObjectURL(r)}else n.href="data:text/csv;charset=utf-8,"+encodeURIComponent(t);if(document.createEvent){var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!0),n.dispatchEvent(c)}else n.click()}}("".concat(e,".csv"),t)})).catch((function(e){console.warn("wholesaleOrder onExportToCsv fetch caught err:",e),B("o noz! ran into a problem ;("),R(!0)}))}})))),r.a.createElement(Ft,{wholesaleOrder:m,setReload:k,lineItemData:x,setLineItemData:_})),r.a.createElement(qe.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:z,autoHideDuration:6e3,onClose:W,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},F),action:[r.a.createElement(E.a,{key:"close","aria-label":"close",onClick:W},r.a.createElement(Ue.a,null))]})):r.a.createElement(se,null)})),Dt=a(421),qt=a(416),Ht=a(417),Ut=localStorage&&localStorage.getItem("token"),Jt=Object(k.a)((function(e){return Object(C.a)({root:{maxWidth:"100vw"}})}));var Gt=function(e){var t=Jt(),a=Object(n.createRef)(),c=Object(n.useState)(!1),l=Object(s.a)(c,2),o=l[0],i=l[1],u=Object(n.useCallback)((function(){a.current&&a.current.onQueryChange(),i(!1)}),[a,i]),m=Object(n.useState)(),d=Object(s.a)(m,2),p=d[0],f=d[1],g={tooltip:"ADD LINE ITEMS TO ORDER",icon:"add",onClick:function(e,t){k(e),Array.isArray(t)&&f(t.map((function(e){return e.id})))}};Object(n.useEffect)((function(){o&&u()}),[o,u]);var E=Object(n.useState)(),b=Object(s.a)(E,2),v=b[0],y=b[1];Object(n.useEffect)((function(){fetch("".concat(V,"/wholesaleorders"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Ut)},body:JSON.stringify({status:["new","needs_review"]})}).then((function(e){return e.json()})).then((function(e){return y(e.data.map((function(e){return{id:e.id,name:"".concat(e.vendor," ").concat(new Date(e.createdAt).toLocaleDateString())}})))})).catch(console.warn)}),[]);var O=r.a.useState(null),j=Object(s.a)(O,2),S=j[0],w=j[1],k=function(e){w(e.currentTarget)},C=function(){f([]),w(null)},I=function(t){fetch("".concat(V,"/wholesaleorder/addlineitems"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Ut)},body:JSON.stringify({id:t,selectedLineItems:p})}).then((function(e){return e.json()})).then((function(e){})).catch(console.warn).finally((function(){C(),i(!0),e.setReloadOrders(!0)}))};return r.a.createElement("div",{className:t.root},r.a.createElement(ft.a,{tableRef:a,columns:[{title:"vendor",field:"vendor",type:"string",filterPlaceholder:"filter"},{title:"qty",field:"quantity",type:"string",filtering:!1},{title:"total",field:"total",type:"string",filtering:!1},{title:"product",field:"data",type:"string",render:function(e){return e.data&&e.data.product?"".concat(e.data.product.name," ").concat(e.data.product.description):null}},{title:"id",field:"id",type:"string",hidden:!0},{title:"OrderId",field:"OrderId",type:"string",hidden:!0},{title:"WholesaleOrderId",field:"WholesaleOrderId",type:"string",hidden:!0}],data:function(e){return new Promise((function(t,a){fetch("".concat(V,"/wholesaleorders/lineitems"),{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Ut)},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){return console.warn("onoz, caught err:",e),t({data:[],page:0,totalCount:0})}))}))},title:"Line Items",options:{headerStyle:{position:"sticky",top:0},maxBodyHeight:"calc(100vh - 121px - 28px)",pageSize:50,pageSizeOptions:[50,100,500],debounceInterval:750,filtering:!0,search:!0,emptyRowsWhenPaging:!1,selection:!0},actions:[g]}),r.a.createElement(Pe.a,{id:"simple-menu",anchorEl:S,keepMounted:!0,open:Boolean(S),onClose:C},r.a.createElement(Fe.a,{onClick:function(){return I("new")}},"New wholesale order"),r.a.createElement(h.a,null),v&&v.map((function(e){return r.a.createElement(Fe.a,{key:"wholesaleorder-sel-".concat(e.id),onClick:function(){return I(e.id)}},e.name)}))))},Vt=Object(Qe.a)({root:{border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(Dt.a),Kt=Object(Qe.a)({root:{backgroundColor:"rgba(0, 0, 0, .03)",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:"12px 0"}},expanded:{}})(qt.a),$t=Object(Qe.a)((function(e){return{root:{padding:0}}}))(Ht.a),Qt=Object(k.a)((function(e){return Object(C.a)({root:{padding:e.spacing(2),maxWidth:"100vw",minHeight:"100vh"},title:{display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"left",marginLeft:e.spacing(2),padding:e.spacing(2)},titleText:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,height:"100%"},paperNav:{textAlign:"center",color:e.palette.text.secondary,height:"100%"},list:{padding:0,width:"100%"},selectedListItem:{borderLeft:"".concat(e.spacing(2),"px solid ").concat(e.palette.divider)},noOrdersMsg:{padding:e.spacing(2)}})}));var Yt=Object(u.b)((function(e){return{userService:e.session.userService}}),void 0)(Object(d.h)((function(e){var t=Qt(),a=e.userService,c=Object(n.useState)([]),l=Object(s.a)(c,2),o=l[0],i=l[1],u=Object(n.useState)(!0),p=Object(s.a)(u,2),f=p[0],h=p[1],b=Object(n.useState)(!1),v=Object(s.a)(b,2),O=v[0],S=v[1],w=Object(n.useState)("new"),k=Object(s.a)(w,2),C=k[0],I=k[1],x=It(C,S,f,h);Object(n.useEffect)((function(){"loaded"===x.status&&i(x.payload)}),[x]);var _,T=Object(n.useState)(!1),N=Object(s.a)(T,2),A=N[0],z=N[1],R=function(e,t){"clickaway"!==t&&z(!1)};try{_=window.location.pathname.split("/").reverse()[0],isNaN(parseInt(_))&&(_=void 0)}catch(L){}return a?r.a.createElement(r.a.Fragment,null,r.a.createElement(me.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch",className:t.root,spacing:2},r.a.createElement(me.a,{sm:12,md:3,lg:2,item:!0},r.a.createElement(de.a,{className:t.paperNav},r.a.createElement("div",{className:t.title},r.a.createElement(pe.a,{color:"textPrimary",href:"",onClick:function(t){t.preventDefault(),e.history.push("/wholesaleorders")},className:t.titleText},"WHOLESALE ORDERS"),r.a.createElement(E.a,{"aria-label":"add wholesale order",title:"add wholeslae order",onClick:function(){return e.history.push("/wholesaleorders/edit/new"),void z(!0)}},r.a.createElement(De.a,null))),Object.keys(Q).map((function(e){return r.a.createElement(Vt,{square:!0,key:"EP".concat(e),defaultExpanded:"new"===e,expanded:C===e,onChange:function(t,a){return function(e,t){t&&(I(e),h(!0))}(e,a)}},r.a.createElement(Kt,{expandIcon:r.a.createElement(yt.a,null),"aria-controls":"panel".concat(e,"-content"),id:"panel".concat(e,"-header")},r.a.createElement(ve.a,null,Q[e])),r.a.createElement($t,null,O?r.a.createElement(se,null):r.a.createElement(g.a,{className:t.list},o&&o.length?o.map((function(e,a){return r.a.createElement(y.a,{button:!0,component:m.b,to:"/wholesaleorders/edit/".concat(e.id),key:"wsorder".concat(a),className:_==e.id?t.selectedListItem:void 0},r.a.createElement(j.a,{primary:e.vendor,secondary:new Date(e.createdAt).toLocaleDateString()}))})):r.a.createElement("div",{className:t.noOrdersMsg},r.a.createElement("i",null,"No wholesale orders for this status...")))))})))),r.a.createElement(me.a,{sm:12,md:9,lg:10,item:!0},r.a.createElement(d.d,null,r.a.createElement(Le,{userService:a,path:"/wholesaleorders",exact:!0},r.a.createElement(Gt,{setReloadOrders:h})),r.a.createElement(Le,{userService:a,path:"/wholesaleorders/edit/:id"},r.a.createElement(de.a,{className:t.paper},r.a.createElement(Mt,{setReloadOrders:h})))))),r.a.createElement(qe.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:A,autoHideDuration:4e3,onClose:R,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},"Created new Wholesale Order!"),action:[r.a.createElement(E.a,{key:"close","aria-label":"close",onClick:R},r.a.createElement(Ue.a,null))]})):null}))),Xt=a(379),Zt=a(414),ea=a(378),ta=Object(k.a)((function(e){return Object(C.a)({modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}})})),aa=["admin","member","guest"];function na(e){var t=localStorage&&localStorage.getItem("token"),a=ta(),c=Object(n.useState)(""),l=Object(s.a)(c,2),o=l[0],i=l[1],u=Object(n.useState)("guest"),m=Object(s.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),g=Object(s.a)(f,2),h=g[0],E=g[1],b=Object(n.useState)(""),v=Object(s.a)(b,2),y=v[0],O=v[1];Object(n.useEffect)((function(){o&&o.includes("@")?E(!1):E(!0)}),[o]);return r.a.createElement("div",null,r.a.createElement(Xt.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:a.modal,open:e.open,onClose:e.handleClose,closeAfterTransition:!0,BackdropComponent:Zt.a,BackdropProps:{timeout:500}},r.a.createElement(ea.a,{in:e.open},r.a.createElement("div",{className:a.paper},r.a.createElement("h2",null,"Add New User"),r.a.createElement("div",null,r.a.createElement(xe.a,{type:"email",margin:"dense",label:"email",placeholder:"email",value:o,onChange:function(e){return i(e.target.value)},autoFocus:!0,fullWidth:!0}),r.a.createElement(jt.a,{fullWidth:!0},r.a.createElement(Ot.a,{id:"role-select-label"},"Role"),r.a.createElement(St.a,{labelId:"role-select-label",id:"role-select",margin:"dense",value:d,onChange:function(e){return e.target&&e.target.value&&p(e.target.value)}},aa.map((function(e){return r.a.createElement(Fe.a,{value:e,key:"role-select".concat(e)},e)})))),r.a.createElement(_e.a,{variant:"contained",color:"primary",onClick:function(){o?(O(""),fetch("".concat(V,"/user/create"),{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({email:o,role:d})}).then((function(e){return e.json()})).then((function(t){if(t.error)return O(t.msg);e.handleRefresh(),e.handleClose()})).catch((function(e){return console.warn(e),O("o noz! there was an error creating user")})).finally((function(){return E(!1)}))):O("type an email!")},disabled:h},"CREATE"),y&&r.a.createElement(ue.a,{color:"error.main"},r.a.createElement(ve.a,{component:"p"},y)))))))}var ra=localStorage&&localStorage.getItem("token"),ca=Object(Qe.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return r.a.createElement(Pe.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),la=Object(Qe.a)((function(e){return{root:{"&:focus":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(Fe.a);function oa(e){var t=r.a.useState(null),a=Object(s.a)(t,2),n=a[0],c=a[1],l=r.a.useState(e.user.role||"none"),o=Object(s.a)(l,2),i=o[0],u=o[1],m=function(){c(null)},d=function(e,t){e&&fetch("".concat(V,"/user/role"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(ra)},body:JSON.stringify({id:e,role:t})}).then((function(e){return e.json()})).then((function(e){m(),u(t)})).catch((function(e){return console.warn("handleRoleChange caught err:",e)}))};return r.a.createElement("div",null,r.a.createElement(_e.a,{"aria-controls":"user-roles-menu","aria-haspopup":"true",variant:"contained",color:"primary",onClick:function(e){c(e.currentTarget)},disabled:e.disabled},i),r.a.createElement(ca,{id:"user-roles-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:m},r.a.createElement(la,null,r.a.createElement(j.a,{primary:"admin",onClick:function(){return d(e.user.id,"admin")}})),r.a.createElement(la,null,r.a.createElement(j.a,{primary:"member",onClick:function(){return d(e.user.id,"member")}})),r.a.createElement(la,null,r.a.createElement(j.a,{primary:"guest",onClick:function(){return d(e.user.id,"guest")}}))))}var ia=Object(k.a)((function(e){return Object(C.a)({root:{padding:e.spacing(2),maxWidth:"100vw",minHeight:"100vh"}})}));var ua=Object(u.b)((function(e){return{userService:e.session.userService}}),void 0)(Object(d.h)((function(e){var t=ia(),a=e.userService,c=Object(n.createRef)();console.log("#TODO: deal with userService:",a);var l=Object(n.useState)(!1),o=Object(s.a)(l,2),i=o[0],u=o[1],m=localStorage&&localStorage.getItem("token"),d=Object(n.useState)(!1),p=Object(s.a)(d,2),f=p[0],g=p[1],h={icon:i?"zoom_out":"search",tooltip:i?"Close Search":"Search",isFreeAction:!0,onClick:function(){return u(!i)}},E={icon:"add",tooltip:"add new user",isFreeAction:!0,onClick:function(){return g(!0)}},b={tooltip:"Remove User",icon:"delete",onClick:function(e,t){if(a&&a.user&&a.user.email===t.email)alert("you cannot delete yrself!");else{if(!t.id)return;window.confirm("Are you sure you want to delete ".concat(t.email,"?"))&&fetch("".concat(V,"/user"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(m)},body:JSON.stringify({id:t.id})}).then((function(e){return e.json()})).then((function(){return c.current&&c.current.onQueryChange()})).catch((function(e){return console.warn("user deleteAction caught err",e)}))}}},v=Object(n.useState)([h,E,b]),y=Object(s.a)(v,2),O=y[0],j=y[1];return Object(n.useEffect)((function(){j([h,E,b])}),[i]),r.a.createElement("div",{className:t.root},r.a.createElement(ft.a,{tableRef:c,columns:[{title:"role",field:"role",type:"string",render:function(e){return r.a.createElement(oa,{user:e,disabled:!(!a||!a.user||a.user.email!==e.email)})}},{title:"email",field:"email",type:"string"},{title:"active",field:"active",type:"boolean",filtering:!1},{title:"created",field:"createdAt",type:"datetime",filtering:!1,render:function(e){return new Date(e.createdAt).toLocaleString()}},{title:"updated",field:"updatedAt",type:"datetime",filtering:!1,render:function(e){return new Date(e.updatedAt).toLocaleString()}},{title:"id",field:"id",type:"string",hidden:!0}],data:function(e){return new Promise((function(t,a){fetch("".concat(V,"/users"),{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(m)},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){return console.warn(e),t({data:[],page:0,totalCount:0})}))}))},title:"Users",options:{headerStyle:{position:"sticky",top:0},maxBodyHeight:"calc(100vh - 121px - 28px)",pageSize:50,pageSizeOptions:[50,100,500],debounceInterval:750,filtering:!0,search:i,emptyRowsWhenPaging:!1},actions:O}),r.a.createElement(na,{open:f,handleClose:function(){g(!1)},handleRefresh:function(){return c.current&&c.current.onQueryChange()}}))}))),sa=a(232),ma=localStorage&&localStorage.getItem("token"),da={a:"Artificial ingredients",c:"Low carb",d:"Dairy free",f:"Food Service items",g:"Gluten free",k:"Kosher",l:"Low sodium/no salt",m:"Non-GMO Project Verified",og:"Organic",r:"Refined sugar",v:"Vegan",w:"Wheat free",ft:"Fair Trade",n:"Natural",s:"Specialty Only",y:"Yeast free",1:"100% organic",2:"95%+ organic",3:"70%+ organic"};var pa=Object(k.a)((function(e){return Object(C.a)({root:{padding:e.spacing(2),maxWidth:"100vw",minHeight:"100vh"}})}));var fa=function(){var e=pa(),t=Object(n.createRef)(),a=Object(n.useState)(!1),c=Object(s.a)(a,2),l=c[0],o=c[1],i=Object(n.useCallback)((function(){t.current&&t.current.onQueryChange(),o(!1)}),[t,o]),u={tooltip:"destroy all selected products",icon:"delete",onClick:function(e,t){var a=Array.isArray(t)?t.map((function(e){return e.id})):[t.id];0!==a.length&&window.confirm("are sure you want to destroy these ".concat(a.length," products?"))&&fetch("".concat(V,"/products/destroy"),{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(ma)},body:JSON.stringify({ids:a})}).catch((function(e){return console.warn("destroy products caught err:",e)})).finally((function(){return o(!0)}))}};Object(n.useEffect)((function(){l&&i()}),[l,i]);var m=Object(n.useState)((function(){fetch("".concat(V,"/categories")).then((function(e){return e.json()})).then((function(e){return f(e)}))})),d=Object(s.a)(m,2),p=d[0],f=d[1],g=Object(n.useState)((function(){fetch("".concat(V,"/sub_categories")).then((function(e){return e.json()})).then((function(e){return b(e)}))})),h=Object(s.a)(g,2),E=h[0],b=h[1],v=Object(n.useState)((function(){fetch("".concat(V,"/products/vendors")).then((function(e){return e.json()})).then((function(e){return j(e)}))})),y=Object(s.a)(v,2),O=y[0],j=y[1];return r.a.createElement("div",{className:e.root},r.a.createElement(ft.a,{tableRef:t,columns:[{title:"category",field:"category",type:"string",lookup:p,filterPlaceholder:"filter"},{title:"sub category",field:"sub_category",type:"string",lookup:E,filterPlaceholder:"filter"},{title:"vendor",field:"vendor",type:"string",lookup:O,filterPlaceholder:"filter"},{title:"name",field:"name",type:"string",hidden:!0},{title:"description",field:"description",type:"string",filtering:!1,render:function(e){return"".concat(e.name," -- ").concat(e.description)}},{title:"pk",field:"pk",type:"numeric",filtering:!1},{title:"size",field:"size",type:"string",filtering:!1},{title:"unit type",field:"unit_type",type:"string",lookup:{CS:"Case",EA:"Each"},filterPlaceholder:"filter"},{title:"price",field:"ws_price",type:"currency",filtering:!1},{title:"unit price",field:"u_price",type:"currency",filtering:!1},{title:"properties",field:"codes",type:"string",lookup:da,filterPlaceholder:"filter",render:function(e){return(t=e.codes)&&t.split(", ").map((function(e,t){return da[e]?r.a.createElement(sa.a,{label:da[e],style:{margin:5},size:"small",key:"pprop".concat(t)}):""}));var t}},{title:"upc",field:"upc_code",type:"string",hidden:!0},{title:"id",field:"id",type:"string",hidden:!0}],data:function(e){return new Promise((function(t,a){fetch("".concat(V,"/products"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){return console.warn("onoz, caught err:",e),t({data:[],page:0,totalCount:0})}))}))},title:"Products",options:{headerStyle:{position:"sticky",top:0},maxBodyHeight:"calc(100vh - 121px - 28px)",pageSize:50,pageSizeOptions:[50,100,500],debounceInterval:750,filtering:!0,search:!0,emptyRowsWhenPaging:!1,selection:!0},actions:[u]}))},ga=a(375),ha=localStorage&&localStorage.getItem("token"),Ea=Object(k.a)((function(e){return Object(C.a)({root:{margin:e.spacing(2),padding:e.spacing(2)},gridItem:{margin:e.spacing(2,0)},vendor:{display:"flex",alignItems:"center",margin:e.spacing(2,0)}})}));function ba(){var e=Ea(),t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),i=Object(s.a)(o,2),u=i[0],m=i[1],d=Object(n.useState)(""),p=Object(s.a)(d,2),f=p[0],g=p[1],h=Object(n.useState)(""),E=Object(s.a)(h,2),b=E[0],v=E[1],y=Object(n.useState)(0),O=Object(s.a)(y,2),j=O[0],S=O[1],w=Object(n.useState)(),k=Object(s.a)(w,2),C=k[0],I=k[1],x=Object(n.useState)(""),_=Object(s.a)(x,2),T=_[0],N=_[1],A=Object(n.useState)(""),z=Object(s.a)(A,2),R=z[0],L=z[1],P=Object(n.useState)((function(){fetch("".concat(V,"/products/vendors")).then((function(e){return e.json()})).then((function(e){return W(e)}))})),F=Object(s.a)(P,2),B=F[0],W=F[1],M=Object(n.useState)((function(){fetch("".concat(V,"/products/import_tags")).then((function(e){return e.json()})).then((function(e){return H(e)}))})),D=Object(s.a)(M,2),q=D[0],H=D[1];var U=r.a.useState(null),J=Object(s.a)(U,2),G=J[0],K=J[1],$=function(){K(null)};return r.a.createElement(de.a,{className:e.root},r.a.createElement("h3",null,"Import Products"),r.a.createElement(me.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"flex-start"},r.a.createElement(me.a,{item:!0,sm:4},r.a.createElement("div",{className:e.vendor},r.a.createElement(xe.a,{label:"Vendor",helperText:"Required.",fullWidth:!0,value:u,onChange:function(e){return m(e.target.value)}}),r.a.createElement("div",null,r.a.createElement(_e.a,{"aria-controls":"customized-menu","aria-haspopup":"true",variant:"contained",color:"primary",size:"small",onClick:function(e){K(e.currentTarget)}},r.a.createElement(nt.a,null))),r.a.createElement(Pe.a,{id:"simple-menu",anchorEl:G,keepMounted:!0,open:Boolean(G),onClose:$},B&&Object.keys(B).map((function(e){return r.a.createElement(Fe.a,{key:"vendor-sel-".concat(e),onClick:function(){return function(e){m(e),$()}(e)}},e)})))),r.a.createElement(jt.a,{fullWidth:!0,className:e.gridItem},r.a.createElement(Ot.a,{id:"prev-import-tag-select-label"},"Previous Import Tag"),r.a.createElement(St.a,{labelId:"prev-import-tag-select-label",id:"prev-import-tag-select",value:b,onChange:function(e){return e.target&&e.target.value&&v(e.target.value)}},q&&Object.keys(q).map((function(e){return r.a.createElement(Fe.a,{key:"tag-sel-".concat(e),value:e},e)}))),r.a.createElement(ga.a,null,"If updating, products with the tag you select here will first be removed.")),r.a.createElement(xe.a,{label:"Import Tag",helperText:"Required. This should be unique.",fullWidth:!0,value:f,onChange:function(e){return g(e.target.value)},className:e.gridItem}),r.a.createElement(xe.a,{label:"Markup",helperText:"Markup percentage. Use decimal format.",type:"number",inputProps:{min:"0",max:"1",step:"0.01"},fullWidth:!0,value:j,onChange:function(e){return S(isNaN(parseFloat(e.target.value))?0:parseFloat(e.target.value))},className:e.gridItem}),r.a.createElement("input",{type:"file",accept:".csv",onChange:function(e){if(l(!0),e.target.files&&e.target.files.length){var t=new FormData;t.append("file",e.target.files[0]),I(t),l(!1)}else I(void 0),l(!1)},disabled:c,className:e.gridItem}),r.a.createElement("div",{className:e.gridItem},r.a.createElement(_e.a,{disabled:c||!f||!u||void 0===C,onClick:function(){return N(""),L(""),l(!0),void(C?(C.delete("vendor"),C.delete("import_tag"),C.delete("prev_import_tag"),C.delete("markup"),C.append("vendor",u),C.append("import_tag",f),C.append("prev_import_tag",b),C.append("markup","".concat(j)),fetch("".concat(V,"/products/upload"),{method:"POST",headers:{Authorization:"Bearer ".concat(ha)},body:C}).then((function(e){return e.json()})).then((function(e){e.error?N(e.msg):L(e.msg)})).catch((function(e){console.warn("fetch caugher err:",e),N(e.toString())})).finally((function(){return l(!1)}))):N("please select a file!"))},size:"large"},"UPLOAD")),r.a.createElement("div",{className:e.gridItem},c&&r.a.createElement(se,null),T&&r.a.createElement("div",{className:e.gridItem},r.a.createElement("h3",null,"Response Error!"),r.a.createElement("p",null,T)),R&&r.a.createElement("div",{className:e.gridItem},r.a.createElement("h3",null,"Response"),r.a.createElement("p",null,R)))),r.a.createElement(me.a,{item:!0,sm:8},r.a.createElement(ve.a,{variant:"h6",gutterBottom:!0},"Helpful Information"),r.a.createElement(ve.a,{variant:"body1",gutterBottom:!0,component:"div"},r.a.createElement("dl",null,r.a.createElement("dt",null,"What kind of file should be uploaded?"),r.a.createElement("dd",null,"Comma separated value files with the extension .csv"),r.a.createElement("dt",null,"What columns will get processed?"),r.a.createElement("dd",null,r.a.createElement("b",null,"unf"),", ",r.a.createElement("b",null,"upc_code"),", ",r.a.createElement("b",null,"name"),", ",r.a.createElement("b",null,"description"),","," ",r.a.createElement("b",null,"pk"),", ",r.a.createElement("b",null,"size"),", ",r.a.createElement("b",null,"unit_type"),", ",r.a.createElement("b",null,"ws_price"),","," ",r.a.createElement("b",null,"u_price"),", ",r.a.createElement("b",null,"ws_price_markup"),", ",r.a.createElement("b",null,"u_price_markup"),","," ",r.a.createElement("b",null,"category"),", ",r.a.createElement("b",null,"sub_category"),", ",r.a.createElement("b",null,"codes"),", ",r.a.createElement("b",null,"a"),","," ",r.a.createElement("b",null,"r"),", ",r.a.createElement("b",null,"c"),", ",r.a.createElement("b",null,"l"),", ",r.a.createElement("b",null,"d"),", ",r.a.createElement("b",null,"f"),", ",r.a.createElement("b",null,"g"),","," ",r.a.createElement("b",null,"v"),", ",r.a.createElement("b",null,"w"),", ",r.a.createElement("b",null,"y"),", ",r.a.createElement("b",null,"k"),", ",r.a.createElement("b",null,"ft"),", ",r.a.createElement("b",null,"m"),","," ",r.a.createElement("b",null,"s"),", ",r.a.createElement("b",null,"n"),", ",r.a.createElement("b",null,"og"),"."),r.a.createElement("dt",null,"Are any of these optional?"),r.a.createElement("dd",null,r.a.createElement("b",null,"unf"),", ",r.a.createElement("b",null,"ws_price_markup"),", ",r.a.createElement("b",null,"u_price_markup"),","," ",r.a.createElement("b",null,"category"),", ",r.a.createElement("b",null,"sub_category"),", ",r.a.createElement("b",null,"codes"),", ",r.a.createElement("b",null,"a"),","," ",r.a.createElement("b",null,"r"),", ",r.a.createElement("b",null,"c"),", ",r.a.createElement("b",null,"l"),", ",r.a.createElement("b",null,"d"),", ",r.a.createElement("b",null,"f"),", ",r.a.createElement("b",null,"g"),","," ",r.a.createElement("b",null,"v"),", ",r.a.createElement("b",null,"w"),", ",r.a.createElement("b",null,"y"),", ",r.a.createElement("b",null,"k"),", ",r.a.createElement("b",null,"ft"),", ",r.a.createElement("b",null,"m"),","," ",r.a.createElement("b",null,"s"),", ",r.a.createElement("b",null,"n"),", ",r.a.createElement("b",null,"og"),"."),r.a.createElement("dt",null,r.a.createElement("b",null,"codes")," column"),r.a.createElement("dd",null,"the ",r.a.createElement("b",null,"codes")," column value can be a comma-separated list of codes. the values that can be entered in this field are any combination of a, r, c, l, d, f, g, v, w, y, k, ft, m, s, n, og, 1, 2, 3."),r.a.createElement("dt",null,"How do the code columns translate?"),r.a.createElement("dd",null,"The values in the code columns need to be the same as the header. so for example if there's a column ",r.a.createElement("b",null,"a")," then the value for the fields in the column need to be ",r.a.createElement("i",null,"a")," (or blank if not appliciable). except for the ",r.a.createElement("b",null,"og")," column which can have values og, 1, 2, or 3.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"code"),r.a.createElement("th",null,"translation"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"a"),r.a.createElement("td",null,"Artificial ingredients")),r.a.createElement("tr",null,r.a.createElement("td",null,"c"),r.a.createElement("td",null,"Low carb")),r.a.createElement("tr",null,r.a.createElement("td",null,"d"),r.a.createElement("td",null,"Dairy free")),r.a.createElement("tr",null,r.a.createElement("td",null,"f"),r.a.createElement("td",null,"Food Service items")),r.a.createElement("tr",null,r.a.createElement("td",null,"g"),r.a.createElement("td",null,"Gluten free")),r.a.createElement("tr",null,r.a.createElement("td",null,"k"),r.a.createElement("td",null,"Kosher")),r.a.createElement("tr",null,r.a.createElement("td",null,"l"),r.a.createElement("td",null,"Low sodium/no salt")),r.a.createElement("tr",null,r.a.createElement("td",null,"m"),r.a.createElement("td",null,"Non-GMO Project Verified")),r.a.createElement("tr",null,r.a.createElement("td",null,"r"),r.a.createElement("td",null,"Refined sugar")),r.a.createElement("tr",null,r.a.createElement("td",null,"v"),r.a.createElement("td",null,"Vegan")),r.a.createElement("tr",null,r.a.createElement("td",null,"w"),r.a.createElement("td",null,"Wheat free")),r.a.createElement("tr",null,r.a.createElement("td",null,"ft"),r.a.createElement("td",null,"Fair Trade")),r.a.createElement("tr",null,r.a.createElement("td",null,"n"),r.a.createElement("td",null,"Natural")),r.a.createElement("tr",null,r.a.createElement("td",null,"s"),r.a.createElement("td",null,"Specialty Only")),r.a.createElement("tr",null,r.a.createElement("td",null,"y"),r.a.createElement("td",null,"Yeast free")),r.a.createElement("tr",null,r.a.createElement("td",null,"og"),r.a.createElement("td",null,"Organic")),r.a.createElement("tr",null,r.a.createElement("td",null,"1"),r.a.createElement("td",null,"100% organic")),r.a.createElement("tr",null,r.a.createElement("td",null,"2"),r.a.createElement("td",null,"95%+ organic")),r.a.createElement("tr",null,r.a.createElement("td",null,"3"),r.a.createElement("td",null,"70%+ organic"))))),r.a.createElement("dt",null,"How is markup applied?"),r.a.createElement("dd",null,"Markup is a percentage in decimal format so 0.10 will markup products by 10%. The formula is: ",r.a.createElement("i",null,"PRICE + (PRICE * MARKUP)")," ","so if the value of ",r.a.createElement("b",null,"ws_price")," is 10.00 and the markup specified is 0.10 the the markup price will be 11.00.",r.a.createElement("br",null),r.a.createElement("br",null),"If any rows of the price sheet has a non-empty, non-zero value in the ",r.a.createElement("b",null,"ws_price_markup")," or ",r.a.createElement("b",null,"u_price_markup")," then that will be used as the markup price. This means only some rows of the price sheet can contain special markups while the rest of the sheet can have a single markup applied."),r.a.createElement("dt",null,"Import Tag"),r.a.createElement("dd",null,"This field is used to track changes to new price sheets that are meant to update products that have already been imported once. A use-case for this is when uploading partial lists of product for a vendor. So for example if a sub-set of products are imported, then a while later a new sheet of products can be imported without having to destroy and re-import all the products for a vendor. If uploading a complete list of all products for a particular vendor then it would be reasonable to use the same value as the Vendor field.",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("b",null,"NOTE:")," it can be useful to include the current date in the value for the Import Tag field (or otherwise make this a unique value). When creating wholesale orders it might be useful to know which price sheet a product that was ordered came from.",r.a.createElement("br",null),r.a.createElement("br",null),"When the Previous Import Tag is specified, products with that tag are first deleted before new products are created."))))))}var va=a(92),ya=a(100),Oa=a.n(ya),ja=a(156),Sa=a.n(ja),wa=localStorage&&localStorage.getItem("token"),ka=function(e,t){var a=Object(n.useState)({status:"loading"}),r=Object(s.a)(a,2),c=r[0],l=r[1];return Object(n.useEffect)((function(){e&&0!==e.length?fetch("".concat(V,"/order/edit/").concat(e),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(wa)}}).then((function(e){return e.json()})).then((function(e){l({status:"loaded",payload:e})})).catch((function(e){console.warn("useOrderService fetch caught err:",e),l(Object(Je.a)({},e))})).finally((function(){t(!1)})):t(!1)}),[e,t]),c},Ca=a(229),Ia=Object(k.a)((function(e){return Object(C.a)({root:{width:"100%",overflowX:"auto",height:"100%"},table:{maxWidth:"95vw",padding:e.spacing(1),borderCollapse:"separate","& td":{border:"none"}},qtyinput:{width:"50px"}})}));function xa(e){return void 0===e?"0.00":"$".concat("string"===typeof e?parseFloat(e).toFixed(2):e.toFixed(2))}function _a(e){var t=e.data&&e.data.product&&e.data.product.u_price?parseFloat(e.data.product.u_price):e.price,a=e.data&&e.data.product?parseFloat(e.data.product.ws_price):e.price;return"EA"===e.selected_unit&&t?isNaN(e.quantity*t)?0:e.quantity*t:isNaN(e.quantity*a)?0:e.quantity*a}var Ta=function(e){var t=Ia(),a=e.line_items.filter((function(e){return"product"===e.kind})).map((function(e){var t=e.total;return"string"===typeof t?parseFloat(t):t})).reduce((function(e,t){return e+t}),0),c=function(e){return e.filter((function(e){return"adjustment"===e.kind})).map((function(e){var t=e.total;return"string"===typeof t?parseFloat(t):t})).reduce((function(e,t){return e+t}),0)}(e.line_items),l=K*(a+c),o=l+a+c,i=e.onTaxesChange,u=e.onTotalChange,s=e.onSubTotalChange;Object(n.useEffect)((function(){i(l)}),[l]),Object(n.useEffect)((function(){u(o)}),[o]),Object(n.useEffect)((function(){s(a)}),[a]);var m=function(t,a){t.quantity=a>0?a:1,t.total=_a(t);var n=e.line_items.indexOf(t);e.onLineItemUpdated(n,t)},d=function(t){var a=e.line_items.indexOf(t);e.removeLineItem(a)},p=e.line_items.filter((function(e){return"adjustment"===e.kind})),f=e.line_items.filter((function(e){return"payment"===e.kind}));return r.a.createElement(de.a,{className:t.root},r.a.createElement(fe.a,{className:t.table,"aria-label":"cart"},r.a.createElement(Ee.a,null,r.a.createElement(be.a,null,r.a.createElement(he.a,{align:"center"}),r.a.createElement(he.a,null,"Description"),r.a.createElement(he.a,{align:"center"},"Price"),r.a.createElement(he.a,{align:"center"},"Unit"),r.a.createElement(he.a,{align:"center"},"Qty."),r.a.createElement(he.a,{align:"center"},"Total"))),r.a.createElement(ge.a,null,e.line_items.map((function(a,n){return"product"===a.kind&&r.a.createElement(be.a,{key:"li".concat(n)},r.a.createElement(he.a,{align:"center"},r.a.createElement(Lt.a,{title:"remove line item"},r.a.createElement(E.a,{"aria-label":"delete",size:"small",onClick:function(e){return d(a)}},r.a.createElement(Oa.a,{fontSize:"inherit"})))),r.a.createElement(he.a,null,a.description),r.a.createElement(he.a,{align:"right"},r.a.createElement("div",null,a.data&&a.data.product&&"EA"===a.selected_unit&&a.data.product.u_price?xa(a.data.product.u_price):xa(a.data&&a.data.product?a.data.product.ws_price:a.price)),r.a.createElement("div",null,function(e){var t=[];return e.data&&e.data.product&&e.data.product.pk&&1!==e.data.product.pk&&t.push(e.data.product.pk),e.data&&e.data.product&&e.data.product.size&&t.push(e.data.product.size),t.join(" / ")}(a))),r.a.createElement(he.a,{align:"center"},a.data&&a.data.product&&a.data.product.u_price&&a.data.product.u_price!==a.data.product.ws_price?r.a.createElement(St.a,{value:a.selected_unit,onChange:function(t){return function(t,a){t.selected_unit=a,t.data&&t.data.product&&(t.price="CS"===a?+t.data.product.ws_price:+t.data.product.u_price),t.total=_a(t);var n=e.line_items.indexOf(t);e.onLineItemUpdated(n,t)}(a,t.target.value)},margin:"dense"},r.a.createElement(Fe.a,{value:"CS"},"Case"),r.a.createElement(Fe.a,{value:"EA"},"Each")):a.data&&a.data.product&&"CS"===a.data.product.unit_type?"Case":"Each"),r.a.createElement(he.a,{align:"right"},r.a.createElement(xe.a,{className:t.qtyinput,type:"number",InputLabelProps:{shrink:!0},margin:"dense",fullWidth:!0,value:a.quantity,onChange:function(e){return m(a,e.target.value)},inputProps:{min:"1",step:"1"}})),r.a.createElement(he.a,{align:"right"},xa(a.total)))})),r.a.createElement(be.a,null,r.a.createElement(he.a,{rowSpan:1,colSpan:3}),r.a.createElement(he.a,{align:"right"},"Subtotal"),r.a.createElement(he.a,{align:"center"},e.line_items&&e.line_items.length),r.a.createElement(he.a,{align:"right"},xa(a))),p.map((function(a,n){return r.a.createElement(be.a,{key:"li".concat(n)},r.a.createElement(he.a,{align:"center"},r.a.createElement(Lt.a,{title:"remove adjustment"},r.a.createElement(E.a,{"aria-label":"delete",size:"small",onClick:function(e){return d(a)}},r.a.createElement(Oa.a,{fontSize:"inherit"})))),r.a.createElement(he.a,{colSpan:2},r.a.createElement(xe.a,{type:"text",InputLabelProps:{shrink:!0},margin:"dense",fullWidth:!0,value:a.description,onChange:function(t){return function(t,a){t.description=a;var n=e.line_items.indexOf(t);e.onLineItemUpdated(n,t)}(a,t.target.value)}})),r.a.createElement(he.a,null,r.a.createElement(xe.a,{type:"number",margin:"dense",fullWidth:!0,value:a.price||a.total,onChange:function(t){return function(t,a){t.price=a,t.total=_a(t);var n=e.line_items.indexOf(t);e.onLineItemUpdated(n,t)}(a,t.target.value)},inputProps:{min:"-9999",max:"9999",step:"1"},InputProps:{startAdornment:r.a.createElement(Ca.a,{position:"start"},"$")}})),r.a.createElement(he.a,{align:"right"},r.a.createElement(xe.a,{className:t.qtyinput,type:"number",InputLabelProps:{shrink:!0},margin:"dense",fullWidth:!0,value:a.quantity,onChange:function(e){return m(a,e.target.value)},inputProps:{min:"1",step:"1"}})),r.a.createElement(he.a,{align:"right"},xa(a.total)))})),r.a.createElement(be.a,null,r.a.createElement(he.a,{rowSpan:1,colSpan:3}),r.a.createElement(he.a,{align:"right"},"Tax"),r.a.createElement(he.a,{align:"center"},$),r.a.createElement(he.a,{align:"right"},xa(l))),f.map((function(e,t){return r.a.createElement(be.a,{key:"li".concat(t)},r.a.createElement(he.a,{align:"center"},r.a.createElement(Lt.a,{title:"remove adjustment"},r.a.createElement(E.a,{"aria-label":"delete",size:"small",onClick:function(t){return d(e)}},r.a.createElement(Oa.a,{fontSize:"inherit"})))),r.a.createElement(he.a,{colSpan:4},e.description),r.a.createElement(he.a,{align:"right"},xa(e.total)))})),r.a.createElement(be.a,null,r.a.createElement(he.a,{rowSpan:1,colSpan:3}),r.a.createElement(he.a,{align:"right"},"Total"),r.a.createElement(he.a,{align:"right",colSpan:2},r.a.createElement("b",null,xa(o)))))))},Na=a(420),Aa=a(214);function za(e){var t=r.a.useState(!1),a=Object(s.a)(t,2),n=a[0],c=a[1],l=r.a.useState([]),o=Object(s.a)(l,2),i=o[0],u=o[1],m=r.a.useState(""),d=Object(s.a)(m,2),p=d[0],f=d[1],g=r.a.useState(n&&0===i.length),h=Object(s.a)(g,2),E=h[0],b=h[1];return r.a.useEffect((function(){var e=!0;if(E)return function(){var t,a;G.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,G.a.awrap(fetch("".concat(V,"/products"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({search:p})}));case 2:return t=n.sent,n.next=5,G.a.awrap(t.json());case 5:a=n.sent,e&&(u(a.data.map((function(e){return{name:"".concat(e.name," ").concat(e.description," ").concat(e.pk," ").concat(e.size," $").concat(e.ws_price," ").concat(e.u_price!==e.ws_price?"($".concat(e.u_price," EA)"):""),product:e}}))),b(!1));case 7:case"end":return n.stop()}}))}(),function(){e=!1}}),[E,p]),r.a.useEffect((function(){n||u([])}),[n]),r.a.createElement(Na.a,{id:"add-line-item-autocomplete",style:{width:"100%"},open:n,onOpen:function(){c(!0)},onClose:function(){c(!1)},getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onChange:function(t,a){return e.onItemSelected(a)},options:i,loading:E,freeSolo:!0,renderInput:function(e){return r.a.createElement(xe.a,Object.assign({},e,{label:"Product search",fullWidth:!0,variant:"outlined",value:p,onChange:function(e){var t;(t=e.target.value)&&t.length>2&&(f(t),b(!0))},InputProps:Object(Je.a)({},e.InputProps,{endAdornment:r.a.createElement(r.a.Fragment,null,E?r.a.createElement(Aa.a,{size:20}):null,e.InputProps.endAdornment)})}))}})}var Ra=localStorage&&localStorage.getItem("token");function La(e){var t=r.a.useState(!1),a=Object(s.a)(t,2),n=a[0],c=a[1],l=r.a.useState([]),o=Object(s.a)(l,2),i=o[0],u=o[1],m=r.a.useState(""),d=Object(s.a)(m,2),p=d[0],f=d[1],g=r.a.useState(n&&0===i.length),h=Object(s.a)(g,2),E=h[0],b=h[1];return r.a.useEffect((function(){var e=!0;if(E)return function(){var t,a;G.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,G.a.awrap(fetch("".concat(V,"/members"),{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Ra)},body:JSON.stringify({search:p})}));case 2:return t=n.sent,n.next=5,G.a.awrap(t.json());case 5:a=n.sent,e&&(u(a.data.map((function(e){return{name:"".concat(e.name," ").concat(e.User&&e.User.email?e.User.email:e.registration_email),member:e}}))),b(!1));case 7:case"end":return n.stop()}}))}(),function(){e=!1}}),[E,p]),r.a.useEffect((function(){n||u([])}),[n]),r.a.createElement(Na.a,{id:"add-line-item-autocomplete",style:{width:"100%"},open:n,onOpen:function(){c(!0)},onClose:function(){c(!1)},getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onChange:function(t,a){return e.onItemSelected(a)},options:i,loading:E,freeSolo:!0,renderInput:function(e){return r.a.createElement(xe.a,Object.assign({},e,{label:"Member search",fullWidth:!0,autoFocus:!0,variant:"outlined",value:p,onChange:function(e){var t;(t=e.target.value)&&t.length>2&&(f(t),b(!0))},InputProps:Object(Je.a)({},e.InputProps,{endAdornment:r.a.createElement(r.a.Fragment,null,E?r.a.createElement(Aa.a,{size:20}):null,e.InputProps.endAdornment)})}))}})}var Pa={id:"new",status:"new",payment_status:"balance_due",shipment_status:"backorder",total:0,item_count:0,subtotal:0,name:"",email:"",phone:"",address:"",notes:"",createdAt:"",updatedAt:"",OrderLineItems:[]},Fa=Object(k.a)((function(e){return Object(C.a)({root:{padding:e.spacing(2),maxWidth:"100vw",minHeight:"calc(100vh - 64px)"},form:{marginBottom:e.spacing(4)},formInput:{display:"block",marginBottom:e.spacing(2)},status:{marginBottom:e.spacing(2)},liHeader:{display:"inline-block",marginRight:e.spacing(2)},sticky:Object(va.a)({},e.breakpoints.up("md"),{position:"sticky",top:"72px"})})}));var Ba=Object(u.b)((function(e){return{userService:e.session.userService}}),void 0)(Object(d.h)((function(e){var t=Fa(),a=localStorage&&localStorage.getItem("token"),c=Object(n.useState)(""),l=Object(s.a)(c,2),o=l[0],i=l[1],u=Object(n.useState)(!0),m=Object(s.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(Pa),g=Object(s.a)(f,2),h=g[0],b=g[1],v=Object(n.useState)(!1),y=Object(s.a)(v,2),O=y[0],j=y[1],S=Object(n.useState)(!1),w=Object(s.a)(S,2),k=w[0],C=w[1],I=Object(n.useState)(!1),x=Object(s.a)(I,2),_=x[0],T=x[1],N=r.a.useState(!1),A=Object(s.a)(N,2),z=A[0],R=A[1],P=r.a.useState(""),F=Object(s.a)(P,2),B=F[0],W=F[1],M=Object(n.useState)(!0),D=Object(s.a)(M,2),q=D[0],H=D[1],U=Object(n.useState)(!1),J=Object(s.a)(U,2),G=J[0],K=J[1],Z=ka(o,p);Object(n.useEffect)((function(){if("loaded"===Z.status&&Z.payload){var e=Z.payload;e.Member&&e.Member.discount&&e.Member.discount>0&&K(!0),b(e)}}),[Z]);var ee=e.match.params.id;Object(n.useEffect)((function(){ee&&"new"!==ee&&i(ee)}),[ee]),Object(n.useEffect)((function(){if(h&&!h.UserId&&e.userService&&e.userService.user&&e.userService.user.id){var t=e.userService.user.id;t&&b((function(e){return Object(Je.a)({},e,{UserId:t})}))}}),[e.userService,h]),Object(n.useEffect)((function(){if(q&&h){if(h&&h.OrderLineItems&&G){var e=h.OrderLineItems.map((function(e){var t=!1;if(e.data&&e.data.product&&"CS"===e.selected_unit?t=e.data.product.ws_price!==e.data.product.ws_price_cost:e.data&&e.data.product&&"EA"===e.selected_unit&&(t=e.data.product.u_price!==e.data.product.u_price_cost),t&&e.data&&e.data.product){var a="CS"===e.selected_unit?parseFloat(e.data.product.ws_price_cost):parseFloat(e.data.product.u_price_cost);return+(e.total-a*e.quantity).toFixed(2)}return 0})).reduce((function(e,t){return e+t}),0);if(e>0){var t=-e.toFixed(2),a=h.OrderLineItems.filter((function(e){return"adjustment"===e.kind&&"member discount"===e.description}));if(a[0]){if(a[0].total!==t)ae(h.OrderLineItems.indexOf(a[0]),Object(Je.a)({},a[0],{price:t,total:t}))}else{var n={description:"member discount",quantity:1,price:t,total:t,kind:"adjustment"};b((function(e){return Object(Je.a)({},e,{OrderLineItems:[].concat(Object(Rt.a)(e.OrderLineItems),[n])})}))}}}H(!1)}else H(!1)}),[q,h,G]);var te=function(e,t){"clickaway"!==t&&R(!1)};function ae(e,t){b((function(a){var n=a.OrderLineItems;return n.splice(e,1,t),Object(Je.a)({},a,{OrderLineItems:n})}))}function ne(e){return h&&h[e]?h[e]:""}var re=!G||h&&0===h.OrderLineItems.filter((function(e){return"member discount"===e.description})).length;return r.a.createElement("div",{className:t.root},d?r.a.createElement(se,null):r.a.createElement(me.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"flex-start"},r.a.createElement(me.a,{item:!0,sm:12,md:4,className:t.sticky},_?r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Lt.a,{title:"close"},r.a.createElement(E.a,{"aria-label":"close",onClick:function(){return T(!1)}},r.a.createElement(Oa.a,{fontSize:"inherit"}))),r.a.createElement(La,{onItemSelected:function(e){if(e&&e.member){var t=e.member,a=t.id,n=t.name,r=t.phone,c=t.address,l=e.member.User&&e.member.User.email?e.member.User.email:e.member.registration_email;b((function(e){return Object(Je.a)({},e,{name:n||"",email:l||"",phone:r||"",address:c||"",MemberId:a})})),T(!1)}}})):r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:"54px"}},r.a.createElement("div",null,r.a.createElement(Lt.a,{title:"BACK TO ORDERS"},r.a.createElement(E.a,{"aria-label":"back to orders",onClick:function(){return e.history.push("/orders")}},r.a.createElement(Sa.a,null))),r.a.createElement("h2",{style:{display:"inline"}},o&&"new"!==o?r.a.createElement(r.a.Fragment,null,"EDIT ORDER ",r.a.createElement("i",null,"#",h.id)):"CREATE ORDER")),r.a.createElement("div",null,r.a.createElement(Lt.a,{title:"ADD USER DETAILS"},r.a.createElement(E.a,{"aria-label":"add user details",onClick:function(){return T(!0)}},r.a.createElement(L.a,null))))),"new"!==h.status&&"needs_review"!==h.status&&r.a.createElement(ue.a,{color:"error.main"},r.a.createElement(ve.a,{variant:"overline",display:"block"},"ohey!"),r.a.createElement(ve.a,{variant:"body1",display:"block",gutterBottom:!0},'this order status is not "new" or "needs review" so making changes might not be great...')),h.Member&&r.a.createElement(ue.a,{color:"info.main"},r.a.createElement(ve.a,{variant:"overline",display:"block",gutterBottom:!0},"Member has discount ",h.Member.discount)),r.a.createElement("form",{className:t.form,noValidate:!0,autoComplete:"off"},r.a.createElement(xe.a,{label:"name",type:"text",className:t.formInput,fullWidth:!0,value:h.name,onChange:function(e){e.persist(),b((function(t){return Object(Je.a)({},t,{name:e.target.value})}))}}),r.a.createElement(xe.a,{label:"email",type:"email",className:t.formInput,fullWidth:!0,value:h.email,onChange:function(e){e.persist(),b((function(t){return Object(Je.a)({},t,{email:e.target.value})}))}}),r.a.createElement(xe.a,{label:"phone",type:"phone",className:t.formInput,fullWidth:!0,value:h.phone,onChange:function(e){e.persist(),b((function(t){return Object(Je.a)({},t,{phone:e.target.value})}))}}),r.a.createElement(xe.a,{label:"address",type:"text",className:t.formInput,fullWidth:!0,value:h.address,onChange:function(e){e.persist(),b((function(t){return Object(Je.a)({},t,{address:e.target.value})}))}}),r.a.createElement(xe.a,{label:"notes",className:t.formInput,multiline:!0,rowsMax:"20",fullWidth:!0,value:h.notes,onChange:function(e){e.persist(),b((function(t){return Object(Je.a)({},t,{notes:e.target.value})}))}}),r.a.createElement(jt.a,{fullWidth:!0,className:t.status},r.a.createElement(Ot.a,{id:"order-status-select-label"},"status"),r.a.createElement(St.a,{labelId:"order-status-select-label",id:"order-status-select",value:ne("status"),onChange:function(e){b((function(t){return Object(Je.a)({},t,{status:e.target.value})}))}},Object.keys(Q).map((function(e){return r.a.createElement(Fe.a,{key:"os-sel-".concat(e),value:e},Q[e])})))),r.a.createElement(jt.a,{fullWidth:!0,className:t.status},r.a.createElement(Ot.a,{id:"payment-status-select-label"},"payment status"),r.a.createElement(St.a,{labelId:"payment-status-select-label",id:"payment-status-select",value:ne("payment_status"),onChange:function(e){b((function(t){return Object(Je.a)({},t,{payment_status:e.target.value})}))}},Object.keys(Y).map((function(e){return r.a.createElement(Fe.a,{key:"ps-sel-".concat(e),value:e},Y[e])})))),r.a.createElement(jt.a,{fullWidth:!0,className:t.status},r.a.createElement(Ot.a,{id:"shipment-status-select-label"},"shipment status"),r.a.createElement(St.a,{labelId:"shipment-status-select-label",id:"shipment-status-select",value:ne("shipment_status"),onChange:function(e){b((function(t){return Object(Je.a)({},t,{shipment_status:e.target.value})}))}},Object.keys(X).map((function(e){return r.a.createElement(Fe.a,{key:"ship-sel-".concat(e),value:e},X[e])}))))),r.a.createElement(_e.a,{variant:"contained",color:"primary",onClick:function(){j(!0);var t=o&&"new"!==o?"/order/update":"/order/create";fetch("".concat(V).concat(t),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify(h)}).then((function(e){return e.json()})).then((function(t){t.success&&(R(!0),W("Saved order!"),!t.order.id||o&&"new"!==o||e.history.replace("/orders/edit/".concat(t.order.id)))})).finally((function(){return j(!1)}))},disabled:O},"Save")),r.a.createElement(me.a,{item:!0,sm:12,md:8},r.a.createElement("div",null,k?r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(Lt.a,{title:"close"},r.a.createElement(E.a,{"aria-label":"close",onClick:function(){return C(!1)}},r.a.createElement(Oa.a,{fontSize:"inherit"}))),r.a.createElement(za,{onItemSelected:function(e){if(e){var t=e.product;if(e&&e.name&&t){var a={description:"".concat(t.name," ").concat(t.description),quantity:1,selected_unit:"CS",price:parseFloat(t.ws_price),total:parseFloat(t.ws_price),kind:"product",vendor:t.vendor,data:{product:t}};b((function(e){return Object(Je.a)({},e,{item_count:e.OrderLineItems.filter((function(e){return"product"===e.kind})).length+1,OrderLineItems:[].concat(Object(Rt.a)(e.OrderLineItems),[a])})})),H(!0)}}}})):r.a.createElement(r.a.Fragment,null,r.a.createElement(_e.a,{"aria-label":"add line items",size:"large",onClick:function(){return C(!0)}},r.a.createElement(De.a,null),"LINE ITEMS"),r.a.createElement(_e.a,{"aria-label":"add adjustment",size:"large",onClick:function(e){var t={description:"new adjustment",quantity:1,price:0,total:0,kind:"adjustment"};b((function(e){return Object(Je.a)({},e,{OrderLineItems:[].concat(Object(Rt.a)(e.OrderLineItems),[t])})}))}},r.a.createElement(De.a,null),"ADJUSTMENT"),re&&r.a.createElement(_e.a,{"aria-label":"add member discount",size:"large",onClick:function(){K(!0),H(!0)}},r.a.createElement(De.a,null),"MEMBER DISCOUNT"))),r.a.createElement(Ta,{line_items:h.OrderLineItems,onLineItemUpdated:function(e,t){ae(e,t),H(!0)},removeLineItem:function(e){if(e>-1){var t=h.OrderLineItems[e];"adjustment"===t.kind&&"member discount"===t.description&&K(!1)}b((function(t){var a=t.OrderLineItems;a.splice(e,1);var n=a.filter((function(e){return"product"===e.kind})).length;return Object(Je.a)({},t,{item_count:n,OrderLineItems:a})}))},onTaxesChange:function(e){console.log("onTaxesChange tax:",e),b((function(t){var a=t.OrderLineItems.filter((function(e){return"tax"!==e.kind}));return Object(Je.a)({},t,{OrderLineItems:[].concat(Object(Rt.a)(a),[{kind:"tax",description:"tax ".concat($),quantity:1,price:e,total:e}])})}))},onTotalChange:function(e){b((function(t){return Object(Je.a)({},t,{total:e})}))},onSubTotalChange:function(e){b((function(t){return Object(Je.a)({},t,{subtotal:e})}))}}))),r.a.createElement(qe.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:z,autoHideDuration:6e3,onClose:te,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},B),action:[r.a.createElement(E.a,{key:"close","aria-label":"close",onClick:te},r.a.createElement(Ue.a,null))]}))}))),Wa=Object(k.a)((function(e){return Object(C.a)({root:{padding:e.spacing(2),maxWidth:"100vw",minHeight:"100vh"}})}));var Ma=Object(d.h)((function(e){var t=Wa(),a=Object(n.createRef)(),c=localStorage&&localStorage.getItem("token"),l={icon:"add",tooltip:"add new member",isFreeAction:!0,onClick:function(){return e.history.push("/members/new")}},o={tooltip:"Remove Member",icon:"delete",onClick:function(e,t){var n;if((n=Array.isArray(t)?t:[t])&&0!==n.length){var r=n[0].id;window.confirm("Are you sure you want to delete this member?")&&fetch("".concat(V,"/member"),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify({id:r})}).then((function(e){return e.json()})).then((function(){return a.current&&a.current.onQueryChange()})).catch((function(e){return console.warn("members deleteAction caught err",e)}))}}},i={icon:"edit",tooltip:"edit member",onClick:function(t,a){var n;(n=Array.isArray(a)?a[0]:a).id&&e.history.push("/members/".concat(n.id))}};return r.a.createElement("div",{className:t.root},r.a.createElement(ft.a,{tableRef:a,columns:[{title:"created",field:"createdAt",type:"datetime",filtering:!1,render:function(e){return e.createdAt&&new Date(e.createdAt).toLocaleString()}},{title:"registration email",field:"registration_email",type:"string",filtering:!1},{title:"name",field:"name",type:"string",filtering:!1},{title:"phone",field:"phone",type:"string",filtering:!1},{title:"address",field:"address",type:"string",filtering:!1},{title:"discount",field:"discount",type:"string"},{title:"discount type",field:"discount_type",type:"string"},{title:"fees paid",field:"fees_paid",type:"string"},{title:"store credit",field:"store_credit",type:"string"},{title:"shares",field:"shares",type:"string"},{title:"type",field:"member_type",type:"string"},{title:"updated",field:"updatedAt",type:"datetime",hidden:!0},{title:"id",field:"id",type:"string",hidden:!0}],data:function(e){return new Promise((function(t,a){fetch("".concat(V,"/members"),{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){return console.warn(e),t({data:[],page:0,totalCount:0})}))}))},title:"Members",options:{headerStyle:{position:"sticky",top:0},maxBodyHeight:"calc(100vh - 121px - 28px)",pageSize:50,pageSizeOptions:[50,100,500],debounceInterval:750,filtering:!0,search:!0,emptyRowsWhenPaging:!1},actions:[l,o,i]}))})),Da=localStorage&&localStorage.getItem("token"),qa={id:"new",registration_email:"",name:"",phone:"",address:"",discount:0,discount_type:"",fees_paid:0,store_credit:0,shares:0,member_type:"",data:{}},Ha=Object(k.a)((function(e){var t;return Object(C.a)({root:{margin:e.spacing(2),padding:e.spacing(2)},gridItem:{margin:e.spacing(2,0)},sticky:(t={},Object(va.a)(t,e.breakpoints.up("sm"),{position:"sticky",top:"0"}),Object(va.a)(t,"zIndex",1),Object(va.a)(t,"backgroundColor",e.palette.background.paper),t)})}));var Ua=Object(d.h)((function(e){var t=Ha(),a=Object(n.useState)(!0),c=Object(s.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(!1),u=Object(s.a)(i,2),m=u[0],d=u[1],p=Object(n.useState)(""),f=Object(s.a)(p,2),g=f[0],h=f[1],b=Object(n.useState)(""),v=Object(s.a)(b,2),y=v[0],O=v[1],j=e.match.params.id,S=Object(n.useState)(qa),w=Object(s.a)(S,2),k=w[0],C=w[1];return Object(n.useEffect)((function(){j&&"undefined"!==j&&("new"===j?(C(qa),o(!1)):fetch("".concat(V,"/members"),{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Da)},body:JSON.stringify({filters:[{column:{field:"id"},value:j}]})}).then((function(e){return e.json()})).then((function(e){C(e.data[0])})).catch((function(e){return C(qa)})).finally((function(){return o(!1)})))}),[j]),r.a.createElement(de.a,{className:t.root},l?r.a.createElement(se,null):r.a.createElement(me.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"flex-start"},r.a.createElement(me.a,{item:!0,sm:6},r.a.createElement("div",{style:{display:"flex",alignItems:"center",minHeight:"54px"},className:t.sticky},r.a.createElement(Lt.a,{title:"BACK TO MEMBERS"},r.a.createElement(E.a,{"aria-label":"back to members",onClick:function(){return e.history.push("/members")}},r.a.createElement(Sa.a,null))),r.a.createElement("h2",null,"new"===j?"Create":"Edit"," Member")),r.a.createElement(xe.a,{label:"email",fullWidth:!0,value:k.registration_email,className:t.gridItem,onChange:function(e){e.persist(),C((function(t){return Object(Je.a)({},t,{registration_email:e.target.value})}))}}),r.a.createElement(xe.a,{label:"name",fullWidth:!0,value:k.name,className:t.gridItem,onChange:function(e){e.persist(),C((function(t){return Object(Je.a)({},t,{name:e.target.value})}))}}),r.a.createElement(xe.a,{label:"phone",fullWidth:!0,value:k.phone,className:t.gridItem,onChange:function(e){e.persist(),C((function(t){return Object(Je.a)({},t,{phone:e.target.value})}))}}),r.a.createElement(xe.a,{label:"address",fullWidth:!0,value:k.address,className:t.gridItem,onChange:function(e){e.persist(),C((function(t){return Object(Je.a)({},t,{address:e.target.value})}))}}),r.a.createElement(xe.a,{label:"discount",fullWidth:!0,value:k.discount,type:"number",className:t.gridItem,onChange:function(e){e.persist(),C((function(t){return Object(Je.a)({},t,{discount:parseFloat(e.target.value)})}))}}),r.a.createElement(xe.a,{label:"discount type",fullWidth:!0,value:k.discount_type,className:t.gridItem,onChange:function(e){e.persist(),C((function(t){return Object(Je.a)({},t,{discount_type:e.target.value})}))}}),r.a.createElement(xe.a,{label:"fees paid",fullWidth:!0,value:k.fees_paid,type:"number",className:t.gridItem,onChange:function(e){e.persist(),C((function(t){return Object(Je.a)({},t,{fees_paid:parseFloat(e.target.value)})}))}}),r.a.createElement(xe.a,{label:"store credit",fullWidth:!0,value:k.store_credit,className:t.gridItem,type:"number",onChange:function(e){e.persist(),C((function(t){return Object(Je.a)({},t,{store_credit:parseFloat(e.target.value)})}))}}),r.a.createElement(xe.a,{label:"shares",fullWidth:!0,value:k.shares,className:t.gridItem,type:"number",onChange:function(e){e.persist(),C((function(t){return Object(Je.a)({},t,{shares:parseFloat(e.target.value)})}))}}),r.a.createElement(jt.a,{fullWidth:!0,className:t.gridItem},r.a.createElement(Ot.a,{id:"prev-import-tag-select-label"},"Type"),r.a.createElement(St.a,{labelId:"prev-import-tag-select-label",id:"prev-import-tag-select",value:k.member_type,onChange:function(e){return e.target&&e.target.value&&C((function(t){return Object(Je.a)({},t,{member_type:e.target.value})}))}},r.a.createElement(Fe.a,{value:"consumer-owners"},"consumer-owner"),r.a.createElement(Fe.a,{value:"worker-owners"},"worker-owner"),r.a.createElement(Fe.a,{value:"producer-owners"},"producer owner"))),r.a.createElement("div",{className:t.gridItem},r.a.createElement(_e.a,{disabled:m,onClick:function(){return function(){h(""),O(""),d(!0);var e="new"===j?"/create":"/update";fetch("".concat(V,"/member").concat(e),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Da)},body:JSON.stringify({member:k})}).then((function(e){return e.json()})).then((function(e){e.error?h(e.msg):O(e.msg)})).catch((function(e){console.warn("fetch caugher err:",e),h(e.toString())})).finally((function(){return d(!1)}))}()},size:"large"},"new"===j?"CREATE":"SAVE"))),r.a.createElement(me.a,{item:!0,sm:6,className:t.sticky},m&&r.a.createElement(se,null),g&&r.a.createElement("div",{className:t.gridItem},r.a.createElement("h3",null,"Response Error!"),r.a.createElement("p",null,g)),y&&r.a.createElement("div",{className:t.gridItem},r.a.createElement("h3",null,"Response"),r.a.createElement("p",null,y)))))})),Ja=Object(k.a)((function(e){return Object(C.a)({root:{minHeight:"100vh"},nav:{background:e.palette.primary.main,zIndex:e.zIndex.drawer+1,display:"flex",height:"48px",alignItems:"center",paddingLeft:"10px",position:"fixed",top:0,left:0},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},version:{fontStyle:"italic",fontSize:"0.8em",flexGrow:1,alignSelf:"center",flexDirection:"column",display:"flex",justifyContent:"flex-end"},content:{marginLeft:"16px"}})})),Ga=Object(u.b)((function(e){return{userService:e.session.userService,preferencesService:e.preferences.preferencesService}}),(function(e){return{checkSession:function(){return e((function(e){return G.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){e(ae(!0));var a=localStorage&&localStorage.getItem("token");if(!a)return e(ae(!1)),e(ee({email:void 0,token:void 0})),void t();fetch("".concat(V,"/check_session"),{headers:{Authorization:"Bearer ".concat(a)}}).then((function(e){return e.json()})).then((function(t){"ok"===t.msg&&t.user?e(ee(t.user)):e(ee(ne))})).catch((function(t){console.warn("check_session caught err:",t),e(ee(ne))})).finally((function(){e(ae(!1)),t()}))})));case 1:case"end":return t.stop()}}))}))},getPreferences:function(){return e((function(e){return G.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){e(oe(!0));var n=localStorage&&localStorage.getItem("preferences");e(le(n?JSON.parse(n):ce)),e(oe(!1)),t()})));case 1:case"end":return t.stop()}}))}))},logout:function(){return e(re())}}}))((function(e){var t=Object(n.useState)(!0),a=Object(s.a)(t,2),c=a[0],l=a[1],i=e.checkSession,u=e.userService,b=e.getPreferences;Object(n.useEffect)((function(){b()}),[b]),Object(n.useEffect)((function(){i()}),[i]),Object(n.useEffect)((function(){!u.isFetching&&u.user&&l(!1),x(u.isFetching&&!!u.user)}),[u]);var S=Ja(),k=r.a.useState(!0),C=Object(s.a)(k,2),I=C[0],x=C[1];return r.a.createElement(m.a,null,r.a.createElement("div",{className:S.root},r.a.createElement(o.a,null),r.a.createElement("div",{className:S.nav},u.user&&"admin"===u.user.role?r.a.createElement(E.a,{edge:"start","aria-label":"open drawer",onClick:function(){return x(!0)}},r.a.createElement(v.a,null)):r.a.createElement(We,null)),u&&u.user&&u.user.email&&r.a.createElement(f.a,{classes:{paper:Object(p.a)(S.drawerPaper)},onClose:function(){return x(!1)},open:I},r.a.createElement(g.a,{onClick:function(){return x(!1)}},U),r.a.createElement(h.a,null),r.a.createElement(y.a,{button:!0,onClick:function(){return e.logout()}},r.a.createElement(O.a,null,r.a.createElement(w.a,null)),r.a.createElement(j.a,{primary:"log out"})),r.a.createElement("div",{className:S.version},r.a.createElement("span",null,Z))),r.a.createElement("main",{className:S.content},c?r.a.createElement(se,null):r.a.createElement(d.d,null,r.a.createElement(d.b,{path:"/login",component:Ne}),r.a.createElement(d.b,{path:"/register",component:ze}),r.a.createElement(Le,{userService:u,path:"/products",component:fa,exact:!0}),r.a.createElement(Le,{userService:u,path:"/products/import",component:ba}),r.a.createElement(Le,{userService:u,path:"/orders",exact:!0,component:bt}),r.a.createElement(Le,{userService:u,path:"/orders/edit/:id",component:Ba}),r.a.createElement(Le,{userService:u,path:"/orders/create",component:Ba}),r.a.createElement(Le,{userService:u,path:"/wholesaleorders",component:Yt}),r.a.createElement(Le,{userService:u,path:"/users",component:ua}),r.a.createElement(Le,{userService:u,path:"/members",component:Ma,exact:!0}),r.a.createElement(Le,{userService:u,path:"/members/:id",component:Ua}),r.a.createElement(Le,{userService:u,path:"/pages",component:dt}),r.a.createElement(Le,{userService:u,path:"/",component:Ie})))))})),Va=a(185),Ka=a.n(Va),$a=a(250),Qa=Object($a.a)({palette:{type:"dark",primary:{main:"#556cd6"},secondary:{main:"#FF4081"},error:{main:Ka.a.A400}}}),Ya=a(38),Xa=a(249),Za=Object(Ya.c)({userService:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET":return Object(Je.a)({},e,{user:t.user,error:void 0});case"SET_FETCHING":return Object(Je.a)({},e,{isFetching:t.isFetching});case"SET_ERROR":return Object(Je.a)({},e,{user:void 0,error:t.error})}return e}}),en=Object(Ya.c)({preferencesService:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PREFERENCES":return Object(Je.a)({},e,{preferences:t.preferences,error:void 0});case"SET_FETCHING_PREFERENCES":return Object(Je.a)({},e,{isFetching:t.isFetching});case"SET_ERROR_PREFERENCES":return Object(Je.a)({},e,{preferences:void 0,error:t.error})}return e}}),tn=Object(Ya.e)(Object(Ya.c)({session:Za,preferences:en}),Object(Ya.a)(Xa.a));l.a.render(r.a.createElement(u.a,{store:tn},r.a.createElement(i.a,{theme:Qa},r.a.createElement(o.a,null),r.a.createElement(Ga,null))),document.querySelector("#root"))}},[[269,1,2]]]);
//# sourceMappingURL=main.cd2ca4a0.chunk.js.map