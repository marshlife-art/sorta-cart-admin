{"version":3,"sources":["listItems.tsx","constants.ts","redux/session/actions.ts","redux/preferences/actions.ts","Loading.tsx","dashboard/Title.tsx","dashboard/Orders.tsx","dashboard/Dashboard.tsx","auth/Login.tsx","auth/Register.tsx","auth/ProtectedRoute.tsx","auth/UserMenu.tsx","pages/usePageService.ts","pages/EditPageMenu.tsx","pages/EditPage.tsx","pages/Pages.tsx","orders/OrderDetailPanel.tsx","orders/Orders.tsx","wholesaleorders/useWholesaleOrderService.ts","wholesaleorders/EditMenu.tsx","wholesaleorders/WholesaleOrderLineItems.tsx","wholesaleorders/EditWholesaleOrder.tsx","wholesaleorders/AddWholesaleOrderLineItems.tsx","wholesaleorders/WholesaleOrders.tsx","users/NewUserModal.tsx","users/UserRolesMenu.tsx","users/Users.tsx","products/Products.tsx","products/ImportProducts.tsx","orders/useOrderService.ts","orders/OrderLineItems.tsx","orders/LineItemAutocomplete.tsx","orders/MemberAutocomplete.tsx","orders/EditOrder.tsx","members/Members.tsx","members/EditMember.tsx","App.tsx","theme.tsx","redux/session/reducers.ts","redux/preferences/reducers.ts","redux/index.ts","index.tsx"],"names":["mainListItems","ListItem","button","component","Link","to","ListItemIcon","ListItemText","primary","ListSubheader","inset","API_HOST","TAX_RATE","TAX_RATE_STRING","toFixed","ORDER_STATUSES","new","needs_review","pending","complete","void","archived","PAYMENT_STATUSES","balance_due","paid","credit_owed","failed","SHIPMENT_STATUSES","backorder","ready","shipped","partial","canceled","APP_VERSION","process","npm_package_version","require","version","set","user","type","setError","error","isFetching","NULL_USER","id","undefined","email","token","logout","dispatch","a","async","Promise","resolve","localStorage","removeItem","DEFAULT_PREFERENCES","dark_mode","preferences","Loading","Container","fixed","Box","pt","style","textAlign","Title","props","Typography","variant","color","gutterBottom","children","createData","date","name","shipTo","paymentMethod","amount","rows","preventDefault","event","useStyles","makeStyles","theme","seeMore","marginTop","spacing","Orders","classes","Fragment","Table","size","TableHead","TableRow","TableCell","align","TableBody","map","row","key","className","href","onClick","root","padding","paper","display","overflow","flexDirection","fixedHeight","height","Dashboard","fixedHeightPaper","clsx","Grid","container","item","xs","md","lg","Paper","form","width","minHeight","justifyContent","title","alignItems","submit","margin","connect","states","ownProps","userService","session","login","password","fetch","method","headers","body","JSON","stringify","then","response","json","msg","setItem","reason","message","catch","e","console","log","finally","withRouter","history","useState","useEffect","role","push","maxWidth","onSubmit","target","currentTarget","emailEl","elements","namedItem","passwordEl","value","length","TextField","label","autoFocus","fullWidth","required","Button","disabled","register","regKey","regKeyParam","URLSearchParams","useLocation","search","get","passwordConfirmEl","regKeyEl","ProtectedRoute","Component","rest","render","isAdmin","pathname","state","from","location","React","anchorEl","setAnchorEl","handleClose","IconButton","aria-controls","aria-haspopup","Badge","badgeContent","keepMounted","open","Boolean","onClose","MenuItem","getItem","usePageService","slug","setLoading","status","result","setResult","payload","warn","useAllPagesService","reloadPages","setReloadPages","Authorization","usePageSaveService","page","doSave","setDoSave","setSnackMsg","setSnackOpen","StyledMenu","elevation","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","StyledMenuItem","withStyles","backgroundColor","palette","main","common","white","EditPageMenu","ButtonGroup","aria-label","startIcon","onSaveBtnClick","window","confirm","onDeleteBtnClick","fontSize","createStyles","pageName","marginBottom","marginRight","pageSlug","setPageSlug","content","setPage","loading","pageService","snackOpen","snackMsg","handleSnackClose","match","params","onChange","prevPage","replace","multiline","rowsMax","Snackbar","autoHideDuration","ContentProps","action","titleText","flexGrow","text","secondary","Default","pages","setPages","allPages","direction","justify","sm","List","Divider","idx","path","exact","EditPage","borderLeft","divider","gridHeading","gridItem","paddingBottom","paddingLeft","paddingRight","lastUpdated","marginLeft","OrderDetailPanel","order","line_items","OrderLineItems","adjustments","filter","li","kind","item_count","scope","vendor","description","data","product","unf","price","selected_unit","quantity","total","colSpan","subtotal","phone","address","User","Member","notes","createdAt","updatedAt","Date","toLocaleString","tableRef","createRef","searchExpanded","setSearchExpanded","isSelecting","setIsSelecting","searchAction","icon","tooltip","isFreeAction","newOrderAction","printAction","orderIds","wOpen","document","innerHTML","err","editAction","actions","setActions","columns","field","filtering","lookup","hidden","query","reject","totalCount","detailPanel","onRowClick","rowData","togglePanel","options","headerStyle","position","top","maxBodyHeight","pageSize","pageSizeOptions","debounceInterval","emptyRowsWhenPaging","selection","onSelectionChange","blankWholesaleOrder","payment_status","shipment_status","useWholesaleOrderService","reload","setReload","useAllWholesaleOrdersService","reloadWholesaleOrders","setReloadWholesaleOrders","useWholesaleOrderSaveService","wholesaleOrder","EditMenu","onProductsExportToCsv","liTable","deleteBtn","minWidth","groupedRow","background","default","groupedRowTotals","typography","h6","lineItems","lineItemData","setLineItemData","groupedLineItems","prevData","productTotal","adjustmentTotal","orderTotal","forEach","acc","qty","pk","liTotal","parseFloat","ws_price_cost","qtySum","totalSum","Object","values","reduce","v","Math","abs","u_price_cost","round","Tooltip","ids","removeLineItem","upc_code","category","sub_category","ws_price","u_price","import_tag","OrderId","keys","editMenu","wholesaleOrderId","setWholesaleOrderId","setWholesaleOrder","wholesaleOrderService","valueFor","prevOrder","FormControl","InputLabel","Select","labelId","setReloadOrders","onExportToCsv","Accept","responseText","filename","navigator","msSaveBlob","blobObject","Blob","anchor","createElement","download","URL","createObjectURL","encodeURIComponent","createEvent","initEvent","dispatchEvent","click","saveStreamCSV","AddWholesaleOrderLineItems","needsRefresh","setNeedsRefresh","refreshTable","useCallback","current","onQueryChange","selectedLineItems","setSelectedLineItems","addAction","handleWholesaleOrderMenuOpen","Array","isArray","wholesaleorderLookup","setWholesaleOrderLookup","toLocaleDateString","wholesaleorderMenuAnchorEl","setWholesaleOrderMenuAnchorEl","handleWholesaleOrderMenuClose","handleWholesaleOrderSelect","filterPlaceholder","wholesaleorder","ExpansionPanel","border","boxShadow","borderBottom","expanded","MuiExpansionPanel","ExpansionPanelSummary","MuiExpansionPanelSummary","ExpansionPanelDetails","MuiExpansionPanelDetails","paperNav","list","selectedListItem","noOrdersMsg","wholesaleOrders","setWholesaleOrders","reloadOrders","selectedStatus","setSelectedStatus","allWholesaleOrders","split","reverse","isNaN","parseInt","square","defaultExpanded","loadOrdersForStatus","expandIcon","modal","shadows","ROLES","NewUserModal","setEmail","setRole","setDiabled","includes","Modal","aria-labelledby","aria-describedby","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","placeholder","handleRefresh","UserRolesMenu","handleRoleChange","resp","newUserModalOpen","setNewUserModalOpen","newUserAction","deleteAction","alert","PROPERTY_MAP","c","d","f","g","k","l","m","og","r","w","ft","n","s","y","1","2","3","Products","p","setCategoryLookup","categoryLookup","setSubCategoryLookup","subCategoryLookup","setVendorLookup","vendorLookup","CS","EA","codes","code","Chip","ImportProducts","setVendor","importTag","setImportTag","prevImportTag","setPrevImportTag","markup","setMarkup","formData","setFormData","setResponse","setImportTagsLookup","importTagsLookup","vendorMenuAnchorEl","setVendorMenuAnchorEl","handleVendorMenuClose","helperText","handleVendorSelect","tag","FormHelperText","inputProps","min","max","step","accept","files","FormData","append","delete","toString","useOrderService","overflowX","table","borderCollapse","qtyinput","usdFormat","num","line_item","orderSubtotal","sum","i","orderAdjustmentsTotal","items","adjustmentsTotal","orderTaxes","onTaxesChange","onTotalChange","onSubTotalChange","handleQtyChange","indexOf","onLineItemUpdated","payments","pksize","join","liPkSize","unit","handleUnitChange","unit_type","InputLabelProps","shrink","rowSpan","handleDescriptionChange","handlePriceChange","InputProps","startAdornment","InputAdornment","LineItemAutocomplete","setOpen","setOptions","q","setQ","active","products","Autocomplete","onOpen","getOptionSelected","option","getOptionLabel","onItemSelected","freeSolo","renderInput","endAdornment","CircularProgress","MemberAutocomplete","members","registration_email","member","blankOrder","formInput","liHeader","sticky","breakpoints","up","orderId","setOrderId","setOrder","saving","setSaving","showLiAutocomplete","setShowLiAutocomplete","showMemberAutocomplete","setShowMemberAutocomplete","needToCheckForDiscounts","setNeedToCheckForDiscounts","canApplyMemberDiscount","setCanApplyMemberDiscount","orderService","_order","discount","pOrderId","UserId","discountAmt","canDiscount","discountPrice","discounts","updateLineItem","adjustment","orderLineItems","splice","shouldShowAddMemberDiscount","MemberId","noValidate","autoComplete","persist","success","lineItem","tax","notTaxLineItems","newMemberAction","blankMember","discount_type","fees_paid","store_credit","shares","member_type","loadingMember","setLoadingMember","memberId","setMember","filters","column","prevMember","submitData","nav","zIndex","drawer","left","flexShrink","drawerPaper","fontStyle","alignSelf","preferencesService","checkSession","getPreferences","rject","parse","CssBaseline","edge","Drawer","Login","Register","EditOrder","WholesaleOrders","Users","Members","EditMember","Pages","createMuiTheme","red","A400","combineReducers","createStore","applyMiddleware","thunk","ReactDOM","store","ThemeProvider","querySelector"],"mappings":"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","file":"static/js/main.e25f8060.chunk.js","sourcesContent":["import React from 'react'\nimport { Link } from 'react-router-dom'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport ListSubheader from '@material-ui/core/ListSubheader'\nimport DashboardIcon from '@material-ui/icons/Dashboard'\nimport ViewListIcon from '@material-ui/icons/ViewList'\nimport ShoppingCartIcon from '@material-ui/icons/ShoppingCart'\nimport TagFacesIcon from '@material-ui/icons/TagFaces'\nimport PeopleIcon from '@material-ui/icons/People'\nimport LayersIcon from '@material-ui/icons/Layers'\nimport AssignmentIcon from '@material-ui/icons/Assignment'\nimport LocalShippingIcon from '@material-ui/icons/LocalShipping'\nimport OpenInBrowserIcon from '@material-ui/icons/OpenInBrowser'\n\nexport const mainListItems = (\n  <div>\n    <ListItem button component={Link} to=\"/\">\n      <ListItemIcon>\n        <DashboardIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Dashboard\" />\n    </ListItem>\n    <ListItem button component={Link} to=\"/products\">\n      <ListItemIcon>\n        <ViewListIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Products\" />\n    </ListItem>\n    <ListItem button component={Link} to=\"/products/import\">\n      <ListItemIcon>\n        <OpenInBrowserIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Import Products\" />\n    </ListItem>\n    <ListItem button component={Link} to=\"/orders\">\n      <ListItemIcon>\n        <ShoppingCartIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Orders\" />\n    </ListItem>\n    <ListItem button component={Link} to=\"/wholesaleorders\">\n      <ListItemIcon>\n        <LocalShippingIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Wholesale Orders\" />\n    </ListItem>\n    <ListItem button component={Link} to=\"/users\">\n      <ListItemIcon>\n        <TagFacesIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Users\" />\n    </ListItem>\n    <ListItem button component={Link} to=\"/members\">\n      <ListItemIcon>\n        <PeopleIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Members\" />\n    </ListItem>\n    <ListItem button component={Link} to=\"/pages\">\n      <ListItemIcon>\n        <LayersIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Pages\" />\n    </ListItem>\n  </div>\n)\n\nexport const secondaryListItems = (\n  <div>\n    <ListSubheader inset>Saved reports</ListSubheader>\n    <ListItem button>\n      <ListItemIcon>\n        <AssignmentIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Current month\" />\n    </ListItem>\n    <ListItem button>\n      <ListItemIcon>\n        <AssignmentIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Last quarter\" />\n    </ListItem>\n    <ListItem button>\n      <ListItemIcon>\n        <AssignmentIcon />\n      </ListItemIcon>\n      <ListItemText primary=\"Year-end sale\" />\n    </ListItem>\n  </div>\n)\n","import { OrderStatus, PaymentStatus, ShipmentStatus } from './types/Order'\n\nexport const API_HOST =\n  process.env.NODE_ENV === 'production'\n    ? 'https://api.marshcoop.org'\n    : 'http://localhost:3000'\n\nexport const TAX_RATE = 0.06175\nexport const TAX_RATE_STRING = `${(TAX_RATE * 100).toFixed(3)}%`\n\ntype OrderStatusLookup = { [key in OrderStatus]: string }\nexport const ORDER_STATUSES: OrderStatusLookup = {\n  new: 'new',\n  needs_review: 'needs review',\n  pending: 'pending',\n  complete: 'complete',\n  void: 'void',\n  archived: 'archived'\n}\n\ntype OrderPaymentStatusLookup = { [key in PaymentStatus]: string }\nexport const PAYMENT_STATUSES: OrderPaymentStatusLookup = {\n  balance_due: 'balance due',\n  paid: 'paid',\n  credit_owed: 'credit owed',\n  failed: 'failed',\n  void: 'void'\n}\n\ntype OrderShipmentStatusLookup = { [key in ShipmentStatus]: string }\nexport const SHIPMENT_STATUSES: OrderShipmentStatusLookup = {\n  backorder: 'backorder',\n  pending: 'pending',\n  ready: 'ready',\n  shipped: 'shipped',\n  partial: 'partial',\n  canceled: 'canceled'\n}\n\nexport const APP_VERSION = `v${process.env.npm_package_version ||\n  require('../package.json').version} made with  in NYC`\n","import { ThunkAction, ThunkDispatch } from 'redux-thunk'\nimport { AnyAction } from 'redux'\n\nimport { User, LoginError } from '../../types/User'\nimport { API_HOST } from '../../constants'\n\nexport interface SetAction {\n  type: 'SET'\n  user: User\n}\nexport interface SetFetcing {\n  type: 'SET_FETCHING'\n  isFetching: boolean\n}\nexport interface SetError {\n  type: 'SET_ERROR'\n  error: LoginError\n}\n\nexport type Action = SetAction | SetFetcing | SetError\n\nexport const set = (user: User): SetAction => {\n  return { type: 'SET', user }\n}\nexport const setError = (error: LoginError): SetError => {\n  return { type: 'SET_ERROR', error }\n}\nexport const isFetching = (isFetching: boolean): SetFetcing => {\n  return { type: 'SET_FETCHING', isFetching }\n}\n\nconst NULL_USER: User = {\n  id: undefined,\n  email: undefined,\n  token: undefined\n}\n\nexport const checkSession = (): ThunkAction<\n  Promise<void>,\n  {},\n  {},\n  AnyAction\n> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>(resolve => {\n      dispatch(isFetching(true))\n\n      const token = localStorage && localStorage.getItem('token')\n\n      if (!token) {\n        // reject('no token')\n        dispatch(isFetching(false))\n        dispatch(set({ email: undefined, token: undefined }))\n        resolve()\n        return\n      }\n\n      fetch(`${API_HOST}/check_session`, {\n        headers: { Authorization: `Bearer ${token}` }\n      })\n        .then(response => response.json())\n        .then(response => {\n          // console.log('check_session', response)\n          if (response.msg === 'ok' && response.user) {\n            dispatch(set(response.user))\n          } else {\n            dispatch(set(NULL_USER))\n          }\n        })\n        .catch(err => {\n          console.warn('check_session caught err:', err)\n          // hmm, maybe the API is just down? ...is it really necessary to NULL the user?\n          dispatch(set(NULL_USER))\n        })\n        .finally(() => {\n          dispatch(isFetching(false))\n          resolve()\n        })\n    })\n  }\n}\n\nexport const register = (\n  regKey: string,\n  password: string\n): ThunkAction<Promise<void>, {}, {}, AnyAction> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>(resolve => {\n      dispatch(isFetching(true))\n\n      fetch(`${API_HOST}/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ regKey, password })\n      })\n        .then(response => response.json())\n        .then(response => {\n          // console.log('[session/actions] user login', response)\n          if (response.msg === 'ok' && response.user && response.user.token) {\n            localStorage && localStorage.setItem('token', response.user.token)\n            dispatch(set(response.user))\n          } else {\n            dispatch(setError({ error: 'error', reason: response.message }))\n          }\n        })\n        .catch(e => {\n          console.log('register error:', e)\n          dispatch(\n            setError({\n              error: 'error',\n              reason: 'unable to register right now :('\n            })\n          )\n        })\n        .finally(() => {\n          dispatch(isFetching(false))\n          resolve()\n        })\n    })\n  }\n}\n\nexport const login = (\n  email: string,\n  password: string\n): ThunkAction<Promise<void>, {}, {}, AnyAction> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>(resolve => {\n      dispatch(isFetching(true))\n\n      fetch(`${API_HOST}/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ email, password })\n      })\n        .then(response => response.json())\n        .then(response => {\n          // console.log('[session/actions] user login', response)\n          if (response.msg === 'ok' && response.user && response.user.token) {\n            localStorage && localStorage.setItem('token', response.user.token)\n            dispatch(set(response.user))\n          } else {\n            dispatch(setError({ error: 'error', reason: response.message }))\n          }\n        })\n        .catch(e => {\n          console.log('login error:', e)\n          dispatch(\n            setError({ error: 'error', reason: 'unable to login right now :(' })\n          )\n        })\n        .finally(() => {\n          dispatch(isFetching(false))\n          resolve()\n        })\n    })\n  }\n}\n\nexport const logout = (): ThunkAction<Promise<void>, {}, {}, AnyAction> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>(resolve => {\n      dispatch(isFetching(true))\n      localStorage && localStorage.removeItem('token')\n      dispatch(set(NULL_USER))\n      dispatch(isFetching(false))\n      resolve()\n    })\n  }\n}\n","import { ThunkAction, ThunkDispatch } from 'redux-thunk'\nimport { AnyAction } from 'redux'\n\nimport { Preferences, PreferencesError } from '../../types/Preferences'\n\nconst DEFAULT_PREFERENCES: Preferences = {\n  dark_mode: 'false'\n}\n\nexport interface SetAction {\n  type: 'SET_PREFERENCES'\n  preferences: Preferences\n}\nexport interface SetFetcing {\n  type: 'SET_FETCHING_PREFERENCES'\n  isFetching: boolean\n}\nexport interface SetError {\n  type: 'SET_ERROR_PREFERENCES'\n  error: PreferencesError\n}\n\nexport type Action = SetAction | SetFetcing | SetError\n\nexport const set = (preferences: Preferences): SetAction => {\n  return { type: 'SET_PREFERENCES', preferences }\n}\nexport const setError = (error: PreferencesError): SetError => {\n  return { type: 'SET_ERROR_PREFERENCES', error }\n}\nexport const isFetching = (isFetching: boolean): SetFetcing => {\n  return { type: 'SET_FETCHING_PREFERENCES', isFetching }\n}\n\nexport const getPreferences = (): ThunkAction<\n  Promise<void>,\n  {},\n  {},\n  AnyAction\n> => {\n  return async (dispatch: ThunkDispatch<{}, {}, AnyAction>): Promise<void> => {\n    return new Promise<void>((resolve, rject) => {\n      dispatch(isFetching(true))\n\n      const preferences = localStorage && localStorage.getItem('preferences')\n\n      if (!preferences) {\n        dispatch(set(DEFAULT_PREFERENCES))\n      } else {\n        dispatch(set(JSON.parse(preferences)))\n      }\n      dispatch(isFetching(false))\n      resolve()\n    })\n  }\n}\n","import React from 'react'\nimport { Container } from '@material-ui/core'\nimport Box from '@material-ui/core/Box'\n\nexport default function Loading() {\n  return (\n    <Container fixed>\n      <Box pt={4} style={{ textAlign: 'center' }}>\n        L O A D I N G . . .\n      </Box>\n    </Container>\n  )\n}\n","import React from 'react'\nimport Typography from '@material-ui/core/Typography'\n\nexport default function Title(props: { children: React.ReactNode }) {\n  return (\n    <Typography component=\"h2\" variant=\"h6\" color=\"primary\" gutterBottom>\n      {props.children}\n    </Typography>\n  )\n}\n","import React from 'react'\nimport Link from '@material-ui/core/Link'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport Title from './Title'\n\n// Generate Order Data\nfunction createData(\n  id: any,\n  date: any,\n  name: any,\n  shipTo: any,\n  paymentMethod: any,\n  amount: any\n) {\n  return { id, date, name, shipTo, paymentMethod, amount }\n}\n\nconst rows = [\n  createData(\n    0,\n    '16 Mar, 2019',\n    'Elvis Presley',\n    'Tupelo, MS',\n    'VISA  3719',\n    312.44\n  ),\n  createData(\n    1,\n    '16 Mar, 2019',\n    'Paul McCartney',\n    'London, UK',\n    'VISA  2574',\n    866.99\n  ),\n  createData(\n    2,\n    '16 Mar, 2019',\n    'Tom Scholz',\n    'Boston, MA',\n    'MC  1253',\n    100.81\n  ),\n  createData(\n    3,\n    '16 Mar, 2019',\n    'Michael Jackson',\n    'Gary, IN',\n    'AMEX  2000',\n    654.39\n  ),\n  createData(\n    4,\n    '15 Mar, 2019',\n    'Bruce Springsteen',\n    'Long Branch, NJ',\n    'VISA  5919',\n    212.79\n  )\n]\n\nfunction preventDefault(event: any) {\n  event.preventDefault()\n}\n\nconst useStyles = makeStyles(theme => ({\n  seeMore: {\n    marginTop: theme.spacing(3)\n  }\n}))\n\nexport default function Orders() {\n  const classes = useStyles()\n  return (\n    <React.Fragment>\n      <Title>Recent Orders</Title>\n      <Table size=\"small\">\n        <TableHead>\n          <TableRow>\n            <TableCell>Date</TableCell>\n            <TableCell>Name</TableCell>\n            <TableCell>Ship To</TableCell>\n            <TableCell>Payment Method</TableCell>\n            <TableCell align=\"right\">Sale Amount</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {rows.map(row => (\n            <TableRow key={row.id}>\n              <TableCell>{row.date}</TableCell>\n              <TableCell>{row.name}</TableCell>\n              <TableCell>{row.shipTo}</TableCell>\n              <TableCell>{row.paymentMethod}</TableCell>\n              <TableCell align=\"right\">{row.amount}</TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n      <div className={classes.seeMore}>\n        <Link color=\"primary\" href=\"#\" onClick={preventDefault}>\n          See more orders\n        </Link>\n      </div>\n    </React.Fragment>\n  )\n}\n","import React from 'react'\nimport clsx from 'clsx'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Grid from '@material-ui/core/Grid'\nimport Paper from '@material-ui/core/Paper'\n// import Link from '@material-ui/core/Link'\nimport Orders from './Orders'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    padding: theme.spacing(2)\n  },\n  paper: {\n    padding: theme.spacing(2),\n    display: 'flex',\n    overflow: 'auto',\n    flexDirection: 'column'\n  },\n  fixedHeight: {\n    height: 240\n  }\n}))\n\nexport default function Dashboard() {\n  const classes = useStyles()\n  const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight)\n\n  return (\n    <Grid container spacing={3} className={classes.root}>\n      {/* Chart */}\n      <Grid item xs={12} md={8} lg={9}>\n        <Paper className={fixedHeightPaper}>CHART</Paper>\n      </Grid>\n      {/* Recent Deposits */}\n      <Grid item xs={12} md={4} lg={3}>\n        <Paper className={fixedHeightPaper}>DEPOZ</Paper>\n      </Grid>\n      {/* Recent Orders */}\n      <Grid item xs={12}>\n        <Paper className={classes.paper}>\n          <Orders />\n        </Paper>\n      </Grid>\n    </Grid>\n  )\n}\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { ThunkDispatch } from 'redux-thunk'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport { Container, Button, TextField } from '@material-ui/core'\nimport Box from '@material-ui/core/Box'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport { RootState } from '../redux'\nimport { login } from '../redux/session/actions'\nimport { UserServiceProps } from '../redux/session/reducers'\n\ninterface OwnProps {}\n\ninterface DispatchProps {\n  login: (email: string, password: string) => void\n}\n\ntype Props = UserServiceProps & OwnProps & DispatchProps & RouteComponentProps\n\nconst useStyles = makeStyles(theme => ({\n  form: {\n    width: '100%',\n    minHeight: '100vh',\n    marginTop: theme.spacing(1),\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center'\n  },\n  title: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'flex-end'\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}))\n\nfunction Login(props: Props) {\n  const doLogin = (event: React.FormEvent) => {\n    event.preventDefault()\n    setError('')\n    const target = event.currentTarget as HTMLFormElement\n    const emailEl = target.elements.namedItem('email') as HTMLInputElement\n    const passwordEl = target.elements.namedItem('password') as HTMLInputElement\n\n    if (\n      emailEl &&\n      emailEl.value.length > 0 &&\n      passwordEl &&\n      passwordEl.value.length > 0\n    ) {\n      props.login(emailEl.value, passwordEl.value)\n    }\n  }\n\n  const { userService, history } = props\n  const classes = useStyles()\n  const [error, setError] = useState('')\n\n  // when userService changes, figure out if the page should redirect if a user is already logged in.\n  useEffect(() => {\n    if (\n      userService.user &&\n      !userService.isFetching &&\n      userService.user.role &&\n      userService.user.role === 'admin'\n    ) {\n      history.push('/')\n    }\n    // else if (userService.user && !userService.isFetching) {\n    //   setError('o noz! error! ...hmm, not an admin?')\n    // }\n  }, [userService, history])\n\n  return (\n    <Container maxWidth=\"sm\">\n      <form onSubmit={doLogin} className={classes.form}>\n        <div className={classes.title}>\n          <Typography variant=\"h2\" display=\"block\">\n            MARSH COOP\n          </Typography>\n          <Typography variant=\"overline\" display=\"inline\">\n            admin\n          </Typography>\n        </div>\n        <TextField\n          label=\"email\"\n          name=\"email\"\n          type=\"text\"\n          autoFocus\n          fullWidth\n          required\n        />\n        <TextField\n          label=\"password\"\n          name=\"password\"\n          type=\"password\"\n          fullWidth\n          required\n        />\n\n        <div>\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={props.userService.isFetching}\n            className={classes.submit}\n          >\n            Login\n          </Button>\n        </div>\n\n        <Box color=\"error.main\">\n          {props.userService.error && (\n            <>\n              <Typography variant=\"overline\" display=\"block\">\n                onoz! an error!\n              </Typography>\n              <Typography variant=\"body1\" display=\"block\" gutterBottom>\n                {props.userService.error.reason}\n              </Typography>\n            </>\n          )}\n          {error && (\n            <>\n              <Typography variant=\"overline\" display=\"block\">\n                onoz! an error!\n              </Typography>\n              <Typography variant=\"body1\" display=\"block\" gutterBottom>\n                {error}\n              </Typography>\n            </>\n          )}\n        </Box>\n      </form>\n    </Container>\n  )\n}\n\nconst mapStateToProps = (\n  states: RootState,\n  ownProps: OwnProps\n): UserServiceProps => {\n  return {\n    userService: states.session.userService\n  }\n}\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<{}, {}, any>,\n  ownProps: OwnProps\n): DispatchProps => {\n  return {\n    login: (email, password) => dispatch(login(email, password))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(Login))\n","import React, { useEffect, useState } from 'react'\nimport { connect } from 'react-redux'\nimport { ThunkDispatch } from 'redux-thunk'\nimport { withRouter, RouteComponentProps, useLocation } from 'react-router-dom'\nimport { Container, Button, TextField } from '@material-ui/core'\nimport Box from '@material-ui/core/Box'\nimport Typography from '@material-ui/core/Typography'\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport { RootState } from '../redux'\nimport { register } from '../redux/session/actions'\nimport { UserServiceProps } from '../redux/session/reducers'\n\ninterface OwnProps {}\n\ninterface DispatchProps {\n  register: (regKey: string, password: string) => void\n}\n\ntype Props = UserServiceProps & OwnProps & DispatchProps & RouteComponentProps\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    // minHeight: 'calc(100vh - 64px)'\n  },\n  form: {\n    width: '100%',\n    minHeight: '100vh',\n    marginTop: theme.spacing(1),\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center'\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2)\n  }\n}))\n\nfunction useQuery() {\n  return new URLSearchParams(useLocation().search)\n}\n\nfunction Register(props: Props) {\n  const doLogin = (event: React.FormEvent) => {\n    event.preventDefault()\n    setError('')\n    const target = event.currentTarget as HTMLFormElement\n\n    const passwordEl = target.elements.namedItem('password') as HTMLInputElement\n    const passwordConfirmEl = target.elements.namedItem(\n      'password_confirm'\n    ) as HTMLInputElement\n\n    let regKey: string = ''\n\n    if (regKeyParam) {\n      regKey = regKeyParam\n    }\n\n    if (!regKey) {\n      const regKeyEl = target.elements.namedItem('regKey') as HTMLInputElement\n      if (regKeyEl && regKeyEl.value.length > 1) {\n        regKey = regKeyEl.value\n      }\n    }\n\n    if (!regKey) {\n      setError('no registration key')\n    }\n\n    if (\n      passwordEl &&\n      passwordEl.value.length > 0 &&\n      passwordConfirmEl &&\n      passwordConfirmEl.value.length > 0\n    ) {\n      if (passwordConfirmEl.value !== passwordEl.value) {\n        setError('passwords do not match')\n      } else {\n        props.register(regKey, passwordConfirmEl.value)\n      }\n    }\n  }\n\n  let query = useQuery()\n  const regKeyParam = query.get('regKey')\n  console.log('[Register] regKeyParam', regKeyParam)\n  const { userService, history } = props\n  const classes = useStyles()\n  const [error, setError] = useState('')\n\n  // when userService changes, figure out if the page should redirect if a user is already logged in.\n  useEffect(() => {\n    if (\n      userService.user &&\n      !userService.isFetching &&\n      userService.user.role &&\n      userService.user.role === 'admin'\n    ) {\n      history.push('/')\n    }\n    // else if (userService.user && !userService.isFetching) {\n    //   setError('o noz! error! ...hmm, not an admin?')\n    // }\n  }, [userService, history])\n\n  return (\n    <Container maxWidth=\"sm\" className={classes.container}>\n      <form onSubmit={doLogin} className={classes.form}>\n        {!regKeyParam && (\n          <TextField\n            label=\"registration key\"\n            name=\"regKey\"\n            type=\"text\"\n            autoFocus\n            fullWidth\n            required\n          />\n        )}\n\n        <TextField\n          label=\"password\"\n          name=\"password\"\n          type=\"password\"\n          autoFocus={!!regKeyParam}\n          fullWidth\n          required\n        />\n        <TextField\n          label=\"password_confirm\"\n          name=\"password_confirm\"\n          type=\"password\"\n          fullWidth\n          required\n        />\n\n        <div>\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            disabled={props.userService.isFetching}\n            className={classes.submit}\n          >\n            submit\n          </Button>\n        </div>\n\n        <Box color=\"error.main\">\n          {props.userService.error && (\n            <>\n              <Typography variant=\"overline\" display=\"block\">\n                onoz! an error!\n              </Typography>\n              <Typography variant=\"body1\" display=\"block\" gutterBottom>\n                {props.userService.error.reason}\n              </Typography>\n            </>\n          )}\n          {error && (\n            <>\n              <Typography variant=\"overline\" display=\"block\">\n                onoz! an error!\n              </Typography>\n              <Typography variant=\"body1\" display=\"block\" gutterBottom>\n                {error}\n              </Typography>\n            </>\n          )}\n        </Box>\n      </form>\n    </Container>\n  )\n}\n\nconst mapStateToProps = (\n  states: RootState,\n  ownProps: OwnProps\n): UserServiceProps => {\n  return {\n    userService: states.session.userService\n  }\n}\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<{}, {}, any>,\n  ownProps: OwnProps\n): DispatchProps => {\n  return {\n    register: (regKey, password) => dispatch(register(regKey, password))\n  }\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withRouter(Register))\n","import React from 'react'\nimport { RouteProps, Redirect, Route } from 'react-router-dom'\n\nimport { UserServiceProps, UserService } from '../redux/session/reducers'\n\nconst isAdmin = (userService: UserService): boolean =>\n  userService.user && userService.user.role && userService.user.role === 'admin'\n    ? true\n    : false\n\ninterface ProtectedRouteProps {\n  children?: React.ReactNode\n}\n\nconst ProtectedRoute = ({\n  component: Component,\n  userService,\n  children,\n  ...rest\n}: ProtectedRouteProps & RouteProps & UserServiceProps) => (\n  <Route\n    {...rest}\n    render={props =>\n      isAdmin(userService) ? (\n        Component ? (\n          <Component {...props} />\n        ) : (\n          children\n        )\n      ) : (\n        <Redirect\n          to={{\n            pathname: '/login',\n            state: { from: props.location }\n          }}\n        />\n      )\n    }\n  />\n)\n\nexport default ProtectedRoute\n","import React from 'react'\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport IconButton from '@material-ui/core/IconButton'\nimport Badge from '@material-ui/core/Badge'\nimport TagFaces from '@material-ui/icons/TagFaces'\nimport { connect } from 'react-redux'\nimport { ThunkDispatch } from 'redux-thunk'\n\nimport { RootState } from '../redux'\nimport { UserService } from '../redux/session/reducers'\n// import { UserServiceProps } from '../redux/session/reducers'\nimport { logout } from '../redux/session/actions'\n\ninterface UserServiceProps {\n  userService?: UserService\n}\n\ninterface DispatchProps {\n  logout: () => void\n}\n\nfunction UserMenu(props: UserServiceProps & DispatchProps) {\n  const { userService, logout } = props\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null)\n\n  const handleClick = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  const handleLogout = () => {\n    logout()\n    handleClose()\n  }\n\n  const isAdmin = (): boolean => {\n    return !!(\n      userService &&\n      userService.user &&\n      userService.user.role &&\n      userService.user.role === 'admin'\n    )\n  }\n\n  return (\n    <>\n      <IconButton\n        aria-controls=\"user-menu\"\n        aria-haspopup=\"true\"\n        onClick={handleClick}\n      >\n        <Badge badgeContent={0} color=\"secondary\">\n          <TagFaces />\n        </Badge>\n      </IconButton>\n\n      <Menu\n        id=\"user-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        {/* {isAdmin() && <MenuItem onClick={handleClose}>Profile</MenuItem>}\n        {isAdmin() && <MenuItem onClick={handleClose}>My account</MenuItem>} */}\n        {isAdmin() && <MenuItem onClick={handleLogout}>Logout</MenuItem>}\n\n        {!isAdmin() && <MenuItem onClick={handleClose}>Login</MenuItem>}\n      </Menu>\n    </>\n  )\n}\n\nconst mapStateToProps = (states: RootState): UserServiceProps => {\n  return {\n    userService: states.session.userService\n  }\n}\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<{}, {}, any>\n): DispatchProps => {\n  return {\n    logout: () => dispatch(logout())\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserMenu)\n","import { useEffect, useState } from 'react'\n\nimport { Service } from '../types/Service'\nimport { Page } from '../types/Page'\nimport { API_HOST } from '../constants'\n\nconst token = localStorage && localStorage.getItem('token')\n\nconst usePageService = (\n  slug: string | undefined,\n  setLoading: (value: boolean) => void\n) => {\n  const [result, setResult] = useState<Service<Page>>({\n    status: 'loading'\n  })\n\n  useEffect(() => {\n    if (!slug || slug.length === 0) {\n      setLoading(false)\n      return\n    }\n\n    fetch(`${API_HOST}/page?slug=${slug}`)\n      .then(response => response.json())\n      .then(response => {\n        // console.log('page', response)\n        setResult({ status: 'loaded', payload: response as Page })\n      })\n      .catch(error => {\n        console.warn('usePageService fetch caught err:', error)\n        setResult({ ...error })\n      })\n      .finally(() => {\n        setLoading(false)\n      })\n  }, [slug, setLoading])\n\n  return result\n}\n\nconst useAllPagesService = (\n  reloadPages: boolean,\n  setReloadPages: (reloadPages: boolean) => void\n) => {\n  const [result, setResult] = useState<Service<Page[]>>({\n    status: 'loading'\n  })\n\n  useEffect(() => {\n    reloadPages &&\n      fetch(`${API_HOST}/pages`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      })\n        .then(response => response.json())\n        .then(response => {\n          // console.log('page', response)\n          setResult({ status: 'loaded', payload: response.rows as Page[] })\n        })\n        .catch(error => {\n          console.warn('usePageService fetch caught err:', error)\n          setResult({ ...error })\n        })\n        .finally(() => setReloadPages(false))\n  }, [reloadPages, setReloadPages])\n\n  return result\n}\n\nconst usePageSaveService = (\n  page: Page | undefined,\n  doSave: boolean,\n  setDoSave: (value: boolean) => void,\n  setSnackMsg: (msg: string) => void,\n  setSnackOpen: (value: boolean) => void\n) => {\n  const [result, setResult] = useState<Service<Page>>({\n    status: 'loading'\n  })\n\n  useEffect(() => {\n    if (!doSave || !page || page.slug.length === 0) {\n      setDoSave(false)\n      return\n    }\n\n    fetch(`${API_HOST}/page`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify(page)\n    })\n      .then(response => response.json())\n      .then(response => {\n        // console.log('usePageSaveService response:', response)\n        setResult({ status: 'loaded', payload: response as Page })\n        setSnackMsg(response.msg)\n        setSnackOpen(true)\n      })\n      .catch(error => {\n        console.warn('usePageSaveService fetch caught err:', error)\n        setResult({ ...error })\n        setSnackMsg(`o noz! ${error}`)\n        setSnackOpen(true)\n      })\n      .finally(() => {\n        setDoSave(false)\n      })\n  }, [page, doSave, setDoSave, setSnackMsg, setSnackOpen])\n\n  return result\n}\n\nexport { usePageService, useAllPagesService, usePageSaveService }\n","import React from 'react'\nimport { withStyles } from '@material-ui/core/styles'\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\nimport Button from '@material-ui/core/Button'\nimport Menu, { MenuProps } from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\n\nimport SaveIcon from '@material-ui/icons/Save'\n\nimport DeleteIcon from '@material-ui/icons/Delete'\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown'\nimport { Page } from '../types/Page'\n\nconst StyledMenu = (props: MenuProps) => (\n  <Menu\n    elevation={0}\n    getContentAnchorEl={null}\n    anchorOrigin={{\n      vertical: 'bottom',\n      horizontal: 'right'\n    }}\n    transformOrigin={{\n      vertical: 'top',\n      horizontal: 'right'\n    }}\n    {...props}\n  />\n)\n\nconst StyledMenuItem = withStyles(theme => ({\n  root: {\n    '&:focus': {\n      backgroundColor: theme.palette.primary.main,\n      '& .MuiListItemIcon-root, & .MuiListItemText-primary': {\n        color: theme.palette.common.white\n      }\n    }\n  }\n}))(MenuItem)\n\ninterface EditPageMenuProps {\n  page: Page\n  onSaveBtnClick: () => void\n  onDeleteBtnClick: () => void\n}\n\nexport default function EditPageMenu(props: EditPageMenuProps) {\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null)\n\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  return (\n    <>\n      <ButtonGroup\n        variant=\"contained\"\n        color=\"primary\"\n        aria-label=\"split button\"\n      >\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          startIcon={<SaveIcon />}\n          onClick={props.onSaveBtnClick}\n        >\n          save\n        </Button>\n        <Button\n          aria-controls=\"customized-menu\"\n          aria-haspopup=\"true\"\n          variant=\"contained\"\n          color=\"primary\"\n          size=\"small\"\n          onClick={handleClick}\n        >\n          <ArrowDropDownIcon />\n        </Button>\n      </ButtonGroup>\n\n      <StyledMenu\n        id=\"customized-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <StyledMenuItem\n          onClick={() => {\n            if (window.confirm('are you sure?')) {\n              props.onDeleteBtnClick()\n            }\n            handleClose()\n          }}\n          disabled={!props.page.id}\n        >\n          <ListItemIcon>\n            <DeleteIcon fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText primary=\"delete page\" />\n        </StyledMenuItem>\n      </StyledMenu>\n    </>\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles'\nimport TextField from '@material-ui/core/TextField'\nimport Snackbar from '@material-ui/core/Snackbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\n\nimport { PageRouterProps } from '../types/PageRouterProps'\nimport Loading from '../Loading'\nimport { usePageService, usePageSaveService } from './usePageService'\nimport EditPageMenu from './EditPageMenu'\nimport { Page } from '../types/Page'\nimport { API_HOST } from '../constants'\n\nconst token = localStorage && localStorage.getItem('token')\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    row: {\n      display: 'flex'\n    },\n    pageName: {\n      marginBottom: theme.spacing(2),\n      marginRight: theme.spacing(2)\n    }\n  })\n)\n\nfunction EditPage(props: RouteComponentProps<PageRouterProps>) {\n  const classes = useStyles()\n\n  const [pageSlug, setPageSlug] = useState('')\n  const [page, setPage] = useState<Page>({ slug: '', content: '' })\n  const [loading, setLoading] = useState(true)\n  const [doSave, setDoSave] = useState(false)\n\n  const pageService = usePageService(pageSlug, setLoading)\n\n  useEffect(() => {\n    if (pageService.status === 'loaded') {\n      if (pageService.payload) {\n        setPage(pageService.payload)\n      } else {\n        setPage({ slug: pageSlug, content: '' })\n      }\n    }\n  }, [pageService, pageSlug])\n\n  const [snackOpen, setSnackOpen] = React.useState(false)\n  const [snackMsg, setSnackMsg] = React.useState('')\n\n  const handlePageContentChange = (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    setPage(prevPage => ({ ...prevPage, content: event.target.value }))\n  }\n\n  const handlePageNameChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    setPage(prevPage => ({ ...prevPage, slug: event.target.value }))\n  }\n\n  const handleSnackClose = (\n    event: React.SyntheticEvent | React.MouseEvent,\n    reason?: string\n  ) => {\n    if (reason === 'clickaway') {\n      return\n    }\n    setSnackOpen(false)\n  }\n\n  const slug = props.match.params.slug\n\n  useEffect(() => {\n    if (slug) {\n      setPageSlug(slug)\n    }\n  }, [slug])\n\n  const onSaveBtnClick = (): void => {\n    setDoSave(true)\n  }\n\n  usePageSaveService(page, doSave, setDoSave, setSnackMsg, setSnackOpen)\n\n  const onDeleteBtnClick = (): void => {\n    fetch(`${API_HOST}/page`, {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify(page)\n    })\n      .then(response => response.json())\n      .then(response => {\n        if (response.error) {\n          setSnackMsg(response.msg)\n          setSnackOpen(true)\n        } else {\n          props.history.replace('/pages')\n        }\n      })\n      .catch(error => {\n        console.warn('delete page fetch caught err:', error)\n        setSnackMsg(`o noz! ${error}`)\n        setSnackOpen(true)\n      })\n  }\n\n  return page ? (\n    <>\n      <div className={classes.row}>\n        <TextField\n          className={classes.pageName}\n          label=\"permalink\"\n          fullWidth\n          value={page.slug}\n          onChange={handlePageNameChange}\n        />\n\n        <EditPageMenu\n          page={page}\n          onSaveBtnClick={onSaveBtnClick}\n          onDeleteBtnClick={onDeleteBtnClick}\n        />\n      </div>\n\n      {loading ? (\n        <Loading />\n      ) : (\n        <TextField\n          label=\"content\"\n          multiline\n          fullWidth\n          rows={4}\n          rowsMax={28}\n          value={page.content}\n          onChange={handlePageContentChange}\n        />\n      )}\n\n      <Snackbar\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center'\n        }}\n        open={snackOpen}\n        autoHideDuration={6000}\n        onClose={handleSnackClose}\n        ContentProps={{\n          'aria-describedby': 'message-id'\n        }}\n        message={<span id=\"message-id\">{snackMsg}</span>}\n        action={[\n          <IconButton key=\"close\" aria-label=\"close\" onClick={handleSnackClose}>\n            <CloseIcon />\n          </IconButton>\n        ]}\n      />\n    </>\n  ) : (\n    <Loading />\n  )\n}\n\nexport default withRouter(EditPage)\n","import React, { useState, useEffect } from 'react'\nimport { Link, withRouter, RouteComponentProps } from 'react-router-dom'\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles'\nimport Paper from '@material-ui/core/Paper'\nimport Grid from '@material-ui/core/Grid'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport Add from '@material-ui/icons/Add'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Divider from '@material-ui/core/Divider'\nimport Snackbar from '@material-ui/core/Snackbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\nimport { connect } from 'react-redux'\nimport { Switch } from 'react-router'\nimport ProtectedRoute from '../auth/ProtectedRoute'\nimport { RootState } from '../redux'\nimport { UserService, UserServiceProps } from '../redux/session/reducers'\nimport EditPage from './EditPage'\nimport { useAllPagesService } from './usePageService'\nimport { PageRouterProps } from '../types/PageRouterProps'\nimport { Page } from '../types/Page'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: theme.spacing(2),\n      maxWidth: '100vw',\n      minHeight: '100vh'\n    },\n    title: {\n      display: 'flex',\n      alignItems: 'center'\n    },\n    titleText: {\n      flexGrow: 1\n    },\n    paper: {\n      padding: theme.spacing(2),\n      textAlign: 'center',\n      color: theme.palette.text.secondary,\n      height: '100%'\n    }\n  })\n)\n\nconst Default = () => <h3>pages!</h3>\n\ninterface Props {\n  userService?: UserService\n}\n\nfunction Pages(props: Props & RouteComponentProps<PageRouterProps>) {\n  const classes = useStyles()\n  const { userService } = props\n\n  const [pages, setPages] = useState<Page[]>([])\n  const [reloadPages, setReloadPages] = useState(true)\n  const allPages = useAllPagesService(reloadPages, setReloadPages)\n\n  useEffect(() => {\n    allPages.status === 'loaded' && setPages(allPages.payload)\n  }, [allPages])\n\n  const [snackOpen, setSnackOpen] = useState(false)\n  const handleSnackClose = (\n    event: React.SyntheticEvent | React.MouseEvent,\n    reason?: string\n  ) => {\n    if (reason === 'clickaway') {\n      return\n    }\n    setSnackOpen(false)\n  }\n\n  function addPage() {\n    props.history.push('/pages/edit/newpage')\n    setSnackOpen(true)\n  }\n\n  return userService ? (\n    <>\n      <Grid\n        container\n        direction=\"row\"\n        justify=\"space-between\"\n        alignItems=\"stretch\"\n        className={classes.root}\n        spacing={2}\n      >\n        <Grid xs={12} sm={4} md={3} lg={2} item>\n          <Paper className={classes.paper}>\n            <List>\n              <ListItem>\n                <ListItemText>\n                  <div className={classes.title}>\n                    <span className={classes.titleText}>PAGES</span>\n                    <IconButton\n                      aria-label=\"add page\"\n                      title=\"add page\"\n                      onClick={() => addPage()}\n                    >\n                      <Add />\n                    </IconButton>\n                  </div>\n                </ListItemText>\n              </ListItem>\n              <Divider />\n              {pages.map((page: Page, idx: number) => (\n                <ListItem\n                  button\n                  component={Link}\n                  to={`/pages/edit/${page.slug}`}\n                  key={`page${idx}`}\n                >\n                  <ListItemText primary={page.slug} />\n                </ListItem>\n              ))}\n            </List>\n          </Paper>\n        </Grid>\n\n        <Grid xs={12} sm={8} md={9} lg={10} item>\n          <Paper className={classes.paper}>\n            <Switch>\n              <ProtectedRoute\n                userService={userService}\n                path=\"/pages\"\n                component={Default}\n                exact\n              />\n              <ProtectedRoute\n                userService={userService}\n                path=\"/pages/edit/:slug\"\n                component={EditPage}\n              />\n            </Switch>\n          </Paper>\n        </Grid>\n      </Grid>\n      <Snackbar\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center'\n        }}\n        open={snackOpen}\n        autoHideDuration={4000}\n        onClose={handleSnackClose}\n        ContentProps={{\n          'aria-describedby': 'message-id'\n        }}\n        message={<span id=\"message-id\">Created new page!</span>}\n        action={[\n          <IconButton key=\"close\" aria-label=\"close\" onClick={handleSnackClose}>\n            <CloseIcon />\n          </IconButton>\n        ]}\n      />\n    </>\n  ) : null\n}\n\nconst mapStateToProps = (states: RootState): UserServiceProps => {\n  return {\n    userService: states.session.userService\n  }\n}\n\nexport default connect(mapStateToProps, undefined)(withRouter(Pages))\n","import React from 'react'\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles'\nimport Grid from '@material-ui/core/Grid'\nimport Typography from '@material-ui/core/Typography'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport Link from '@material-ui/core/Link'\n\nimport { Order } from '../types/Order'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      marginRight: theme.spacing(2),\n      borderLeft: `${theme.spacing(6)}px solid ${theme.palette.divider}`\n    },\n    gridHeading: {\n      color: theme.palette.text.secondary\n    },\n    gridItem: {\n      paddingBottom: theme.spacing(2),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      textAlign: 'center'\n    },\n    lastUpdated: {\n      marginLeft: theme.spacing(2)\n    }\n  })\n)\n\nexport default function OrderDetailPanel(props: { order: Order }) {\n  const classes = useStyles()\n  const order = props.order\n  const line_items = props.order.OrderLineItems || []\n  const adjustments = line_items.filter(li => li.kind !== 'product')\n\n  return (\n    <div className={classes.root}>\n      <Table aria-label=\"order details table\" size=\"small\">\n        <TableHead>\n          <TableRow>\n            <TableCell component=\"th\">\n              Line Items ({order.item_count})\n            </TableCell>\n            <TableCell component=\"th\" align=\"right\">\n              price\n            </TableCell>\n            <TableCell component=\"th\" align=\"right\">\n              unit\n            </TableCell>\n            <TableCell component=\"th\" align=\"right\">\n              qty\n            </TableCell>\n            <TableCell component=\"th\" align=\"right\">\n              total\n            </TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {line_items.map(\n            (li, idx) =>\n              li.kind === 'product' && (\n                <TableRow key={`orderli${idx}`}>\n                  <TableCell component=\"td\" scope=\"row\">\n                    {li.vendor && `[${li.vendor}] ${li.description} `}\n                    {li.data && li.data.product ? `${li.data.product.unf}` : ''}\n                  </TableCell>\n                  <TableCell align=\"right\">{li.price}</TableCell>\n                  <TableCell align=\"right\">{li.selected_unit}</TableCell>\n                  <TableCell align=\"right\">{li.quantity}</TableCell>\n                  <TableCell align=\"right\">{li.total}</TableCell>\n                </TableRow>\n              )\n          )}\n\n          <TableRow>\n            <TableCell component=\"td\" scope=\"row\" colSpan={3} />\n            <TableCell component=\"td\" scope=\"row\" align=\"right\">\n              <b>Sub Total</b>\n            </TableCell>\n            <TableCell component=\"td\" scope=\"row\" align=\"right\">\n              {order.subtotal}\n            </TableCell>\n          </TableRow>\n\n          {adjustments.length > 0 && (\n            <TableRow>\n              <TableCell component=\"td\" scope=\"row\">\n                <b>Adjustments</b>\n              </TableCell>\n            </TableRow>\n          )}\n          {adjustments.map((li, idx) => (\n            <TableRow key={`orderli${idx}`}>\n              <TableCell component=\"td\" scope=\"row\" colSpan={3}>\n                {`(${li.kind}) `} {li.description}\n              </TableCell>\n              <TableCell align=\"right\">{li.quantity}</TableCell>\n              <TableCell align=\"right\">{li.total}</TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n\n      <Grid container direction=\"row\" justify=\"center\" alignItems=\"flex-start\">\n        <Grid item xs={4}>\n          <div className={classes.gridItem}>\n            <Typography\n              variant=\"overline\"\n              display=\"block\"\n              className={classes.gridHeading}\n              gutterBottom\n            >\n              customer\n            </Typography>\n            <Typography variant=\"body1\">\n              {order.name}{' '}\n              <Link color=\"primary\" href={`mailto:${order.email}`}>\n                {order.email}\n              </Link>\n              <br />\n              <Link color=\"primary\" href={`tel:${order.phone}`}>\n                {order.phone}\n              </Link>\n              <br />\n              {order.address} <br />\n            </Typography>\n          </div>\n        </Grid>\n        {order.User && order.User !== order.Member && (\n          <Grid item xs={4}>\n            <div className={classes.gridItem}>\n              <Typography\n                variant=\"overline\"\n                display=\"block\"\n                className={classes.gridHeading}\n                gutterBottom\n              >\n                created by\n              </Typography>\n              <Typography variant=\"body1\">\n                <Link color=\"primary\" href={`mailto:${order.User.email}`}>\n                  {order.User.email}\n                </Link>{' '}\n                {order.User.role && <>({order.User.role}) </>}\n              </Typography>\n            </div>\n          </Grid>\n        )}\n        <Grid item xs={4}>\n          <div className={classes.gridItem}>\n            <Typography\n              variant=\"overline\"\n              display=\"block\"\n              className={classes.gridHeading}\n              gutterBottom\n            >\n              notes\n            </Typography>\n            <Typography variant=\"body2\">{order.notes}</Typography>\n          </div>\n        </Grid>\n      </Grid>\n      {order.createdAt !== order.updatedAt && (\n        <div className={classes.lastUpdated}>\n          <i>Last updated</i> {new Date(order.updatedAt).toLocaleString()}\n        </div>\n      )}\n    </div>\n  )\n}\n","import React, { useState, useEffect, createRef } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles'\nimport MaterialTable, { Action } from 'material-table'\nimport { Order } from '../types/Order'\nimport OrderDetailPanel from './OrderDetailPanel'\nimport {\n  API_HOST,\n  ORDER_STATUSES,\n  PAYMENT_STATUSES,\n  SHIPMENT_STATUSES\n} from '../constants'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: theme.spacing(2),\n      maxWidth: '100vw',\n      minHeight: '100vh'\n    }\n  })\n)\n\nfunction Orders(props: RouteComponentProps) {\n  const classes = useStyles()\n  let tableRef = createRef<any>()\n\n  const [searchExpanded, setSearchExpanded] = useState(false)\n  const [isSelecting, setIsSelecting] = useState(false)\n\n  const token = localStorage && localStorage.getItem('token')\n\n  const searchAction = {\n    icon: searchExpanded ? 'zoom_out' : 'search',\n    tooltip: searchExpanded ? 'CLOSE SEARCH' : 'SEARCH',\n    isFreeAction: true,\n    onClick: () => setSearchExpanded(!searchExpanded)\n  }\n\n  const newOrderAction = {\n    icon: 'add',\n    tooltip: 'NEW ORDER',\n    isFreeAction: true,\n    onClick: () => props.history.push('/orders/create')\n  }\n\n  const printAction = {\n    tooltip: 'PRINT',\n    icon: 'print',\n    onClick: (e: any, data: Order[]) => {\n      const orderIds = data.map(order => order.id)\n      console.log('printAction orderIds:', orderIds, ' data:', data)\n\n      fetch(`${API_HOST}/orders/print`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({ orderIds })\n      })\n        .then(response => response.text())\n        .then(result => {\n          try {\n            // eslint-disable-next-line\n            const wOpen = window.open('about:blank')\n            if (wOpen) {\n              wOpen.document.body.innerHTML += result\n            }\n          } catch (e) {\n            console.warn('caught error doing this razzle dazze shit e:', e)\n          }\n        })\n        .catch(err => {\n          console.warn(err)\n        })\n    }\n  }\n\n  const editAction = {\n    tooltip: 'EDIT',\n    icon: 'edit',\n    onClick: (e: any, data: Order[]) => {\n      data[0] && data[0].id && props.history.push(`/orders/edit/${data[0].id}`)\n    }\n  }\n\n  // const archiveAction = {\n  //   tooltip: 'ARCHIVE',\n  //   icon: 'archive',\n  //   onClick: (e: any, data: Order[]) => {\n  //     console.log('archive these muthafuckaz')\n  //   }\n  // }\n\n  const [actions, setActions] = useState<Action<any>[]>([\n    searchAction,\n    newOrderAction\n  ])\n\n  useEffect(() => {\n    !isSelecting && setActions([searchAction, newOrderAction])\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [searchExpanded, isSelecting]) // note: adding actions to dep array is not pleasant :/\n\n  return (\n    <div className={classes.root}>\n      <MaterialTable\n        tableRef={tableRef}\n        columns={[\n          {\n            title: 'created',\n            field: 'createdAt',\n            type: 'datetime',\n            filtering: false,\n            render: (order: Order) => new Date(order.createdAt).toLocaleString()\n          },\n          {\n            title: 'status',\n            field: 'status',\n            type: 'string',\n            lookup: ORDER_STATUSES\n          },\n          {\n            title: 'payment status',\n            field: 'payment_status',\n            type: 'string',\n            lookup: PAYMENT_STATUSES\n          },\n          {\n            title: 'shipment status',\n            field: 'shipment_status',\n            type: 'string',\n            lookup: SHIPMENT_STATUSES\n          },\n          { title: 'name', field: 'name', type: 'string', filtering: false },\n          { title: 'email', field: 'email', type: 'string', filtering: false },\n          {\n            title: 'items',\n            field: 'item_count',\n            type: 'numeric',\n            filtering: false\n          },\n          {\n            title: 'total',\n            field: 'total',\n            type: 'currency',\n            filtering: false\n          },\n\n          {\n            title: 'updated',\n            field: 'updatedAt',\n            type: 'datetime',\n            filtering: false,\n            hidden: true\n            // render: (order: Order) =>\n            //   order.updatedAt\n            //     ? new Date(order.updatedAt).toLocaleString()\n            //     : null\n          },\n          { title: 'phone', field: 'phone', type: 'string', hidden: true },\n          {\n            title: 'address',\n            field: 'address',\n            type: 'string',\n            hidden: true\n          },\n          { title: 'notes', field: 'notes', type: 'string', hidden: true },\n          {\n            title: 'WholesaleOrderId',\n            field: 'WholesaleOrderId',\n            type: 'string',\n            hidden: true\n          },\n          { title: 'history', field: 'history', type: 'string', hidden: true },\n          { title: 'id', field: 'id', type: 'string', hidden: true }\n        ]}\n        data={query =>\n          new Promise((resolve, reject) => {\n            // console.log('query:', query)\n            fetch(`${API_HOST}/orders`, {\n              method: 'post',\n              headers: {\n                'Content-Type': 'application/json',\n                Authorization: `Bearer ${token}`\n              },\n              body: JSON.stringify(query)\n            })\n              .then(response => response.json())\n              .then(result => {\n                // console.log('result', result)\n                resolve(result)\n              })\n              .catch(err => {\n                console.warn(err)\n                return resolve({ data: [], page: 0, totalCount: 0 })\n              })\n          })\n        }\n        detailPanel={order => <OrderDetailPanel order={order} />}\n        onRowClick={(event, rowData, togglePanel) =>\n          togglePanel && togglePanel()\n        }\n        title=\"Orders\"\n        options={{\n          headerStyle: { position: 'sticky', top: 0 },\n          maxBodyHeight: 'calc(100vh - 121px - 28px)',\n          pageSize: 50,\n          pageSizeOptions: [50, 100, 500],\n          debounceInterval: 750,\n          filtering: true,\n          search: searchExpanded,\n          emptyRowsWhenPaging: false,\n          selection: true\n        }}\n        onSelectionChange={(data: Order[], rowData?: Order | undefined) => {\n          searchExpanded && setSearchExpanded(false)\n          if (data.length === 0) {\n            setIsSelecting(false)\n            return\n          }\n          setIsSelecting(true)\n          if (data.length === 1) {\n            setActions([printAction, editAction])\n          } else {\n            setActions([printAction])\n          }\n        }}\n        actions={actions}\n      />\n    </div>\n  )\n}\n\nexport default withRouter(Orders)\n","import { useEffect, useState } from 'react'\n\nimport { Service } from '../types/Service'\nimport { WholesaleOrder } from '../types/WholesaleOrder'\nimport { API_HOST } from '../constants'\nimport { OrderStatus } from '../types/Order'\n\nconst token = localStorage && localStorage.getItem('token')\n\nconst blankWholesaleOrder: WholesaleOrder = {\n  id: '',\n  vendor: '',\n  notes: '',\n  status: 'new',\n  payment_status: 'balance_due',\n  shipment_status: 'backorder',\n  createdAt: '',\n  updatedAt: ''\n}\n\nconst useWholesaleOrderService = (\n  id: string | undefined,\n  setLoading: (value: boolean) => void,\n  reload: boolean,\n  setReload: React.Dispatch<React.SetStateAction<boolean>>\n) => {\n  const [result, setResult] = useState<Service<WholesaleOrder>>({\n    status: 'loading'\n  })\n\n  useEffect(() => {\n    if (!id) {\n      setLoading(false)\n      setReload(false)\n      return\n    }\n\n    if (id === 'new') {\n      setResult({ status: 'loaded', payload: blankWholesaleOrder })\n      setLoading(false)\n      setReload(false)\n      return\n    }\n\n    fetch(`${API_HOST}/wholesaleorder/${id}`, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    })\n      .then(response => response.json())\n      .then(response => {\n        setResult({ status: 'loaded', payload: response as WholesaleOrder })\n      })\n      .catch(error => {\n        console.warn('useWholesaleOrderService fetch caught err:', error)\n        setResult({ ...error })\n      })\n      .finally(() => {\n        setLoading(false)\n        setReload(false)\n      })\n  }, [id, setLoading, reload, setReload])\n\n  return result\n}\n\nconst useAllWholesaleOrdersService = (\n  status: OrderStatus,\n  setLoading: React.Dispatch<React.SetStateAction<boolean>>,\n  reloadWholesaleOrders: boolean,\n  setReloadWholesaleOrders: (reloadWholesaleOrders: boolean) => void\n) => {\n  const [result, setResult] = useState<Service<WholesaleOrder[]>>({\n    status: 'loading'\n  })\n\n  useEffect(() => {\n    reloadWholesaleOrders &&\n      fetch(`${API_HOST}/wholesaleorders`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          status\n        })\n      })\n        .then(response => response.json())\n        .then(response => {\n          setResult({\n            status: 'loaded',\n            payload: response.data as WholesaleOrder[]\n          })\n        })\n        .catch(error => {\n          console.warn('useWholesaleOrderService fetch caught err:', error)\n          setResult({ ...error })\n        })\n        .finally(() => {\n          setReloadWholesaleOrders(false)\n          setLoading(false)\n        })\n  }, [reloadWholesaleOrders, setReloadWholesaleOrders, status, setLoading])\n\n  return result\n}\n\nconst useWholesaleOrderSaveService = (\n  wholesaleOrder: WholesaleOrder | undefined,\n  doSave: boolean,\n  setDoSave: (value: boolean) => void,\n  setSnackMsg: (msg: string) => void,\n  setSnackOpen: (value: boolean) => void\n) => {\n  const [result, setResult] = useState<Service<WholesaleOrder>>({\n    status: 'loading'\n  })\n\n  useEffect(() => {\n    if (!doSave || !wholesaleOrder || !wholesaleOrder.id) {\n      setDoSave(false)\n      return\n    }\n\n    const path =\n      wholesaleOrder.id === 'new'\n        ? '/wholesaleorder/create'\n        : '/wholesaleorder/upsert'\n    fetch(`${API_HOST}${path}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify(wholesaleOrder)\n    })\n      .then(response => response.json())\n      .then(response => {\n        setResult({\n          status: 'loaded',\n          payload: response.order as WholesaleOrder\n        })\n        setSnackMsg(response.msg)\n        setSnackOpen(true)\n      })\n      .catch(error => {\n        console.warn('useWholesaleOrderSaveService fetch caught err:', error)\n        setResult({ ...error })\n        setSnackMsg(`o noz! ${error}`)\n        setSnackOpen(true)\n      })\n      .finally(() => {\n        setDoSave(false)\n      })\n  }, [wholesaleOrder, doSave, setDoSave, setSnackMsg, setSnackOpen])\n\n  return result\n}\n\nexport {\n  useWholesaleOrderService,\n  useAllWholesaleOrdersService,\n  useWholesaleOrderSaveService\n}\n","import React from 'react'\nimport { withStyles } from '@material-ui/core/styles'\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\nimport Button from '@material-ui/core/Button'\nimport Menu, { MenuProps } from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport SaveIcon from '@material-ui/icons/Save'\nimport DeleteIcon from '@material-ui/icons/Delete'\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown'\nimport FileIcon from '@material-ui/icons/FileCopy'\n\nimport { WholesaleOrder } from '../types/WholesaleOrder'\n\nconst StyledMenu = (props: MenuProps) => (\n  <Menu\n    elevation={0}\n    getContentAnchorEl={null}\n    anchorOrigin={{\n      vertical: 'bottom',\n      horizontal: 'right'\n    }}\n    transformOrigin={{\n      vertical: 'top',\n      horizontal: 'right'\n    }}\n    {...props}\n  />\n)\n\nconst StyledMenuItem = withStyles(theme => ({\n  root: {\n    '&:focus': {\n      backgroundColor: theme.palette.primary.main,\n      '& .MuiListItemIcon-root, & .MuiListItemText-primary': {\n        color: theme.palette.common.white\n      }\n    }\n  }\n}))(MenuItem)\n\ninterface EditWholesaleOrderMenuProps {\n  wholesaleOrder: WholesaleOrder\n  onSaveBtnClick: () => void\n  onDeleteBtnClick: () => void\n  onExportToCsv: () => void\n  onProductsExportToCsv: () => void\n}\n\nexport default function EditMenu(props: EditWholesaleOrderMenuProps) {\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null)\n\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  return (\n    <>\n      <ButtonGroup\n        variant=\"contained\"\n        color=\"primary\"\n        aria-label=\"split button\"\n      >\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          startIcon={<SaveIcon />}\n          onClick={props.onSaveBtnClick}\n        >\n          save\n        </Button>\n        <Button\n          aria-controls=\"wholesaleorders-menu\"\n          aria-haspopup=\"true\"\n          variant=\"contained\"\n          color=\"primary\"\n          size=\"small\"\n          onClick={handleClick}\n        >\n          <ArrowDropDownIcon />\n        </Button>\n      </ButtonGroup>\n\n      <StyledMenu\n        id=\"wholesaleorders-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        <StyledMenuItem\n          onClick={() => {\n            if (window.confirm('are you sure?')) {\n              props.onDeleteBtnClick()\n            }\n            handleClose()\n          }}\n          disabled={!props.wholesaleOrder.id}\n        >\n          <ListItemIcon>\n            <DeleteIcon fontSize=\"small\" />\n          </ListItemIcon>\n          <ListItemText primary=\"delete wholesale order\" />\n        </StyledMenuItem>\n\n        {/* <StyledMenuItem\n          onClick={() => {\n            props.onExportToCsv()\n            handleClose()\n          }}\n          disabled={!props.wholesaleOrder.id}\n        >\n          <ListItemIcon>\n            <FileIcon />\n          </ListItemIcon>\n          <ListItemText primary=\"Export to .csv\" />\n        </StyledMenuItem> */}\n\n        <StyledMenuItem\n          onClick={() => {\n            props.onProductsExportToCsv()\n            handleClose()\n          }}\n          disabled={!props.wholesaleOrder.id}\n        >\n          <ListItemIcon>\n            <FileIcon />\n          </ListItemIcon>\n          <ListItemText primary=\"export products to .csv\" />\n        </StyledMenuItem>\n      </StyledMenu>\n    </>\n  )\n}\n","import React, { useEffect } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\nimport Link from '@material-ui/core/Link'\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles'\n\nimport { LineItemData, GroupedItem } from './EditWholesaleOrder'\nimport { WholesaleOrder } from '../types/WholesaleOrder'\nimport { API_HOST } from '../constants'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    liTable: {\n      marginTop: theme.spacing(4)\n    },\n    deleteBtn: {\n      width: '88px'\n    },\n    unf: {\n      minWidth: '105px'\n    },\n    groupedRow: {\n      backgroundColor: theme.palette.background.default\n    },\n    groupedRowTotals: theme.typography.h6\n  })\n)\n\nfunction WholesaleOrderLineItems(\n  props: {\n    wholesaleOrder?: WholesaleOrder\n    setReload: React.Dispatch<React.SetStateAction<boolean>>\n    lineItemData: LineItemData\n    setLineItemData: React.Dispatch<React.SetStateAction<LineItemData>>\n  } & RouteComponentProps\n) {\n  const classes = useStyles()\n  const lineItems = props?.wholesaleOrder?.OrderLineItems\n  const { lineItemData, setLineItemData } = props\n\n  function calc() {\n    let groupedLineItems: {\n      [key: string]: GroupedItem\n    } = {}\n\n    setLineItemData(prevData => ({\n      ...prevData,\n      productTotal: 0,\n      adjustmentTotal: 0,\n      orderTotal: 0\n    }))\n\n    lineItems?.forEach(li => {\n      const id = li.data && li.data.product && li.data.product.id\n      const key = id ? id : li.description\n\n      let acc = groupedLineItems[key]\n\n      const qty =\n        li.data && li.data.product && li.selected_unit === 'EA'\n          ? li.quantity / li.data.product.pk\n          : li.quantity\n\n      const liTotal =\n        li.data && li.data.product\n          ? +(parseFloat(li.data.product.ws_price_cost) * qty).toFixed(2)\n          : li.total\n\n      groupedLineItems[key] = {\n        qtySum: acc ? acc.qtySum + qty : qty,\n        totalSum: acc ? acc.totalSum + liTotal : liTotal,\n        product: li && li.data && li.data.product,\n        vendor: li.vendor,\n        description: li.description,\n        line_items: acc ? [...acc.line_items, li] : [li]\n      }\n\n      setLineItemData(prevData => ({\n        ...prevData,\n        productTotal: prevData.productTotal + parseFloat(`${liTotal}`),\n        orderTotal: prevData.orderTotal + liTotal\n      }))\n    })\n\n    Object.values(groupedLineItems).forEach(item => {\n      // check if qtySum is not a round number (i.e. a partial case)\n      if (item.qtySum % 1 !== 0 && item.product) {\n        const pk = item.product.pk\n        const qty = item.line_items.reduce((acc, v) => acc + v.quantity, 0)\n        // quantity needed to complete a case\n        const quantity = Math.abs((qty % pk) - pk)\n        const price = +(\n          quantity * parseFloat(item.product.u_price_cost)\n        ).toFixed(2)\n\n        const total = price\n        item.line_items.push({\n          quantity,\n          price,\n          total,\n          kind: 'adjustment',\n          description: `add ${quantity} EA`\n        })\n        // also add to the sums when creating this adjustment.\n        item.totalSum = item.totalSum + total\n        item.qtySum = Math.round(item.qtySum + quantity / pk)\n\n        setLineItemData(prevData => ({\n          ...prevData,\n          adjustmentTotal: prevData.adjustmentTotal + +total,\n          orderTotal: prevData.orderTotal + total\n        }))\n      }\n    })\n\n    setLineItemData(prevData => ({\n      ...prevData,\n      groupedLineItems\n    }))\n  }\n\n  useEffect(calc, [lineItems])\n\n  function removeLineItem(item: GroupedItem) {\n    const ids = item.line_items.map(li => li.id).filter(a => a)\n    if (ids && ids.length && window.confirm('are you sure?')) {\n      const token = localStorage && localStorage.getItem('token')\n      fetch(`${API_HOST}/wholesaleorder/removelineitem`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({ ids })\n      })\n        .then(response => response.json())\n        .then(response => !response.error && props.setReload(true))\n        .catch(err => console.warn('members removelineitem caught err', err))\n    }\n  }\n\n  return (\n    <Table size=\"small\" className={classes.liTable}>\n      <TableHead>\n        <TableRow>\n          <TableCell className={classes.deleteBtn} />\n          <TableCell className={classes.unf}>unf</TableCell>\n          <TableCell>description</TableCell>\n          <TableCell>price</TableCell>\n          <TableCell>cost</TableCell>\n          <TableCell>pk</TableCell>\n\n          <TableCell align=\"center\">qty</TableCell>\n          <TableCell align=\"right\">total</TableCell>\n        </TableRow>\n      </TableHead>\n      <TableBody>\n        {Object.values(lineItemData.groupedLineItems).map(\n          (item: GroupedItem, idx: number) => (\n            <React.Fragment key={`wsgli${idx}`}>\n              <TableRow className={classes.groupedRow}>\n                <TableCell className={classes.deleteBtn}>\n                  <Tooltip title=\"remove these line item(s)\">\n                    <IconButton\n                      aria-label=\"remove these line item(s)\"\n                      onClick={() => removeLineItem(item)}\n                    >\n                      <CloseIcon />\n                    </IconButton>\n                  </Tooltip>\n                </TableCell>\n                <TableCell>\n                  {item.product &&\n                    `${\n                      item.product.unf\n                        ? item.product.unf\n                        : item.product.upc_code\n                    } `}\n                </TableCell>\n                <TableCell>\n                  {item.product &&\n                    `${item.product.name} ${item.product.description}`}\n                  {item.product && (\n                    <>\n                      <br />\n                      {`${item.product.upc_code} ${item.product.category} > ${item.product.sub_category}`}{' '}\n                    </>\n                  )}\n                </TableCell>\n                <TableCell>\n                  {item.product && item.product.ws_price}\n                  {item.product &&\n                  item.product.ws_price !== item.product.u_price ? (\n                    <>\n                      <br />\n                      {`(${item.product.u_price}EA)`}\n                    </>\n                  ) : (\n                    ''\n                  )}\n                </TableCell>\n                <TableCell>\n                  {item.product && ` ${item.product.ws_price_cost}`}\n                  <br />\n                  {item.product &&\n                    `${\n                      item.product.ws_price_cost !== item.product.u_price_cost\n                        ? `(${item.product.u_price_cost}EA)`\n                        : ''\n                    }`}\n                </TableCell>\n                <TableCell>{item.product && item.product.pk}</TableCell>\n\n                <TableCell align=\"center\" className={classes.groupedRowTotals}>\n                  {+item.qtySum.toFixed(2)}\n                </TableCell>\n                <TableCell align=\"right\" className={classes.groupedRowTotals}>\n                  {item.totalSum.toFixed(2)}\n                </TableCell>\n              </TableRow>\n              {item.line_items.map(li => (\n                <TableRow key={`wsli${li.id}`}>\n                  <TableCell colSpan={2} />\n                  <TableCell>\n                    [{li.kind}] {li.vendor}{' '}\n                    {li.data && li.data.product && li.data.product.import_tag\n                      ? li.data.product.import_tag\n                      : li.description}{' '}\n                    {li.OrderId && (\n                      <Link\n                        color=\"primary\"\n                        href=\"\"\n                        onClick={(e: any) => {\n                          e.preventDefault()\n                          props.history.push(`/orders/edit/${li.OrderId}`)\n                        }}\n                      >\n                        Order #{li.OrderId}\n                      </Link>\n                    )}\n                  </TableCell>\n                  <TableCell />\n                  <TableCell />\n                  <TableCell>\n                    {li.kind === 'adjustment'\n                      ? `${li.quantity} EA`\n                      : `${li.quantity} ${li.selected_unit}`}\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {li.data && li.data.product && li.selected_unit === 'EA'\n                      ? +(li.quantity / li.data.product.pk).toFixed(2)\n                      : null}\n                  </TableCell>\n                  <TableCell align=\"right\">{li.total}</TableCell>\n                </TableRow>\n              ))}\n            </React.Fragment>\n          )\n        )}\n\n        <TableRow>\n          <TableCell colSpan={2} align=\"center\">\n            ITEM COUNT\n          </TableCell>\n          <TableCell colSpan={2} align=\"right\">\n            PRODUCT TOTAL\n          </TableCell>\n          <TableCell colSpan={2} align=\"right\">\n            ADJUSTMENTS TOTAL\n          </TableCell>\n          <TableCell\n            colSpan={2}\n            align=\"right\"\n            className={classes.groupedRowTotals}\n          >\n            TOTAL\n          </TableCell>\n        </TableRow>\n        <TableRow>\n          <TableCell colSpan={2} align=\"center\">\n            {Object.keys(lineItemData.groupedLineItems).length}\n          </TableCell>\n          <TableCell colSpan={2} align=\"right\">\n            {lineItemData.productTotal.toFixed(2)}\n          </TableCell>\n          <TableCell colSpan={2} align=\"right\">\n            {lineItemData.adjustmentTotal.toFixed(2)}\n          </TableCell>\n          <TableCell\n            colSpan={2}\n            align=\"right\"\n            className={classes.groupedRowTotals}\n          >\n            {lineItemData.orderTotal.toFixed(2)}\n          </TableCell>\n        </TableRow>\n      </TableBody>\n    </Table>\n  )\n}\n\nexport default withRouter(WholesaleOrderLineItems)\n","import React, { useState, useEffect } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles'\nimport Grid from '@material-ui/core/Grid'\nimport TextField from '@material-ui/core/TextField'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport Snackbar from '@material-ui/core/Snackbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\n\nimport { LineItem } from '../types/Order'\nimport { Product } from '../types/Product'\nimport {\n  WholesaleOrder,\n  WholesaleOrderRouterProps\n} from '../types/WholesaleOrder'\nimport { OrderStatus, ShipmentStatus, PaymentStatus } from '../types/Order'\nimport {\n  API_HOST,\n  ORDER_STATUSES,\n  PAYMENT_STATUSES,\n  SHIPMENT_STATUSES\n} from '../constants'\nimport Loading from '../Loading'\nimport {\n  useWholesaleOrderService,\n  useWholesaleOrderSaveService\n} from './useWholesaleOrderService'\nimport EditMenu from './EditMenu'\nimport WholesaleOrderLineItems from './WholesaleOrderLineItems'\n\nconst token = localStorage && localStorage.getItem('token')\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    vendor: {\n      marginBottom: theme.spacing(2),\n      marginRight: theme.spacing(2)\n    },\n    editMenu: {\n      padding: `${theme.spacing(2)}px 0`,\n      textAlign: 'right'\n    }\n  })\n)\n\nexport interface GroupedItem {\n  qtySum: number\n  totalSum: number\n  product: Product | undefined\n  vendor: string | undefined\n  description: string\n  line_items: LineItem[]\n}\n\nexport interface LineItemData {\n  groupedLineItems: {\n    [key: string]: GroupedItem\n  }\n  orderTotal: number\n  productTotal: number\n  adjustmentTotal: number\n}\n\ninterface EditWholesaleOrderProps {\n  setReloadOrders: React.Dispatch<React.SetStateAction<boolean>>\n}\n\nfunction EditWholesaleOrder(\n  props: EditWholesaleOrderProps &\n    RouteComponentProps<WholesaleOrderRouterProps>\n) {\n  const classes = useStyles()\n\n  const [wholesaleOrderId, setWholesaleOrderId] = useState('')\n  const [wholesaleOrder, setWholesaleOrder] = useState<WholesaleOrder>()\n  const [loading, setLoading] = useState(true)\n  const [doSave, setDoSave] = useState(false)\n  const [reload, setReload] = useState(true)\n\n  const [lineItemData, setLineItemData] = useState<LineItemData>({\n    groupedLineItems: {},\n    productTotal: 0,\n    adjustmentTotal: 0,\n    orderTotal: 0\n  })\n\n  const wholesaleOrderService = useWholesaleOrderService(\n    wholesaleOrderId,\n    setLoading,\n    reload,\n    setReload\n  )\n\n  useEffect(() => {\n    if (wholesaleOrderService.status === 'loaded') {\n      if (wholesaleOrderService.payload) {\n        setWholesaleOrder(wholesaleOrderService.payload)\n      }\n    }\n  }, [wholesaleOrderService, wholesaleOrderId])\n\n  const [snackOpen, setSnackOpen] = React.useState(false)\n  const [snackMsg, setSnackMsg] = React.useState('')\n\n  const handleOrderNotesChange = (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    setWholesaleOrder(prevOrder => {\n      if (prevOrder) {\n        return {\n          ...prevOrder,\n          notes: event.target.value\n        }\n      }\n    })\n  }\n\n  const handleOrderVendorChange = (\n    event: React.ChangeEvent<HTMLInputElement>\n  ) => {\n    setWholesaleOrder(prevOrder => {\n      if (prevOrder) {\n        return {\n          ...prevOrder,\n          vendor: event.target.value\n        }\n      }\n    })\n  }\n\n  const handleStatusChange = (\n    event: React.ChangeEvent<{\n      name?: string | undefined\n      value: unknown\n    }>\n  ) => {\n    setWholesaleOrder(prevOrder => {\n      if (prevOrder) {\n        return {\n          ...prevOrder,\n          status: event.target.value as OrderStatus\n        }\n      }\n    })\n  }\n\n  const handlePaymentStatusChange = (\n    event: React.ChangeEvent<{\n      name?: string | undefined\n      value: unknown\n    }>\n  ) => {\n    setWholesaleOrder(prevOrder => {\n      if (prevOrder) {\n        return {\n          ...prevOrder,\n          payment_status: event.target.value as PaymentStatus\n        }\n      }\n    })\n  }\n\n  const handleShipmentStatusChange = (\n    event: React.ChangeEvent<{\n      name?: string | undefined\n      value: unknown\n    }>\n  ) => {\n    setWholesaleOrder(prevOrder => {\n      if (prevOrder) {\n        return {\n          ...prevOrder,\n          shipment_status: event.target.value as ShipmentStatus\n        }\n      }\n    })\n  }\n\n  const handleSnackClose = (\n    event: React.SyntheticEvent | React.MouseEvent,\n    reason?: string\n  ) => {\n    if (reason === 'clickaway') {\n      return\n    }\n    setSnackOpen(false)\n  }\n\n  const id = props.match.params.id\n\n  useEffect(() => {\n    if (id) {\n      setWholesaleOrderId(id)\n    }\n  }, [id])\n\n  const onSaveBtnClick = (): void => {\n    if (wholesaleOrderId === 'new') {\n      setWholesaleOrder(prevOrder => {\n        if (prevOrder) {\n          return {\n            ...prevOrder,\n            id: 'new'\n          }\n        }\n      })\n    }\n    setDoSave(true)\n    props.setReloadOrders(true)\n  }\n\n  useWholesaleOrderSaveService(\n    wholesaleOrder,\n    doSave,\n    setDoSave,\n    setSnackMsg,\n    setSnackOpen\n  )\n\n  const onDeleteBtnClick = (): void => {\n    wholesaleOrder &&\n      fetch(`${API_HOST}/wholesaleorder`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({ id: wholesaleOrder.id })\n      })\n        .then(response => response.json())\n        .then(response => {\n          if (response.error) {\n            setSnackMsg(response.msg)\n            setSnackOpen(true)\n          } else {\n            props.history.replace('/wholesaleorders')\n          }\n        })\n        .catch(error => {\n          console.warn('delete wholesaleOrder fetch caught err:', error)\n          setSnackMsg(`o noz! ${error}`)\n          setSnackOpen(true)\n        })\n  }\n\n  const saveStreamCSV = (filename: string, text: any) => {\n    // lolol shoutout to https://stackoverflow.com/questions/37095233/downloading-and-saving-data-with-fetch-from-authenticated-rest\n    if (window.navigator.msSaveBlob) {\n      // IE 10 and later, and Edge.\n      const blobObject = new Blob([text], { type: 'text/csv' })\n      window.navigator.msSaveBlob(blobObject, filename)\n    } else {\n      // Everthing else (except old IE).\n      // Create a dummy anchor (with a download attribute) to click.\n      const anchor = document.createElement('a')\n      anchor.download = filename\n      if (window.URL.createObjectURL) {\n        // Everything else new.\n        const blobObject = new Blob([text], { type: 'text/csv' })\n        anchor.href = window.URL.createObjectURL(blobObject)\n      } else {\n        // Fallback for older browsers (limited to 2MB on post-2010 Chrome).\n        // Load up the data into the URI for \"download.\"\n        anchor.href = 'data:text/csv;charset=utf-8,' + encodeURIComponent(text)\n      }\n      // Now, click it.\n      if (document.createEvent) {\n        const event = document.createEvent('MouseEvents')\n        event.initEvent('click', true, true)\n        anchor.dispatchEvent(event)\n      } else {\n        anchor.click()\n      }\n    }\n  }\n\n  const onExportToCsv = (): void => {\n    console.log('handle onExportToCsv wholesaleOrder:', lineItemData)\n  }\n  const onProductsExportToCsv = (): void => {\n    const vendor = wholesaleOrder && wholesaleOrder.vendor\n    if (!vendor) {\n      return\n    }\n    fetch(`${API_HOST}/whosaleorder/exportcsv`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'text/csv',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({\n        lineItemData\n      })\n    })\n      .then(response => response.text())\n      .then(responseText => saveStreamCSV(`${vendor}.csv`, responseText))\n      .catch(error => {\n        console.warn('wholesaleOrder onExportToCsv fetch caught err:', error)\n        setSnackMsg(`o noz! ran into a problem ;(`)\n        setSnackOpen(true)\n      })\n  }\n\n  function valueFor(field: keyof WholesaleOrder) {\n    return wholesaleOrder && wholesaleOrder[field] ? wholesaleOrder[field] : ''\n  }\n\n  return wholesaleOrder ? (\n    <>\n      {loading ? (\n        <Loading />\n      ) : (\n        <>\n          <Grid\n            container\n            spacing={2}\n            direction=\"row\"\n            justify=\"center\"\n            alignItems=\"flex-start\"\n          >\n            <Grid item sm={5}>\n              <TextField\n                className={classes.vendor}\n                label=\"vendor\"\n                fullWidth\n                value={valueFor('vendor')}\n                onChange={handleOrderVendorChange}\n              />\n              <FormControl fullWidth>\n                <InputLabel id=\"order-status-select-label\">status</InputLabel>\n                <Select\n                  labelId=\"order-status-select-label\"\n                  id=\"order-status-select\"\n                  value={valueFor('status')}\n                  onChange={handleStatusChange}\n                >\n                  {Object.keys(ORDER_STATUSES).map(status => (\n                    <MenuItem key={`os-sel-${status}`} value={status}>\n                      {ORDER_STATUSES[status as OrderStatus]}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n              <FormControl fullWidth>\n                <InputLabel id=\"payment-status-select-label\">\n                  payment status\n                </InputLabel>\n                <Select\n                  labelId=\"payment-status-select-label\"\n                  id=\"payment-status-select\"\n                  value={valueFor('payment_status')}\n                  onChange={handlePaymentStatusChange}\n                >\n                  {Object.keys(PAYMENT_STATUSES).map(status => (\n                    <MenuItem key={`ps-sel-${status}`} value={status}>\n                      {PAYMENT_STATUSES[status as PaymentStatus]}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n              <FormControl fullWidth>\n                <InputLabel id=\"shipment-status-select-label\">\n                  shipment status\n                </InputLabel>\n                <Select\n                  labelId=\"shipment-status-select-label\"\n                  id=\"shipment-status-select\"\n                  value={valueFor('shipment_status')}\n                  onChange={handleShipmentStatusChange}\n                >\n                  {Object.keys(SHIPMENT_STATUSES).map(status => (\n                    <MenuItem key={`ship-sel-${status}`} value={status}>\n                      {SHIPMENT_STATUSES[status as ShipmentStatus]}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </Grid>\n            <Grid item sm={7}>\n              <TextField\n                label=\"notes\"\n                multiline\n                fullWidth\n                rows={4}\n                rowsMax={28}\n                value={valueFor('notes')}\n                onChange={handleOrderNotesChange}\n              />\n              <div className={classes.editMenu}>\n                <EditMenu\n                  wholesaleOrder={wholesaleOrder}\n                  onSaveBtnClick={onSaveBtnClick}\n                  onDeleteBtnClick={onDeleteBtnClick}\n                  onExportToCsv={onExportToCsv}\n                  onProductsExportToCsv={onProductsExportToCsv}\n                />\n              </div>\n            </Grid>\n          </Grid>\n          <WholesaleOrderLineItems\n            wholesaleOrder={wholesaleOrder}\n            setReload={setReload}\n            lineItemData={lineItemData}\n            setLineItemData={setLineItemData}\n          />\n        </>\n      )}\n\n      <Snackbar\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center'\n        }}\n        open={snackOpen}\n        autoHideDuration={6000}\n        onClose={handleSnackClose}\n        ContentProps={{\n          'aria-describedby': 'message-id'\n        }}\n        message={<span id=\"message-id\">{snackMsg}</span>}\n        action={[\n          <IconButton key=\"close\" aria-label=\"close\" onClick={handleSnackClose}>\n            <CloseIcon />\n          </IconButton>\n        ]}\n      />\n    </>\n  ) : (\n    <Loading />\n  )\n}\n\nexport default withRouter(EditWholesaleOrder)\n","import React, { useState, useEffect, useCallback, createRef } from 'react'\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles'\nimport { Menu, MenuItem } from '@material-ui/core'\nimport Divider from '@material-ui/core/Divider'\nimport MaterialTable from 'material-table'\n\nimport { LineItem } from '../types/Order'\nimport { API_HOST } from '../constants'\n\nconst token = localStorage && localStorage.getItem('token')\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      maxWidth: '100vw'\n    }\n  })\n)\n\ninterface AddWholesaleOrderLineItemsProps {\n  setReloadOrders: React.Dispatch<React.SetStateAction<boolean>>\n}\n\nfunction AddWholesaleOrderLineItems(props: AddWholesaleOrderLineItemsProps) {\n  const classes = useStyles()\n  let tableRef = createRef<any>()\n\n  const [needsRefresh, setNeedsRefresh] = useState(false)\n  const refreshTable = useCallback(() => {\n    tableRef.current && tableRef.current.onQueryChange()\n    setNeedsRefresh(false)\n  }, [tableRef, setNeedsRefresh])\n\n  const [selectedLineItems, setSelectedLineItems] = useState<string[]>()\n\n  const addAction = {\n    tooltip: 'ADD LINE ITEMS TO ORDER',\n    icon: 'add',\n    onClick: (\n      event: React.MouseEvent<HTMLButtonElement>,\n      data: LineItem | LineItem[]\n    ) => {\n      handleWholesaleOrderMenuOpen(event)\n      if (Array.isArray(data)) {\n        // ain't nobody (tsc) tell me nothin\n        setSelectedLineItems(data.map(li => li.id) as string[])\n      }\n    }\n  }\n\n  useEffect(() => {\n    if (needsRefresh) {\n      refreshTable()\n    }\n  }, [needsRefresh, refreshTable])\n\n  const [wholesaleorderLookup, setWholesaleOrderLookup] = useState<\n    Array<{ id: string; name: string }>\n  >()\n  useEffect(() => {\n    fetch(`${API_HOST}/wholesaleorders`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({ status: ['new', 'needs_review'] })\n    })\n      .then(response => response.json())\n      .then(result =>\n        setWholesaleOrderLookup(\n          result.data.map(\n            (order: { id: string; vendor: string; createdAt: string }) => ({\n              id: order.id,\n              name: `${order.vendor} ${new Date(\n                order.createdAt\n              ).toLocaleDateString()}`\n            })\n          )\n        )\n      )\n      .catch(console.warn)\n  }, [])\n  const [\n    wholesaleorderMenuAnchorEl,\n    setWholesaleOrderMenuAnchorEl\n  ] = React.useState<null | HTMLElement>(null)\n\n  const handleWholesaleOrderMenuOpen = (\n    event: React.MouseEvent<HTMLButtonElement>\n  ) => {\n    setWholesaleOrderMenuAnchorEl(event.currentTarget)\n  }\n\n  const handleWholesaleOrderMenuClose = () => {\n    setSelectedLineItems([])\n    setWholesaleOrderMenuAnchorEl(null)\n  }\n\n  const handleWholesaleOrderSelect = (id: string) => {\n    fetch(`${API_HOST}/wholesaleorder/addlineitems`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({ id, selectedLineItems })\n    })\n      .then(response => response.json())\n      .then(result => {\n        // console.log('update line items result:', result)\n      })\n      .catch(console.warn)\n      .finally(() => {\n        handleWholesaleOrderMenuClose()\n        setNeedsRefresh(true)\n        props.setReloadOrders(true)\n      })\n  }\n\n  return (\n    <div className={classes.root}>\n      <MaterialTable\n        tableRef={tableRef}\n        columns={[\n          {\n            title: 'vendor',\n            field: 'vendor',\n            type: 'string',\n            filterPlaceholder: 'filter'\n          },\n          {\n            title: 'qty',\n            field: 'quantity',\n            type: 'string',\n            filtering: false\n          },\n          { title: 'total', field: 'total', type: 'string', filtering: false },\n          {\n            title: 'product',\n            field: 'data',\n            type: 'string',\n            render: row =>\n              row.data && row.data.product\n                ? `${row.data.product.name} ${row.data.product.description}`\n                : null\n          },\n          { title: 'id', field: 'id', type: 'string', hidden: true },\n          { title: 'OrderId', field: 'OrderId', type: 'string', hidden: true },\n          {\n            title: 'WholesaleOrderId',\n            field: 'WholesaleOrderId',\n            type: 'string',\n            hidden: true\n          }\n        ]}\n        data={query =>\n          new Promise((resolve, reject) => {\n            fetch(`${API_HOST}/wholesaleorders/lineitems`, {\n              method: 'post',\n              headers: {\n                'Content-Type': 'application/json',\n                Authorization: `Bearer ${token}`\n              },\n              body: JSON.stringify(query)\n            })\n              .then(response => response.json())\n              .then(result => {\n                resolve(result)\n              })\n              .catch(err => {\n                console.warn('onoz, caught err:', err)\n                return resolve({ data: [], page: 0, totalCount: 0 })\n              })\n          })\n        }\n        title=\"Line Items\"\n        options={{\n          headerStyle: { position: 'sticky', top: 0 },\n          maxBodyHeight: 'calc(100vh - 121px - 28px)',\n          pageSize: 50,\n          pageSizeOptions: [50, 100, 500],\n          debounceInterval: 750,\n          filtering: true,\n          search: true,\n          emptyRowsWhenPaging: false,\n          selection: true\n        }}\n        actions={[addAction]}\n      />\n\n      <Menu\n        id=\"simple-menu\"\n        anchorEl={wholesaleorderMenuAnchorEl}\n        keepMounted\n        open={Boolean(wholesaleorderMenuAnchorEl)}\n        onClose={handleWholesaleOrderMenuClose}\n      >\n        <MenuItem onClick={() => handleWholesaleOrderSelect('new')}>\n          New wholesale order\n        </MenuItem>\n        <Divider />\n        {wholesaleorderLookup &&\n          wholesaleorderLookup.map(\n            (wholesaleorder: { id: string; name: string }) => (\n              <MenuItem\n                key={`wholesaleorder-sel-${wholesaleorder.id}`}\n                onClick={() => handleWholesaleOrderSelect(wholesaleorder.id)}\n              >\n                {wholesaleorder.name}\n              </MenuItem>\n            )\n          )}\n      </Menu>\n    </div>\n  )\n}\n\nexport default AddWholesaleOrderLineItems\n","import React, { useState, useEffect } from 'react'\nimport { Link, withRouter, RouteComponentProps } from 'react-router-dom'\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles'\nimport MUILink from '@material-ui/core/Link'\nimport Paper from '@material-ui/core/Paper'\nimport Grid from '@material-ui/core/Grid'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport Add from '@material-ui/icons/Add'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Snackbar from '@material-ui/core/Snackbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\nimport Typography from '@material-ui/core/Typography'\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\nimport { connect } from 'react-redux'\nimport { Switch } from 'react-router'\nimport ProtectedRoute from '../auth/ProtectedRoute'\nimport { RootState } from '../redux'\nimport { UserService, UserServiceProps } from '../redux/session/reducers'\nimport EditWholesaleOrder from './EditWholesaleOrder'\nimport { useAllWholesaleOrdersService } from './useWholesaleOrderService'\nimport { WholesaleOrderRouterProps } from '../types/WholesaleOrder'\nimport { WholesaleOrder } from '../types/WholesaleOrder'\n\nimport MuiExpansionPanel from '@material-ui/core/ExpansionPanel'\nimport MuiExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary'\nimport MuiExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails'\nimport { withStyles } from '@material-ui/core/styles'\nimport { OrderStatus } from '../types/Order'\nimport Loading from '../Loading'\nimport { ORDER_STATUSES } from '../constants'\nimport AddWholesaleOrderLineItems from './AddWholesaleOrderLineItems'\n\nconst ExpansionPanel = withStyles({\n  root: {\n    border: '1px solid rgba(0, 0, 0, .125)',\n    boxShadow: 'none',\n    '&:not(:last-child)': {\n      borderBottom: 0\n    },\n    '&:before': {\n      display: 'none'\n    },\n    '&$expanded': {\n      margin: 'auto'\n    }\n  },\n  expanded: {}\n})(MuiExpansionPanel)\n\nconst ExpansionPanelSummary = withStyles({\n  root: {\n    backgroundColor: 'rgba(0, 0, 0, .03)',\n    borderBottom: '1px solid rgba(0, 0, 0, .125)',\n    marginBottom: -1,\n    minHeight: 56,\n    '&$expanded': {\n      minHeight: 56\n    }\n  },\n  content: {\n    '&$expanded': {\n      margin: '12px 0'\n    }\n  },\n  expanded: {}\n})(MuiExpansionPanelSummary)\n\nconst ExpansionPanelDetails = withStyles(theme => ({\n  root: {\n    padding: 0 //theme.spacing(2)\n  }\n}))(MuiExpansionPanelDetails)\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: theme.spacing(2),\n      maxWidth: '100vw',\n      minHeight: '100vh'\n    },\n    title: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      textAlign: 'left',\n      marginLeft: theme.spacing(2),\n      padding: theme.spacing(2)\n    },\n    titleText: {\n      flexGrow: 1\n    },\n    paper: {\n      padding: theme.spacing(2),\n      textAlign: 'center',\n      color: theme.palette.text.secondary,\n      height: '100%'\n    },\n    paperNav: {\n      textAlign: 'center',\n      color: theme.palette.text.secondary,\n      height: '100%'\n    },\n    list: {\n      padding: 0,\n      width: '100%'\n    },\n    selectedListItem: {\n      borderLeft: `${theme.spacing(2)}px solid ${theme.palette.divider}`\n    },\n    noOrdersMsg: {\n      padding: theme.spacing(2)\n    }\n  })\n)\n\ninterface Props {\n  userService?: UserService\n}\n\nfunction WholesaleOrders(\n  props: Props & RouteComponentProps<WholesaleOrderRouterProps>\n) {\n  const classes = useStyles()\n  const { userService } = props\n\n  const [wholesaleOrders, setWholesaleOrders] = useState<WholesaleOrder[]>([])\n  const [reloadOrders, setReloadOrders] = useState(true)\n  const [loading, setLoading] = useState(false)\n  const [selectedStatus, setSelectedStatus] = useState<OrderStatus>('new')\n  const allWholesaleOrders = useAllWholesaleOrdersService(\n    selectedStatus,\n    setLoading,\n    reloadOrders,\n    setReloadOrders\n  )\n\n  useEffect(() => {\n    allWholesaleOrders.status === 'loaded' &&\n      setWholesaleOrders(allWholesaleOrders.payload)\n  }, [allWholesaleOrders])\n\n  const [snackOpen, setSnackOpen] = useState(false)\n  const handleSnackClose = (\n    event: React.SyntheticEvent | React.MouseEvent,\n    reason?: string\n  ) => {\n    if (reason === 'clickaway') {\n      return\n    }\n    setSnackOpen(false)\n  }\n\n  function addWholesaleOrder() {\n    props.history.push('/wholesaleorders/edit/new')\n    setSnackOpen(true)\n  }\n\n  function loadOrdersForStatus(status: OrderStatus, expanded: boolean) {\n    if (expanded) {\n      setSelectedStatus(status)\n      setReloadOrders(true)\n    }\n  }\n\n  let id: string | number | undefined\n  try {\n    id = window.location.pathname.split('/').reverse()[0]\n    if (isNaN(parseInt(id))) {\n      id = undefined\n    }\n  } catch {\n    /* wellfuck */\n  }\n\n  return userService ? (\n    <>\n      <Grid\n        container\n        direction=\"row\"\n        justify=\"space-between\"\n        alignItems=\"stretch\"\n        className={classes.root}\n        spacing={2}\n      >\n        <Grid sm={12} md={3} lg={2} item>\n          <Paper className={classes.paperNav}>\n            <div className={classes.title}>\n              <MUILink\n                color=\"textPrimary\"\n                href=\"\"\n                onClick={(e: any) => {\n                  e.preventDefault()\n                  props.history.push('/wholesaleorders')\n                }}\n                className={classes.titleText}\n              >\n                WHOLESALE ORDERS\n              </MUILink>\n              <IconButton\n                aria-label=\"add wholesale order\"\n                title=\"add wholeslae order\"\n                onClick={() => addWholesaleOrder()}\n              >\n                <Add />\n              </IconButton>\n            </div>\n\n            {Object.keys(ORDER_STATUSES).map(status => (\n              <ExpansionPanel\n                square\n                key={`EP${status}`}\n                defaultExpanded={status === 'new'}\n                expanded={selectedStatus === status}\n                onChange={(event: any, expanded: boolean) =>\n                  loadOrdersForStatus(status as OrderStatus, expanded)\n                }\n              >\n                <ExpansionPanelSummary\n                  expandIcon={<ExpandMoreIcon />}\n                  aria-controls={`panel${status}-content`}\n                  id={`panel${status}-header`}\n                >\n                  <Typography>\n                    {ORDER_STATUSES[status as OrderStatus]}\n                  </Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails>\n                  {loading ? (\n                    <Loading />\n                  ) : (\n                    <List className={classes.list}>\n                      {wholesaleOrders && wholesaleOrders.length ? (\n                        wholesaleOrders.map(\n                          (order: WholesaleOrder, idx: number) => (\n                            <ListItem\n                              button\n                              component={Link}\n                              to={`/wholesaleorders/edit/${order.id}`}\n                              key={`wsorder${idx}`}\n                              className={\n                                // eslint-disable-next-line\n                                id == order.id\n                                  ? classes.selectedListItem\n                                  : undefined\n                              }\n                            >\n                              <ListItemText\n                                primary={order.vendor}\n                                secondary={new Date(\n                                  order.createdAt\n                                ).toLocaleDateString()}\n                              />\n                            </ListItem>\n                          )\n                        )\n                      ) : (\n                        <div className={classes.noOrdersMsg}>\n                          <i>No wholesale orders for this status...</i>\n                        </div>\n                      )}\n                    </List>\n                  )}\n                </ExpansionPanelDetails>\n              </ExpansionPanel>\n            ))}\n          </Paper>\n        </Grid>\n\n        <Grid sm={12} md={9} lg={10} item>\n          <Switch>\n            <ProtectedRoute\n              userService={userService}\n              path=\"/wholesaleorders\"\n              exact\n            >\n              <AddWholesaleOrderLineItems setReloadOrders={setReloadOrders} />\n            </ProtectedRoute>\n            <ProtectedRoute\n              userService={userService}\n              path=\"/wholesaleorders/edit/:id\"\n            >\n              <Paper className={classes.paper}>\n                <EditWholesaleOrder setReloadOrders={setReloadOrders} />\n              </Paper>\n            </ProtectedRoute>\n          </Switch>\n        </Grid>\n      </Grid>\n      <Snackbar\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center'\n        }}\n        open={snackOpen}\n        autoHideDuration={4000}\n        onClose={handleSnackClose}\n        ContentProps={{\n          'aria-describedby': 'message-id'\n        }}\n        message={<span id=\"message-id\">Created new Wholesale Order!</span>}\n        action={[\n          <IconButton key=\"close\" aria-label=\"close\" onClick={handleSnackClose}>\n            <CloseIcon />\n          </IconButton>\n        ]}\n      />\n    </>\n  ) : null\n}\n\nconst mapStateToProps = (states: RootState): UserServiceProps => {\n  return {\n    userService: states.session.userService\n  }\n}\n\nexport default connect(mapStateToProps, undefined)(withRouter(WholesaleOrders))\n","import React, { useState, useEffect } from 'react'\nimport Modal from '@material-ui/core/Modal'\nimport Backdrop from '@material-ui/core/Backdrop'\nimport Fade from '@material-ui/core/Fade'\nimport Button from '@material-ui/core/Button'\nimport TextField from '@material-ui/core/TextField'\nimport Typography from '@material-ui/core/Typography'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport Box from '@material-ui/core/Box'\nimport { makeStyles, Theme, createStyles } from '@material-ui/core/styles'\n\nimport { API_HOST } from '../constants'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    modal: {\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center'\n    },\n    paper: {\n      backgroundColor: theme.palette.background.paper,\n      border: '2px solid #000',\n      boxShadow: theme.shadows[5],\n      padding: theme.spacing(2, 4, 3)\n    }\n  })\n)\n\nconst ROLES = ['admin', 'member', 'guest']\n\nexport default function NewUserModal(props: {\n  open: boolean\n  handleClose: () => void\n  handleRefresh: () => void\n}) {\n  const token = localStorage && localStorage.getItem('token')\n\n  const classes = useStyles()\n\n  const [email, setEmail] = useState('')\n  const [role, setRole] = useState('guest')\n  const [disabled, setDiabled] = useState(false)\n  const [error, setError] = useState('')\n\n  useEffect(() => {\n    if (email && email.includes('@')) {\n      setDiabled(false)\n    } else {\n      setDiabled(true)\n    }\n  }, [email])\n\n  const createUser = () => {\n    if (!email) {\n      setError('type an email!')\n      return\n    } else {\n      setError('')\n    }\n    fetch(`${API_HOST}/user/create`, {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({ email, role })\n    })\n      .then(response => response.json())\n      .then(result => {\n        // console.log('result', result)\n        if (result.error) {\n          return setError(result.msg)\n        } else {\n          props.handleRefresh()\n          props.handleClose()\n        }\n      })\n      .catch(err => {\n        console.warn(err)\n        return setError('o noz! there was an error creating user')\n      })\n      .finally(() => setDiabled(false))\n  }\n\n  return (\n    <div>\n      <Modal\n        aria-labelledby=\"transition-modal-title\"\n        aria-describedby=\"transition-modal-description\"\n        className={classes.modal}\n        open={props.open}\n        onClose={props.handleClose}\n        closeAfterTransition\n        BackdropComponent={Backdrop}\n        BackdropProps={{\n          timeout: 500\n        }}\n      >\n        <Fade in={props.open}>\n          <div className={classes.paper}>\n            <h2>Add New User</h2>\n            <div>\n              <TextField\n                type=\"email\"\n                margin=\"dense\"\n                label=\"email\"\n                placeholder=\"email\"\n                value={email}\n                onChange={(event: any) => setEmail(event.target.value)}\n                autoFocus\n                fullWidth\n              />\n\n              <FormControl fullWidth>\n                <InputLabel id=\"role-select-label\">Role</InputLabel>\n                <Select\n                  labelId=\"role-select-label\"\n                  id=\"role-select\"\n                  margin=\"dense\"\n                  value={role}\n                  onChange={event =>\n                    event.target &&\n                    event.target.value &&\n                    setRole(event.target.value as string)\n                  }\n                >\n                  {ROLES.map(name => (\n                    <MenuItem value={name} key={`role-select${name}`}>\n                      {name}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={createUser}\n                disabled={disabled}\n              >\n                CREATE\n              </Button>\n\n              {error && (\n                <Box color=\"error.main\">\n                  <Typography component=\"p\">{error}</Typography>\n                </Box>\n              )}\n            </div>\n          </div>\n        </Fade>\n      </Modal>\n    </div>\n  )\n}\n","import React from 'react'\nimport { withStyles } from '@material-ui/core/styles'\nimport Button from '@material-ui/core/Button'\nimport Menu, { MenuProps } from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport { User } from '../types/User'\nimport { API_HOST } from '../constants'\n\nconst token = localStorage && localStorage.getItem('token')\n\nconst StyledMenu = withStyles({\n  paper: {\n    border: '1px solid #d3d4d5'\n  }\n})((props: MenuProps) => (\n  <Menu\n    elevation={0}\n    getContentAnchorEl={null}\n    anchorOrigin={{\n      vertical: 'bottom',\n      horizontal: 'center'\n    }}\n    transformOrigin={{\n      vertical: 'top',\n      horizontal: 'center'\n    }}\n    {...props}\n  />\n))\n\nconst StyledMenuItem = withStyles(theme => ({\n  root: {\n    '&:focus': {\n      backgroundColor: theme.palette.primary.main,\n      '& .MuiListItemIcon-root, & .MuiListItemText-primary': {\n        color: theme.palette.common.white\n      }\n    }\n  }\n}))(MenuItem)\n\nexport default function UserRolesMenu(props: {\n  user: User\n  disabled: boolean\n}) {\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null)\n  const [role, setRole] = React.useState(props.user.role || 'none')\n\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget)\n  }\n\n  const handleClose = () => {\n    setAnchorEl(null)\n  }\n\n  const handleRoleChange = (id: string | undefined, role: string) => {\n    if (!id) {\n      return\n    }\n    fetch(`${API_HOST}/user/role`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({ id, role })\n    })\n      .then(response => response.json())\n      .then(resp => {\n        // console.log('resp success!?', resp)\n        handleClose()\n        setRole(role)\n      })\n      .catch(err => console.warn('handleRoleChange caught err:', err))\n  }\n\n  return (\n    <div>\n      <Button\n        aria-controls=\"user-roles-menu\"\n        aria-haspopup=\"true\"\n        variant=\"contained\"\n        color=\"primary\"\n        onClick={handleClick}\n        disabled={props.disabled}\n      >\n        {role}\n      </Button>\n      <StyledMenu\n        id=\"user-roles-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        {/* <StyledMenuItem>\n          <ListItemText\n            primary=\"Superuser\"\n            onClick={() => handleRoleChange(props.user.id, 'superuser')}\n          />\n        </StyledMenuItem> */}\n        <StyledMenuItem>\n          <ListItemText\n            primary=\"admin\"\n            onClick={() => handleRoleChange(props.user.id, 'admin')}\n          />\n        </StyledMenuItem>\n        <StyledMenuItem>\n          <ListItemText\n            primary=\"member\"\n            onClick={() => handleRoleChange(props.user.id, 'member')}\n          />\n        </StyledMenuItem>\n        <StyledMenuItem>\n          <ListItemText\n            primary=\"guest\"\n            onClick={() => handleRoleChange(props.user.id, 'guest')}\n          />\n        </StyledMenuItem>\n      </StyledMenu>\n    </div>\n  )\n}\n","import React, { useState, useEffect, createRef } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles'\nimport MaterialTable, { Action } from 'material-table'\n// import Paper from '@material-ui/core/Paper'\n// import Grid from '@material-ui/core/Grid'\n// import List from '@material-ui/core/List'\n// import ListItem from '@material-ui/core/ListItem'\n// import Add from '@material-ui/icons/Add'\n// import ListItemText from '@material-ui/core/ListItemText'\n// import Divider from '@material-ui/core/Divider'\n// import Snackbar from '@material-ui/core/Snackbar'\n// import IconButton from '@material-ui/core/IconButton'\n// import CloseIcon from '@material-ui/icons/Close'\nimport { connect } from 'react-redux'\n// import { Switch } from 'react-router'\n// import ProtectedRoute from '../auth/ProtectedRoute'\nimport { RootState } from '../redux'\nimport { UserService, UserServiceProps } from '../redux/session/reducers'\n// import { useAllUsersService } from './useUserService'\nimport { UserRouterProps } from '../types/UserRouterProps'\nimport { User } from '../types/User'\nimport NewUserModal from './NewUserModal'\nimport UserRolesMenu from './UserRolesMenu'\nimport { API_HOST } from '../constants'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: theme.spacing(2),\n      maxWidth: '100vw',\n      minHeight: `100vh`\n    }\n  })\n)\n\ninterface Props {\n  userService?: UserService\n}\n\nfunction Users(props: Props & RouteComponentProps<UserRouterProps>) {\n  const classes = useStyles()\n  const { userService } = props\n  const tableRef = createRef<any>()\n\n  console.log('#TODO: deal with userService:', userService)\n\n  const [searchExpanded, setSearchExpanded] = useState(false)\n  const token = localStorage && localStorage.getItem('token')\n  const [newUserModalOpen, setNewUserModalOpen] = useState(false)\n\n  const searchAction = {\n    icon: searchExpanded ? 'zoom_out' : 'search',\n    tooltip: searchExpanded ? 'Close Search' : 'Search',\n    isFreeAction: true,\n    onClick: () => setSearchExpanded(!searchExpanded)\n  }\n\n  const newUserAction = {\n    icon: 'add',\n    tooltip: 'add new user',\n    isFreeAction: true,\n    onClick: () => setNewUserModalOpen(true)\n  }\n\n  const deleteAction = {\n    tooltip: 'Remove User',\n    icon: 'delete',\n    onClick: (e: any, user: User) => {\n      if (\n        userService &&\n        userService.user &&\n        userService.user.email === user.email\n      ) {\n        alert('you cannot delete yrself!')\n      } else {\n        if (!user.id) {\n          return\n        }\n        if (window.confirm(`Are you sure you want to delete ${user.email}?`)) {\n          fetch(`${API_HOST}/user`, {\n            method: 'DELETE',\n            headers: {\n              'Content-Type': 'application/json',\n              Authorization: `Bearer ${token}`\n            },\n            body: JSON.stringify({ id: user.id })\n          })\n            .then(response => response.json())\n            .then(() => tableRef.current && tableRef.current.onQueryChange())\n            .catch(err => console.warn('user deleteAction caught err', err))\n        }\n      }\n    }\n  }\n\n  const [actions, setActions] = useState<Action<any>[]>([\n    searchAction,\n    newUserAction,\n    deleteAction\n  ])\n\n  useEffect(() => {\n    setActions([searchAction, newUserAction, deleteAction])\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [searchExpanded]) // note: adding actions to dep array is not pleasant :/\n\n  return (\n    <div className={classes.root}>\n      <MaterialTable\n        tableRef={tableRef}\n        columns={[\n          {\n            title: 'role',\n            field: 'role',\n            type: 'string',\n            render: row => (\n              <UserRolesMenu\n                user={row as User}\n                disabled={\n                  !!(\n                    userService &&\n                    userService.user &&\n                    userService.user.email === row.email\n                  )\n                }\n              />\n            )\n          },\n          { title: 'email', field: 'email', type: 'string' },\n          {\n            title: 'active',\n            field: 'active',\n            type: 'boolean',\n            filtering: false\n          },\n          {\n            title: 'created',\n            field: 'createdAt',\n            type: 'datetime',\n            filtering: false,\n            render: row => new Date(row.createdAt).toLocaleString()\n          },\n          {\n            title: 'updated',\n            field: 'updatedAt',\n            type: 'datetime',\n            filtering: false,\n            render: row => new Date(row.updatedAt).toLocaleString()\n          },\n          { title: 'id', field: 'id', type: 'string', hidden: true }\n        ]}\n        data={query =>\n          new Promise((resolve, reject) => {\n            fetch(`${API_HOST}/users`, {\n              method: 'post',\n              headers: {\n                'Content-Type': 'application/json',\n                Authorization: `Bearer ${token}`\n              },\n              body: JSON.stringify(query)\n            })\n              .then(response => response.json())\n              .then(result => {\n                resolve(result)\n              })\n              .catch(err => {\n                console.warn(err)\n                return resolve({ data: [], page: 0, totalCount: 0 })\n              })\n          })\n        }\n        title=\"Users\"\n        options={{\n          headerStyle: { position: 'sticky', top: 0 },\n          maxBodyHeight: 'calc(100vh - 121px - 28px)',\n          pageSize: 50,\n          pageSizeOptions: [50, 100, 500],\n          debounceInterval: 750,\n          filtering: true,\n          search: searchExpanded,\n          emptyRowsWhenPaging: false\n        }}\n        actions={actions}\n      />\n\n      <NewUserModal\n        open={newUserModalOpen}\n        handleClose={() => {\n          setNewUserModalOpen(false)\n        }}\n        handleRefresh={() =>\n          tableRef.current && tableRef.current.onQueryChange()\n        }\n      />\n    </div>\n  )\n}\n\nconst mapStateToProps = (states: RootState): UserServiceProps => {\n  return {\n    userService: states.session.userService\n  }\n}\n\nexport default connect(mapStateToProps, undefined)(withRouter(Users))\n","import React, { useState, useEffect, useCallback, createRef } from 'react'\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles'\nimport MaterialTable from 'material-table'\nimport { Chip } from '@material-ui/core'\n// import MoreVertIcon from '@material-ui/icons/MoreVert'\n// import IconButton from '@material-ui/core/IconButton'\n// import Tooltip from '@material-ui/core/Tooltip'\n\nimport { Product } from '../types/Product'\nimport { API_HOST } from '../constants'\n\nconst token = localStorage && localStorage.getItem('token')\n\nconst PROPERTY_MAP: { [index: string]: string } = {\n  a: 'Artificial ingredients',\n  c: 'Low carb',\n  d: 'Dairy free',\n  f: 'Food Service items',\n  g: 'Gluten free',\n  k: 'Kosher',\n  l: 'Low sodium/no salt',\n  m: 'Non-GMO Project Verified',\n  og: 'Organic',\n  r: 'Refined sugar',\n  v: 'Vegan',\n  w: 'Wheat free',\n  ft: 'Fair Trade',\n  n: 'Natural',\n  s: 'Specialty Only',\n  y: 'Yeast free',\n  1: '100% organic',\n  2: '95%+ organic',\n  3: '70%+ organic'\n}\n\nfunction renderCodes(codes: string | undefined) {\n  return (\n    codes &&\n    codes\n      .split(', ')\n      .map((code, idx) =>\n        PROPERTY_MAP[code] ? (\n          <Chip\n            label={PROPERTY_MAP[code]}\n            style={{ margin: 5 }}\n            size=\"small\"\n            key={`pprop${idx}`}\n          />\n        ) : (\n          ''\n        )\n      )\n  )\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: theme.spacing(2),\n      maxWidth: '100vw',\n      minHeight: `100vh`\n    }\n  })\n)\n\nfunction Products() {\n  const classes = useStyles()\n  let tableRef = createRef<any>()\n\n  // ugh, this is needed because tableRef.current is always null inside the deleteAction onClick fn :/\n  const [needsRefresh, setNeedsRefresh] = useState(false)\n  const refreshTable = useCallback(() => {\n    tableRef.current && tableRef.current.onQueryChange()\n    setNeedsRefresh(false)\n  }, [tableRef, setNeedsRefresh])\n\n  const deleteAction = {\n    tooltip: 'destroy all selected products',\n    icon: 'delete',\n    onClick: (e: any, data: Product | Product[]) => {\n      const ids = Array.isArray(data) ? data.map(p => p.id) : [data.id]\n      if (ids.length === 0) {\n        return\n      }\n      if (\n        window.confirm(\n          `are sure you want to destroy these ${ids.length} products?`\n        )\n      ) {\n        fetch(`${API_HOST}/products/destroy`, {\n          method: 'post',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${token}`\n          },\n          body: JSON.stringify({ ids })\n        })\n          .catch(err => console.warn('destroy products caught err:', err))\n          .finally(() => setNeedsRefresh(true))\n      }\n    }\n  }\n\n  useEffect(() => {\n    if (needsRefresh) {\n      refreshTable()\n    }\n  }, [needsRefresh, refreshTable])\n\n  const [categoryLookup, setCategoryLookup] = useState<object>(() => {\n    fetch(`${API_HOST}/categories`)\n      .then(response => response.json())\n      .then(result => setCategoryLookup(result))\n  })\n\n  const [subCategoryLookup, setSubCategoryLookup] = useState<object>(() => {\n    fetch(`${API_HOST}/sub_categories`)\n      .then(response => response.json())\n      .then(result => setSubCategoryLookup(result))\n  })\n\n  const [vendorLookup, setVendorLookup] = useState<object>(() => {\n    fetch(`${API_HOST}/products/vendors`)\n      .then(response => response.json())\n      .then(result => setVendorLookup(result))\n  })\n\n  return (\n    <div className={classes.root}>\n      <MaterialTable\n        tableRef={tableRef}\n        columns={[\n          {\n            title: 'category',\n            field: 'category',\n            type: 'string',\n            lookup: categoryLookup,\n            filterPlaceholder: 'filter'\n          },\n          {\n            title: 'sub category',\n            field: 'sub_category',\n            type: 'string',\n            lookup: subCategoryLookup,\n            filterPlaceholder: 'filter'\n          },\n          {\n            title: 'vendor',\n            field: 'vendor',\n            type: 'string',\n            lookup: vendorLookup,\n            filterPlaceholder: 'filter'\n          },\n          { title: 'name', field: 'name', type: 'string', hidden: true },\n          {\n            title: 'description',\n            field: 'description',\n            type: 'string',\n            filtering: false,\n            render: row => `${row.name} -- ${row.description}`\n          },\n          {\n            title: 'pk',\n            field: 'pk',\n            type: 'numeric',\n            filtering: false\n          },\n          { title: 'size', field: 'size', type: 'string', filtering: false },\n          {\n            title: 'unit type',\n            field: 'unit_type',\n            type: 'string',\n            lookup: { CS: 'Case', EA: 'Each' },\n            filterPlaceholder: 'filter'\n          },\n          {\n            title: 'price',\n            field: 'ws_price',\n            type: 'currency',\n            filtering: false\n          },\n          {\n            title: 'unit price',\n            field: 'u_price',\n            type: 'currency',\n            filtering: false\n          },\n          {\n            title: 'properties',\n            field: 'codes',\n            type: 'string',\n            lookup: PROPERTY_MAP,\n            filterPlaceholder: 'filter',\n            render: row => renderCodes(row.codes)\n          },\n          { title: 'upc', field: 'upc_code', type: 'string', hidden: true },\n          // { title: 'unf', field: 'unf', type: 'string' },\n          { title: 'id', field: 'id', type: 'string', hidden: true }\n        ]}\n        data={query =>\n          new Promise((resolve, reject) => {\n            fetch(`${API_HOST}/products`, {\n              method: 'post',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(query)\n            })\n              .then(response => response.json())\n              .then(result => {\n                resolve(result)\n              })\n              .catch(err => {\n                console.warn('onoz, caught err:', err)\n                return resolve({ data: [], page: 0, totalCount: 0 })\n              })\n          })\n        }\n        title=\"Products\"\n        options={{\n          headerStyle: { position: 'sticky', top: 0 },\n          maxBodyHeight: 'calc(100vh - 121px - 28px)',\n          pageSize: 50,\n          pageSizeOptions: [50, 100, 500],\n          debounceInterval: 750,\n          filtering: true,\n          search: true,\n          emptyRowsWhenPaging: false,\n          selection: true\n        }}\n        actions={[deleteAction]}\n      />\n    </div>\n  )\n}\n\nexport default Products\n","import React, { useState } from 'react'\nimport { makeStyles, Theme, createStyles } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport Grid from '@material-ui/core/Grid'\nimport TextField from '@material-ui/core/TextField'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport FormControl from '@material-ui/core/FormControl'\nimport FormHelperText from '@material-ui/core/FormHelperText'\nimport Select from '@material-ui/core/Select'\nimport Button from '@material-ui/core/Button'\nimport Menu from '@material-ui/core/Menu'\nimport Typography from '@material-ui/core/Typography'\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown'\n\nimport Loading from '../Loading'\nimport { API_HOST } from '../constants'\n\nconst token = localStorage && localStorage.getItem('token')\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      margin: theme.spacing(2),\n      padding: theme.spacing(2)\n    },\n    gridItem: {\n      margin: theme.spacing(2, 0)\n    },\n    vendor: {\n      display: 'flex',\n      alignItems: 'center',\n      margin: theme.spacing(2, 0)\n    }\n  })\n)\n\nexport default function ImportProducts() {\n  const classes = useStyles()\n  const [loading, setLoading] = useState(false)\n  const [vendor, setVendor] = useState('')\n  const [importTag, setImportTag] = useState('')\n  const [prevImportTag, setPrevImportTag] = useState('')\n  const [markup, setMarkup] = useState(0.0)\n  const [formData, setFormData] = useState<FormData>()\n  const [error, setError] = useState('')\n  const [response, setResponse] = useState('')\n\n  const [vendorLookup, setVendorLookup] = useState<object>(() => {\n    fetch(`${API_HOST}/products/vendors`)\n      .then(response => response.json())\n      .then(result => setVendorLookup(result))\n  })\n\n  const [importTagsLookup, setImportTagsLookup] = useState<object>(() => {\n    fetch(`${API_HOST}/products/import_tags`)\n      .then(response => response.json())\n      .then(result => setImportTagsLookup(result))\n  })\n\n  function submitData() {\n    setError('')\n    setResponse('')\n    setLoading(true)\n    if (!formData) {\n      setError('please select a file!')\n      return\n    }\n    formData.delete('vendor')\n    formData.delete('import_tag')\n    formData.delete('prev_import_tag')\n    formData.delete('markup')\n    formData.append('vendor', vendor)\n    formData.append('import_tag', importTag)\n    formData.append('prev_import_tag', prevImportTag)\n    formData.append('markup', `${markup}`)\n\n    fetch(`${API_HOST}/products/upload`, {\n      method: 'POST',\n      headers: {\n        Authorization: `Bearer ${token}`\n      },\n      body: formData\n    })\n      .then(response => response.json())\n      .then(response => {\n        if (response.error) {\n          setError(response.msg)\n        } else {\n          setResponse(response.msg)\n        }\n      })\n      .catch(err => {\n        console.warn('fetch caugher err:', err)\n        setError(err.toString())\n      })\n      .finally(() => setLoading(false))\n  }\n\n  function handleFileChange(event: React.ChangeEvent<HTMLInputElement>) {\n    setLoading(true)\n    if (event.target.files && event.target.files.length) {\n      let data = new FormData()\n      data.append('file', event.target.files[0])\n      setFormData(data)\n      setLoading(false)\n    } else {\n      setFormData(undefined)\n      setLoading(false)\n    }\n  }\n\n  const [\n    vendorMenuAnchorEl,\n    setVendorMenuAnchorEl\n  ] = React.useState<null | HTMLElement>(null)\n\n  const handleVendorMenuOpen = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setVendorMenuAnchorEl(event.currentTarget)\n  }\n\n  const handleVendorMenuClose = () => {\n    setVendorMenuAnchorEl(null)\n  }\n\n  const handleVendorSelect = (vendor: string) => {\n    setVendor(vendor)\n    handleVendorMenuClose()\n  }\n\n  return (\n    <Paper className={classes.root}>\n      <h3>Import Products</h3>\n\n      <Grid\n        container\n        spacing={2}\n        direction=\"row\"\n        justify=\"center\"\n        alignItems=\"flex-start\"\n      >\n        <Grid item sm={4}>\n          <div className={classes.vendor}>\n            <TextField\n              label=\"Vendor\"\n              helperText=\"Required.\"\n              fullWidth\n              value={vendor}\n              onChange={event => setVendor(event.target.value)}\n            />\n\n            <div>\n              <Button\n                aria-controls=\"customized-menu\"\n                aria-haspopup=\"true\"\n                variant=\"contained\"\n                color=\"primary\"\n                size=\"small\"\n                onClick={handleVendorMenuOpen}\n              >\n                <ArrowDropDownIcon />\n              </Button>\n            </div>\n\n            <Menu\n              id=\"simple-menu\"\n              anchorEl={vendorMenuAnchorEl}\n              keepMounted\n              open={Boolean(vendorMenuAnchorEl)}\n              onClose={handleVendorMenuClose}\n            >\n              {vendorLookup &&\n                Object.keys(vendorLookup).map(vendor => (\n                  <MenuItem\n                    key={`vendor-sel-${vendor}`}\n                    onClick={() => handleVendorSelect(vendor)}\n                  >\n                    {vendor}\n                  </MenuItem>\n                ))}\n            </Menu>\n          </div>\n\n          <FormControl fullWidth className={classes.gridItem}>\n            <InputLabel id=\"prev-import-tag-select-label\">\n              Previous Import Tag\n            </InputLabel>\n            <Select\n              labelId=\"prev-import-tag-select-label\"\n              id=\"prev-import-tag-select\"\n              value={prevImportTag}\n              onChange={event =>\n                event.target &&\n                event.target.value &&\n                setPrevImportTag(event.target.value as string)\n              }\n            >\n              {importTagsLookup &&\n                Object.keys(importTagsLookup).map(tag => (\n                  <MenuItem key={`tag-sel-${tag}`} value={tag}>\n                    {tag}\n                  </MenuItem>\n                ))}\n            </Select>\n            <FormHelperText>\n              If updating, products with the tag you select here will first be\n              removed.\n            </FormHelperText>\n          </FormControl>\n          <TextField\n            label=\"Import Tag\"\n            helperText=\"Required. This should be unique.\"\n            fullWidth\n            value={importTag}\n            onChange={event => setImportTag(event.target.value)}\n            className={classes.gridItem}\n          />\n          <TextField\n            label=\"Markup\"\n            helperText=\"Markup percentage. Use decimal format.\"\n            type=\"number\"\n            inputProps={{\n              min: '0',\n              max: '1',\n              step: '0.01'\n            }}\n            fullWidth\n            value={markup}\n            onChange={event =>\n              setMarkup(\n                isNaN(parseFloat(event.target.value))\n                  ? 0.0\n                  : parseFloat(event.target.value)\n              )\n            }\n            className={classes.gridItem}\n          />\n\n          <input\n            type=\"file\"\n            accept=\".csv\"\n            onChange={handleFileChange}\n            disabled={loading}\n            className={classes.gridItem}\n          />\n\n          <div className={classes.gridItem}>\n            <Button\n              disabled={\n                loading || !importTag || !vendor || formData === undefined\n              }\n              onClick={() => submitData()}\n              size=\"large\"\n            >\n              UPLOAD\n            </Button>\n          </div>\n\n          <div className={classes.gridItem}>\n            {loading && <Loading />}\n            {error && (\n              <div className={classes.gridItem}>\n                <h3>Response Error!</h3>\n                <p>{error}</p>\n              </div>\n            )}\n            {response && (\n              <div className={classes.gridItem}>\n                <h3>Response</h3>\n                <p>{response}</p>\n              </div>\n            )}\n          </div>\n        </Grid>\n        <Grid item sm={8}>\n          <Typography variant=\"h6\" gutterBottom>\n            Helpful Information\n          </Typography>\n          <Typography variant=\"body1\" gutterBottom component=\"div\">\n            <dl>\n              <dt>What kind of file should be uploaded?</dt>\n              <dd>Comma separated value files with the extension .csv</dd>\n\n              <dt>What columns will get processed?</dt>\n              <dd>\n                <b>unf</b>, <b>upc_code</b>, <b>name</b>, <b>description</b>,{' '}\n                <b>pk</b>, <b>size</b>, <b>unit_type</b>, <b>ws_price</b>,{' '}\n                <b>u_price</b>, <b>ws_price_markup</b>, <b>u_price_markup</b>,{' '}\n                <b>category</b>, <b>sub_category</b>, <b>codes</b>, <b>a</b>,{' '}\n                <b>r</b>, <b>c</b>, <b>l</b>, <b>d</b>, <b>f</b>, <b>g</b>,{' '}\n                <b>v</b>, <b>w</b>, <b>y</b>, <b>k</b>, <b>ft</b>, <b>m</b>,{' '}\n                <b>s</b>, <b>n</b>, <b>og</b>.\n              </dd>\n\n              <dt>Are any of these optional?</dt>\n              <dd>\n                <b>unf</b>, <b>ws_price_markup</b>, <b>u_price_markup</b>,{' '}\n                <b>category</b>, <b>sub_category</b>, <b>codes</b>, <b>a</b>,{' '}\n                <b>r</b>, <b>c</b>, <b>l</b>, <b>d</b>, <b>f</b>, <b>g</b>,{' '}\n                <b>v</b>, <b>w</b>, <b>y</b>, <b>k</b>, <b>ft</b>, <b>m</b>,{' '}\n                <b>s</b>, <b>n</b>, <b>og</b>.\n              </dd>\n\n              <dt>\n                <b>codes</b> column\n              </dt>\n              <dd>\n                the <b>codes</b> column value can be a comma-separated list of\n                codes. the values that can be entered in this field are any\n                combination of a, r, c, l, d, f, g, v, w, y, k, ft, m, s, n, og,\n                1, 2, 3.\n              </dd>\n\n              <dt>How do the code columns translate?</dt>\n              <dd>\n                The values in the code columns need to be the same as the\n                header. so for example if there's a column <b>a</b> then the\n                value for the fields in the column need to be <i>a</i> (or blank\n                if not appliciable). except for the <b>og</b> column which can\n                have values og, 1, 2, or 3.\n                <br />\n                <br />\n                <table>\n                  <thead>\n                    <tr>\n                      <th>code</th>\n                      <th>translation</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr>\n                      <td>a</td>\n                      <td>Artificial ingredients</td>\n                    </tr>\n                    <tr>\n                      <td>c</td>\n                      <td>Low carb</td>\n                    </tr>\n                    <tr>\n                      <td>d</td>\n                      <td>Dairy free</td>\n                    </tr>\n                    <tr>\n                      <td>f</td>\n                      <td>Food Service items</td>\n                    </tr>\n                    <tr>\n                      <td>g</td>\n                      <td>Gluten free</td>\n                    </tr>\n                    <tr>\n                      <td>k</td>\n                      <td>Kosher</td>\n                    </tr>\n                    <tr>\n                      <td>l</td>\n                      <td>Low sodium/no salt</td>\n                    </tr>\n                    <tr>\n                      <td>m</td>\n                      <td>Non-GMO Project Verified</td>\n                    </tr>\n                    <tr>\n                      <td>r</td>\n                      <td>Refined sugar</td>\n                    </tr>\n                    <tr>\n                      <td>v</td>\n                      <td>Vegan</td>\n                    </tr>\n                    <tr>\n                      <td>w</td>\n                      <td>Wheat free</td>\n                    </tr>\n                    <tr>\n                      <td>ft</td>\n                      <td>Fair Trade</td>\n                    </tr>\n                    <tr>\n                      <td>n</td>\n                      <td>Natural</td>\n                    </tr>\n                    <tr>\n                      <td>s</td>\n                      <td>Specialty Only</td>\n                    </tr>\n                    <tr>\n                      <td>y</td>\n                      <td>Yeast free</td>\n                    </tr>\n                    <tr>\n                      <td>og</td>\n                      <td>Organic</td>\n                    </tr>\n                    <tr>\n                      <td>1</td>\n                      <td>100% organic</td>\n                    </tr>\n                    <tr>\n                      <td>2</td>\n                      <td>95%+ organic</td>\n                    </tr>\n                    <tr>\n                      <td>3</td>\n                      <td>70%+ organic</td>\n                    </tr>\n                  </tbody>\n                </table>\n              </dd>\n\n              <dt>How is markup applied?</dt>\n              <dd>\n                Markup is a percentage in decimal format so 0.10 will markup\n                products by 10%. The formula is: <i>PRICE + (PRICE * MARKUP)</i>{' '}\n                so if the value of <b>ws_price</b> is 10.00 and the markup\n                specified is 0.10 the the markup price will be 11.00.\n                <br />\n                <br />\n                If any rows of the price sheet has a non-empty, non-zero value\n                in the <b>ws_price_markup</b> or <b>u_price_markup</b> then that\n                will be used as the markup price. This means only some rows of\n                the price sheet can contain special markups while the rest of\n                the sheet can have a single markup applied.\n              </dd>\n\n              <dt>Import Tag</dt>\n              <dd>\n                This field is used to track changes to new price sheets that are\n                meant to update products that have already been imported once. A\n                use-case for this is when uploading partial lists of product for\n                a vendor. So for example if a sub-set of products are imported,\n                then a while later a new sheet of products can be imported\n                without having to destroy and re-import all the products for a\n                vendor. If uploading a complete list of all products for a\n                particular vendor then it would be reasonable to use the same\n                value as the Vendor field.\n                <br />\n                <br />\n                <b>NOTE:</b> it can be useful to include the current date in the\n                value for the Import Tag field (or otherwise make this a unique\n                value). When creating wholesale orders it might be useful to\n                know which price sheet a product that was ordered came from.\n                <br />\n                <br />\n                When the Previous Import Tag is specified, products with that\n                tag are first deleted before new products are created.\n              </dd>\n            </dl>\n          </Typography>\n        </Grid>\n      </Grid>\n    </Paper>\n  )\n}\n","import { useEffect, useState } from 'react'\n\nimport { Service } from '../types/Service'\nimport { Order } from '../types/Order'\nimport { API_HOST } from '../constants'\n\nconst token = localStorage && localStorage.getItem('token')\n\nconst useOrderService = (\n  id: string | undefined,\n  setLoading: (value: boolean) => void\n) => {\n  const [result, setResult] = useState<Service<Order>>({\n    status: 'loading'\n  })\n\n  useEffect(() => {\n    if (!id || id.length === 0) {\n      setLoading(false)\n      return\n    }\n\n    fetch(`${API_HOST}/order/edit/${id}`, {\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      }\n    })\n      .then(response => response.json())\n      .then(response => {\n        // console.log('page', response)\n        setResult({ status: 'loaded', payload: response as Order })\n      })\n      .catch(error => {\n        console.warn('useOrderService fetch caught err:', error)\n        setResult({ ...error })\n      })\n      .finally(() => {\n        setLoading(false)\n      })\n  }, [id, setLoading])\n\n  return result\n}\n\n// const useOrderSaveService = (\n//   order: Order | undefined,\n//   doSave: boolean,\n//   setDoSave: (value: boolean) => void,\n//   setSnackMsg: (msg: string) => void,\n//   setSnackOpen: (value: boolean) => void\n// ) => {\n//   const [result, setResult] = useState<Service<Order>>({\n//     status: 'loading'\n//   })\n\n//   useEffect(() => {\n//     if (!doSave || !order) {\n//       setDoSave(false)\n//       return\n//     }\n\n//     console.log('need to save order', order)\n//     setResult({ status: 'error', error: new Error('#TODO') })\n//     fetch(`${API_HOST}/order/create`, {\n//       method: 'POST',\n//       headers: {\n//         'Content-Type': 'application/json',\n//         Authorization: `Bearer ${token}`\n//       },\n//       body: JSON.stringify(order)\n//     })\n//       .then(response => response.json())\n//       .then(response => {\n//         // console.log('usePageSaveService response:', response)\n//         setResult({ status: 'loaded', payload: response as Order })\n//         setSnackMsg(response.msg)\n//         setSnackOpen(true)\n//       })\n//       .catch(error => {\n//         console.warn('usePageSaveService fetch caught err:', error)\n//         setResult({ ...error })\n//         setSnackMsg(`o noz! ${error}`)\n//         setSnackOpen(true)\n//       })\n//       .finally(() => {\n//         setDoSave(false)\n//       })\n//   }, [order, doSave, setDoSave, setSnackMsg, setSnackOpen])\n\n//   return result\n// }\n\nexport { useOrderService }\n","import React, { useEffect } from 'react'\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles'\nimport Table from '@material-ui/core/Table'\nimport TableBody from '@material-ui/core/TableBody'\nimport TableCell from '@material-ui/core/TableCell'\nimport TableHead from '@material-ui/core/TableHead'\nimport TableRow from '@material-ui/core/TableRow'\nimport Paper from '@material-ui/core/Paper'\nimport TextField from '@material-ui/core/TextField'\nimport InputAdornment from '@material-ui/core/InputAdornment'\nimport Select from '@material-ui/core/Select'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport IconButton from '@material-ui/core/IconButton'\nimport ClearIcon from '@material-ui/icons/Clear'\n\nimport { LineItem } from '../types/Order'\nimport { TAX_RATE, TAX_RATE_STRING } from '../constants'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: '100%',\n      overflowX: 'auto',\n      height: '100%'\n    },\n    table: {\n      maxWidth: '95vw',\n      padding: theme.spacing(1),\n      borderCollapse: 'separate',\n      '& td': {\n        border: 'none'\n      }\n    },\n    qtyinput: {\n      width: '50px'\n    }\n  })\n)\n\nfunction usdFormat(num: number | string) {\n  if (num === undefined) {\n    return '0.00'\n  }\n  if (typeof num === 'string') {\n    return `$${parseFloat(num).toFixed(2)}`\n  } else {\n    return `$${num.toFixed(2)}`\n  }\n}\n\nfunction subtotal(items: LineItem[]) {\n  return items\n    .filter(li => li.kind === 'product')\n    .map(({ total }) => (typeof total === 'string' ? parseFloat(total) : total))\n    .reduce((sum, i) => sum + i, 0)\n}\n\nfunction adjustmentsTotal(items: LineItem[]) {\n  return items\n    .filter(li => li.kind === 'adjustment')\n    .map(({ total }) => (typeof total === 'string' ? parseFloat(total) : total))\n    .reduce((sum, i) => sum + i, 0)\n}\n\nfunction liTotal(line_item: LineItem): number {\n  const u_price =\n    line_item.data && line_item.data.product && line_item.data.product.u_price\n      ? parseFloat(line_item.data.product.u_price)\n      : line_item.price\n  const ws_price =\n    line_item.data && line_item.data.product\n      ? parseFloat(line_item.data.product.ws_price)\n      : line_item.price\n\n  return line_item.selected_unit === 'EA' && u_price\n    ? isNaN(line_item.quantity * u_price)\n      ? 0.0\n      : line_item.quantity * u_price\n    : isNaN(line_item.quantity * ws_price)\n    ? 0.0\n    : line_item.quantity * ws_price\n}\n\nfunction liPkSize(line_item: LineItem): string {\n  const pksize = []\n  line_item.data &&\n    line_item.data.product &&\n    line_item.data.product.pk &&\n    line_item.data.product.pk !== 1 &&\n    pksize.push(line_item.data.product.pk)\n  line_item.data &&\n    line_item.data.product &&\n    line_item.data.product.size &&\n    pksize.push(line_item.data.product.size)\n  return pksize.join(' / ')\n}\n\nfunction OrderLineItems(props: {\n  line_items: LineItem[]\n  onLineItemUpdated: (idx: number, line_item: LineItem) => void\n  removeLineItem: (idx: number) => void\n  onTaxesChange: (amount: number) => void\n  onTotalChange: (total: number) => void\n  onSubTotalChange: (subtotal: number) => void\n}) {\n  const classes = useStyles()\n\n  const orderSubtotal = subtotal(props.line_items)\n  const orderAdjustmentsTotal = adjustmentsTotal(props.line_items)\n  const orderTaxes = TAX_RATE * (orderSubtotal + orderAdjustmentsTotal)\n  const orderTotal = orderTaxes + orderSubtotal + orderAdjustmentsTotal\n\n  const { onTaxesChange, onTotalChange, onSubTotalChange } = props\n  useEffect(() => {\n    onTaxesChange(orderTaxes)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [orderTaxes]) // adding onTaxesChange here causes infinite loopz\n\n  useEffect(() => {\n    onTotalChange(orderTotal)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [orderTotal]) // adding onTotalChange causes infinite loopz :/\n\n  useEffect(() => {\n    onSubTotalChange(orderSubtotal)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [orderSubtotal])\n\n  const handleUnitChange = (line_item: LineItem, unit: string) => {\n    line_item.selected_unit = unit\n    if (line_item.data && line_item.data.product) {\n      line_item.price =\n        unit === 'CS'\n          ? +line_item.data.product.ws_price\n          : +line_item.data.product.u_price\n    }\n    line_item.total = liTotal(line_item)\n    const idx = props.line_items.indexOf(line_item)\n    props.onLineItemUpdated(idx, line_item)\n  }\n\n  const handleQtyChange = (line_item: LineItem, quantity: number) => {\n    line_item.quantity = quantity > 0 ? quantity : 1\n    line_item.total = liTotal(line_item)\n    const idx = props.line_items.indexOf(line_item)\n    props.onLineItemUpdated(idx, line_item)\n  }\n\n  const handleDescriptionChange = (\n    line_item: LineItem,\n    description: string\n  ) => {\n    line_item.description = description\n    const idx = props.line_items.indexOf(line_item)\n    props.onLineItemUpdated(idx, line_item)\n  }\n\n  const handlePriceChange = (line_item: LineItem, price: number) => {\n    line_item.price = price\n    line_item.total = liTotal(line_item)\n    const idx = props.line_items.indexOf(line_item)\n    props.onLineItemUpdated(idx, line_item)\n  }\n\n  const removeLineItem = (line_item: LineItem) => {\n    const idx = props.line_items.indexOf(line_item)\n    props.removeLineItem(idx)\n  }\n\n  const adjustments = props.line_items.filter(li => li.kind === 'adjustment')\n  const payments = props.line_items.filter(li => li.kind === 'payment')\n\n  return (\n    <Paper className={classes.root}>\n      <Table className={classes.table} aria-label=\"cart\">\n        <TableHead>\n          <TableRow>\n            <TableCell align=\"center\"></TableCell>\n            <TableCell>Description</TableCell>\n            <TableCell align=\"center\">Price</TableCell>\n            <TableCell align=\"center\">Unit</TableCell>\n            <TableCell align=\"center\">Qty.</TableCell>\n            <TableCell align=\"center\">Total</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {props.line_items.map(\n            (line_item, idx) =>\n              line_item.kind === 'product' && (\n                <TableRow key={`li${idx}`}>\n                  <TableCell align=\"center\">\n                    <Tooltip title=\"remove line item\">\n                      <IconButton\n                        aria-label=\"delete\"\n                        size=\"small\"\n                        onClick={(event: any) => removeLineItem(line_item)}\n                      >\n                        <ClearIcon fontSize=\"inherit\" />\n                      </IconButton>\n                    </Tooltip>\n                  </TableCell>\n                  <TableCell>{line_item.description}</TableCell>\n                  <TableCell align=\"right\">\n                    <div>\n                      {line_item.data &&\n                      line_item.data.product &&\n                      line_item.selected_unit === 'EA' &&\n                      line_item.data.product.u_price\n                        ? usdFormat(line_item.data.product.u_price)\n                        : usdFormat(\n                            line_item.data && line_item.data.product\n                              ? line_item.data.product.ws_price\n                              : line_item.price\n                          )}\n                    </div>\n                    <div>{liPkSize(line_item)}</div>\n                  </TableCell>\n                  <TableCell align=\"center\">\n                    {line_item.data &&\n                    line_item.data.product &&\n                    line_item.data.product.u_price &&\n                    line_item.data.product.u_price !==\n                      line_item.data.product.ws_price ? (\n                      <Select\n                        value={line_item.selected_unit}\n                        onChange={(event: any) =>\n                          handleUnitChange(line_item, event.target.value)\n                        }\n                        margin=\"dense\"\n                      >\n                        <MenuItem value=\"CS\">Case</MenuItem>\n                        <MenuItem value=\"EA\">Each</MenuItem>\n                      </Select>\n                    ) : line_item.data &&\n                      line_item.data.product &&\n                      line_item.data.product.unit_type === 'CS' ? (\n                      'Case'\n                    ) : (\n                      'Each'\n                    )}\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    <TextField\n                      className={classes.qtyinput}\n                      type=\"number\"\n                      InputLabelProps={{\n                        shrink: true\n                      }}\n                      margin=\"dense\"\n                      fullWidth\n                      value={line_item.quantity}\n                      onChange={(event: any) =>\n                        handleQtyChange(line_item, event.target.value)\n                      }\n                      inputProps={{ min: '1', step: '1' }}\n                    />\n                  </TableCell>\n                  <TableCell align=\"right\">\n                    {usdFormat(line_item.total)}\n                  </TableCell>\n                </TableRow>\n              )\n          )}\n          <TableRow>\n            <TableCell rowSpan={1} colSpan={3} />\n            <TableCell align=\"right\">Subtotal</TableCell>\n            <TableCell align=\"center\">\n              {props.line_items && props.line_items.length}\n            </TableCell>\n            <TableCell align=\"right\">{usdFormat(orderSubtotal)}</TableCell>\n          </TableRow>\n          {adjustments.map((line_item, idx) => (\n            <TableRow key={`li${idx}`}>\n              <TableCell align=\"center\">\n                <Tooltip title=\"remove adjustment\">\n                  <IconButton\n                    aria-label=\"delete\"\n                    size=\"small\"\n                    onClick={(event: any) => removeLineItem(line_item)}\n                  >\n                    <ClearIcon fontSize=\"inherit\" />\n                  </IconButton>\n                </Tooltip>\n              </TableCell>\n              <TableCell colSpan={2}>\n                <TextField\n                  type=\"text\"\n                  InputLabelProps={{\n                    shrink: true\n                  }}\n                  margin=\"dense\"\n                  fullWidth\n                  value={line_item.description}\n                  onChange={(event: any) =>\n                    handleDescriptionChange(line_item, event.target.value)\n                  }\n                />\n              </TableCell>\n              <TableCell>\n                <TextField\n                  type=\"number\"\n                  margin=\"dense\"\n                  fullWidth\n                  value={line_item.price || line_item.total}\n                  onChange={(event: any) =>\n                    handlePriceChange(line_item, event.target.value)\n                  }\n                  inputProps={{\n                    min: '-9999',\n                    max: '9999',\n                    step: '1'\n                  }}\n                  InputProps={{\n                    startAdornment: (\n                      <InputAdornment position=\"start\">$</InputAdornment>\n                    )\n                  }}\n                />\n              </TableCell>\n\n              <TableCell align=\"right\">\n                <TextField\n                  className={classes.qtyinput}\n                  type=\"number\"\n                  InputLabelProps={{\n                    shrink: true\n                  }}\n                  margin=\"dense\"\n                  fullWidth\n                  value={line_item.quantity}\n                  onChange={(event: any) =>\n                    handleQtyChange(line_item, event.target.value)\n                  }\n                  inputProps={{ min: '1', step: '1' }}\n                />\n              </TableCell>\n              <TableCell align=\"right\">{usdFormat(line_item.total)}</TableCell>\n            </TableRow>\n          ))}\n\n          <TableRow>\n            <TableCell rowSpan={1} colSpan={3} />\n            <TableCell align=\"right\">Tax</TableCell>\n            <TableCell align=\"center\">{TAX_RATE_STRING}</TableCell>\n            <TableCell align=\"right\">{usdFormat(orderTaxes)}</TableCell>\n          </TableRow>\n\n          {payments.map((line_item, idx) => (\n            <TableRow key={`li${idx}`}>\n              <TableCell align=\"center\">\n                <Tooltip title=\"remove adjustment\">\n                  <IconButton\n                    aria-label=\"delete\"\n                    size=\"small\"\n                    onClick={(event: any) => removeLineItem(line_item)}\n                  >\n                    <ClearIcon fontSize=\"inherit\" />\n                  </IconButton>\n                </Tooltip>\n              </TableCell>\n              <TableCell colSpan={4}>{line_item.description}</TableCell>\n              <TableCell align=\"right\">{usdFormat(line_item.total)}</TableCell>\n            </TableRow>\n          ))}\n\n          <TableRow>\n            <TableCell rowSpan={1} colSpan={3} />\n            <TableCell align=\"right\">Total</TableCell>\n            <TableCell align=\"right\" colSpan={2}>\n              <b>{usdFormat(orderTotal)}</b>\n            </TableCell>\n          </TableRow>\n        </TableBody>\n      </Table>\n    </Paper>\n  )\n}\n\nexport default OrderLineItems\n","import React from 'react'\nimport TextField from '@material-ui/core/TextField'\nimport Autocomplete from '@material-ui/lab/Autocomplete'\nimport CircularProgress from '@material-ui/core/CircularProgress'\n\nimport { Product } from '../types/Product'\nimport { API_HOST } from '../constants'\n\ninterface ProductResponse {\n  data: Product[]\n}\n\ninterface ProductOption {\n  name: string\n  product: Product\n}\n\ninterface LineItemAutocompleteProps {\n  onItemSelected: (value: { name: string; product: Product }) => void\n}\n\nexport default function LineItemAutocomplete(props: LineItemAutocompleteProps) {\n  const [open, setOpen] = React.useState(false)\n  const [options, setOptions] = React.useState<ProductOption[]>([])\n  const [q, setQ] = React.useState('')\n  const [loading, setLoading] = React.useState(open && options.length === 0)\n\n  React.useEffect(() => {\n    let active = true\n\n    if (!loading) {\n      return undefined\n    }\n\n    ;(async () => {\n      const response = await fetch(`${API_HOST}/products`, {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ search: q })\n      })\n\n      const products = (await response.json()) as ProductResponse\n\n      if (active) {\n        setOptions(\n          products.data.map(p => ({\n            name: `${p.name} ${p.description} ${p.pk} ${p.size} $${\n              p.ws_price\n            } ${p.u_price !== p.ws_price ? `($${p.u_price} EA)` : ''}`,\n            product: p\n          }))\n        )\n        setLoading(false)\n      }\n    })()\n\n    return () => {\n      active = false\n    }\n  }, [loading, q])\n\n  React.useEffect(() => {\n    if (!open) {\n      setOptions([])\n    }\n  }, [open])\n\n  function onInputChnage(value: string) {\n    if (value && value.length > 2) {\n      setQ(value)\n      setLoading(true)\n    }\n  }\n\n  return (\n    <Autocomplete\n      id=\"add-line-item-autocomplete\"\n      style={{ width: '100%' }}\n      open={open}\n      onOpen={() => {\n        setOpen(true)\n      }}\n      onClose={() => {\n        setOpen(false)\n      }}\n      getOptionSelected={(option, value) => option.name === value.name}\n      getOptionLabel={option => option.name}\n      onChange={(event, value) => props.onItemSelected(value)}\n      options={options}\n      loading={loading}\n      freeSolo\n      renderInput={params => (\n        <TextField\n          {...params}\n          label=\"Product search\"\n          fullWidth\n          variant=\"outlined\"\n          value={q}\n          onChange={event => onInputChnage(event.target.value)}\n          InputProps={{\n            ...params.InputProps,\n            endAdornment: (\n              <React.Fragment>\n                {loading ? <CircularProgress size={20} /> : null}\n                {params.InputProps.endAdornment}\n              </React.Fragment>\n            )\n          }}\n        />\n      )}\n    />\n  )\n}\n","import React from 'react'\nimport TextField from '@material-ui/core/TextField'\nimport Autocomplete from '@material-ui/lab/Autocomplete'\nimport CircularProgress from '@material-ui/core/CircularProgress'\n\nimport { Member } from '../types/Member'\nimport { API_HOST } from '../constants'\n\nconst token = localStorage && localStorage.getItem('token')\n\ninterface MemberResponse {\n  data: Member[]\n}\n\ninterface MemberOption {\n  name: string\n  member: Member\n}\n\ninterface MemberAutocompleteProps {\n  onItemSelected: (value: { name: string; member: Member }) => void\n}\n\nexport default function MemberAutocomplete(props: MemberAutocompleteProps) {\n  const [open, setOpen] = React.useState(false)\n  const [options, setOptions] = React.useState<MemberOption[]>([])\n  const [q, setQ] = React.useState('')\n  const [loading, setLoading] = React.useState(open && options.length === 0)\n\n  React.useEffect(() => {\n    let active = true\n\n    if (!loading) {\n      return undefined\n    }\n\n    ;(async () => {\n      const response = await fetch(`${API_HOST}/members`, {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({ search: q })\n      })\n\n      const members = (await response.json()) as MemberResponse\n      if (active) {\n        setOptions(\n          members.data.map(p => ({\n            name: `${p.name} ${\n              p.User && p.User.email ? p.User.email : p.registration_email\n            }`,\n            member: p\n          }))\n        )\n        setLoading(false)\n      }\n    })()\n\n    return () => {\n      active = false\n    }\n  }, [loading, q])\n\n  React.useEffect(() => {\n    if (!open) {\n      setOptions([])\n    }\n  }, [open])\n\n  function onInputChnage(value: string) {\n    if (value && value.length > 2) {\n      setQ(value)\n      setLoading(true)\n    }\n  }\n\n  return (\n    <Autocomplete\n      id=\"add-line-item-autocomplete\"\n      style={{ width: '100%' }}\n      open={open}\n      onOpen={() => {\n        setOpen(true)\n      }}\n      onClose={() => {\n        setOpen(false)\n      }}\n      getOptionSelected={(option, value) => option.name === value.name}\n      getOptionLabel={option => option.name}\n      onChange={(event, value) => props.onItemSelected(value)}\n      options={options}\n      loading={loading}\n      freeSolo\n      renderInput={params => (\n        <TextField\n          {...params}\n          label=\"Member search\"\n          fullWidth\n          autoFocus\n          variant=\"outlined\"\n          value={q}\n          onChange={event => onInputChnage(event.target.value)}\n          InputProps={{\n            ...params.InputProps,\n            endAdornment: (\n              <React.Fragment>\n                {loading ? <CircularProgress size={20} /> : null}\n                {params.InputProps.endAdornment}\n              </React.Fragment>\n            )\n          }}\n        />\n      )}\n    />\n  )\n}\n","import React, { useState, useEffect } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport TextField from '@material-ui/core/TextField'\nimport Grid from '@material-ui/core/Grid'\nimport Button from '@material-ui/core/Button'\nimport Snackbar from '@material-ui/core/Snackbar'\nimport IconButton from '@material-ui/core/IconButton'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport Typography from '@material-ui/core/Typography'\nimport CloseIcon from '@material-ui/icons/Close'\nimport AddIcon from '@material-ui/icons/Add'\nimport ClearIcon from '@material-ui/icons/Clear'\nimport PeopleIcon from '@material-ui/icons/People'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport FormControl from '@material-ui/core/FormControl'\nimport Select from '@material-ui/core/Select'\nimport Box from '@material-ui/core/Box'\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles'\n\nimport { RootState } from '../redux'\nimport { UserService, UserServiceProps } from '../redux/session/reducers'\nimport Loading from '../Loading'\nimport { useOrderService } from './useOrderService'\nimport {\n  Order,\n  OrderRouterProps,\n  OrderStatus,\n  ShipmentStatus,\n  PaymentStatus\n} from '../types/Order'\nimport { LineItem } from '../types/Order'\nimport OrderLineItems from './OrderLineItems'\nimport LineItemAutocomplete from './LineItemAutocomplete'\nimport MemberAutocomplete from './MemberAutocomplete'\nimport { Product } from '../types/Product'\nimport { Member } from '../types/Member'\nimport {\n  API_HOST,\n  ORDER_STATUSES,\n  PAYMENT_STATUSES,\n  SHIPMENT_STATUSES,\n  TAX_RATE_STRING\n} from '../constants'\n\nconst blankOrder: Order = {\n  id: 'new',\n  status: 'new',\n  payment_status: 'balance_due',\n  shipment_status: 'backorder',\n  total: 0.0,\n  item_count: 0,\n  subtotal: 0,\n  name: '',\n  email: '',\n  phone: '',\n  address: '',\n  notes: '',\n  createdAt: '',\n  updatedAt: '',\n  OrderLineItems: []\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: theme.spacing(2),\n      maxWidth: '100vw',\n      minHeight: `calc(100vh - 64px)`\n    },\n    form: {\n      marginBottom: theme.spacing(4)\n    },\n    formInput: {\n      display: 'block',\n      marginBottom: theme.spacing(2)\n    },\n    status: {\n      marginBottom: theme.spacing(2)\n    },\n    liHeader: {\n      display: 'inline-block',\n      marginRight: theme.spacing(2)\n    },\n    sticky: {\n      [theme.breakpoints.up('md')]: {\n        position: 'sticky',\n        top: '72px'\n      }\n    }\n  })\n)\n\ninterface EditOrderProps {\n  userService?: UserService\n}\n\nfunction EditOrder(\n  props: EditOrderProps & RouteComponentProps<OrderRouterProps>\n) {\n  const classes = useStyles()\n\n  const token = localStorage && localStorage.getItem('token')\n\n  const [orderId, setOrderId] = useState('')\n  const [loading, setLoading] = useState(true)\n  const [order, setOrder] = useState<Order>(blankOrder)\n  const [saving, setSaving] = useState(false)\n  const [showLiAutocomplete, setShowLiAutocomplete] = useState(false)\n  const [showMemberAutocomplete, setShowMemberAutocomplete] = useState(false)\n  const [snackOpen, setSnackOpen] = React.useState(false)\n  const [snackMsg, setSnackMsg] = React.useState('')\n  const [needToCheckForDiscounts, setNeedToCheckForDiscounts] = useState(true)\n  const [canApplyMemberDiscount, setCanApplyMemberDiscount] = useState(false)\n  const orderService = useOrderService(orderId, setLoading)\n\n  useEffect(() => {\n    if (orderService.status === 'loaded') {\n      if (orderService.payload) {\n        const _order = orderService.payload\n        if (\n          _order.Member &&\n          _order.Member.discount &&\n          _order.Member.discount > 0\n        ) {\n          setCanApplyMemberDiscount(true)\n        }\n        setOrder(_order)\n      }\n    }\n  }, [orderService])\n\n  const pOrderId = props.match.params.id\n\n  useEffect(() => {\n    if (pOrderId && pOrderId !== 'new') {\n      setOrderId(pOrderId)\n    }\n  }, [pOrderId])\n\n  useEffect(() => {\n    if (\n      order &&\n      !order.UserId &&\n      props.userService &&\n      props.userService.user &&\n      props.userService.user.id\n    ) {\n      const UserId = props.userService.user.id\n      UserId &&\n        setOrder(prevOrder => ({\n          ...prevOrder,\n          UserId\n        }))\n    }\n  }, [props.userService, order])\n\n  useEffect(() => {\n    if (!needToCheckForDiscounts || !order) {\n      setNeedToCheckForDiscounts(false)\n      return\n    }\n    if (order && order.OrderLineItems && canApplyMemberDiscount) {\n      const discountAmt = order.OrderLineItems.map(li => {\n        let canDiscount = false\n        if (li.data && li.data.product && li.selected_unit === 'CS') {\n          canDiscount =\n            li.data.product.ws_price !== li.data.product.ws_price_cost\n        } else if (li.data && li.data.product && li.selected_unit === 'EA') {\n          canDiscount = li.data.product.u_price !== li.data.product.u_price_cost\n        }\n        if (canDiscount && li.data && li.data.product) {\n          const price =\n            li.selected_unit === 'CS'\n              ? parseFloat(li.data.product.ws_price_cost)\n              : parseFloat(li.data.product.u_price_cost)\n\n          return +(li.total - price * li.quantity).toFixed(2)\n        } else {\n          return 0\n        }\n      }).reduce((acc, v) => acc + v, 0)\n\n      if (discountAmt > 0) {\n        const discountPrice = -discountAmt.toFixed(2)\n        const discounts = order.OrderLineItems.filter(\n          li => li.kind === 'adjustment' && li.description === 'member discount'\n        )\n        if (discounts[0]) {\n          if (discounts[0].total !== discountPrice) {\n            const idx = order.OrderLineItems.indexOf(discounts[0])\n            updateLineItem(idx, {\n              ...discounts[0],\n              price: discountPrice,\n              total: discountPrice\n            })\n          }\n        } else {\n          const adjustment: LineItem = {\n            description: 'member discount',\n            quantity: 1,\n            price: discountPrice,\n            total: discountPrice,\n            kind: 'adjustment'\n          }\n          setOrder(prevOrder => ({\n            ...prevOrder,\n            OrderLineItems: [...prevOrder.OrderLineItems, adjustment]\n          }))\n        }\n      }\n    }\n\n    setNeedToCheckForDiscounts(false)\n  }, [needToCheckForDiscounts, order, canApplyMemberDiscount])\n\n  const handleSnackClose = (\n    event: React.SyntheticEvent | React.MouseEvent,\n    reason?: string\n  ) => {\n    if (reason === 'clickaway') {\n      return\n    }\n    setSnackOpen(false)\n  }\n\n  function onAddLineitem(value: { name: string; product: Product }) {\n    if (!value) {\n      return\n    }\n    const { product } = value\n    if (value && value.name && product) {\n      const lineItem: LineItem = {\n        description: `${product.name} ${product.description}`,\n        quantity: 1,\n        selected_unit: 'CS',\n        price: parseFloat(product.ws_price),\n        total: parseFloat(product.ws_price),\n        kind: 'product',\n        vendor: product.vendor,\n        data: { product }\n      }\n      setOrder(order => ({\n        ...order,\n        item_count:\n          order.OrderLineItems.filter(li => li.kind === 'product').length + 1,\n        OrderLineItems: [...order.OrderLineItems, lineItem]\n      }))\n      setNeedToCheckForDiscounts(true)\n    }\n  }\n\n  function updateLineItem(idx: number, line_item: LineItem) {\n    setOrder(prevOrder => {\n      let orderLineItems = prevOrder.OrderLineItems\n      orderLineItems.splice(idx, 1, line_item)\n\n      return {\n        ...prevOrder,\n        OrderLineItems: orderLineItems\n      }\n    })\n  }\n  function onLineItemUpdated(idx: number, line_item: LineItem) {\n    updateLineItem(idx, line_item)\n    setNeedToCheckForDiscounts(true)\n  }\n  function removeLineItem(idx: number) {\n    if (idx > -1) {\n      const li = order.OrderLineItems[idx]\n      if (li.kind === 'adjustment' && li.description === 'member discount') {\n        setCanApplyMemberDiscount(false)\n      }\n    }\n    setOrder(prevOrder => {\n      const orderLineItems = prevOrder.OrderLineItems\n      orderLineItems.splice(idx, 1)\n      const item_count = orderLineItems.filter(li => li.kind === 'product')\n        .length\n      return {\n        ...prevOrder,\n        item_count,\n        OrderLineItems: orderLineItems\n      }\n    })\n  }\n\n  function createAdjustment(event: any) {\n    const adjustment: LineItem = {\n      description: 'new adjustment',\n      quantity: 1,\n      price: 0.0,\n      total: 0.0,\n      kind: 'adjustment'\n    }\n    setOrder(prevOrder => ({\n      ...prevOrder,\n      OrderLineItems: [...prevOrder.OrderLineItems, adjustment]\n    }))\n  }\n\n  function onMembertemSelected(value?: { name: string; member: Member }) {\n    if (value && value.member) {\n      const { id, name, phone, address } = value.member // email\n      const email =\n        value.member.User && value.member.User.email\n          ? value.member.User.email\n          : value.member.registration_email\n      setOrder(prevOrder => ({\n        ...prevOrder,\n        name: name || '',\n        email: email || '',\n        phone: phone || '',\n        address: address || '',\n        MemberId: id\n      }))\n      setShowMemberAutocomplete(false)\n    }\n  }\n\n  const onSaveBtnClick = (): void => {\n    setSaving(true)\n    const path =\n      orderId && orderId !== 'new' ? '/order/update' : '/order/create'\n    fetch(`${API_HOST}${path}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify(order)\n    })\n      .then(response => response.json())\n      .then(response => {\n        if (response.success) {\n          setSnackOpen(true)\n          setSnackMsg('Saved order!')\n          if (response.order.id && (!orderId || orderId === 'new')) {\n            props.history.replace(`/orders/edit/${response.order.id}`)\n          }\n        }\n      })\n      .finally(() => setSaving(false))\n  }\n\n  function onTaxesChange(tax: number) {\n    console.log('onTaxesChange tax:', tax)\n    setOrder(prevOrder => {\n      const notTaxLineItems = prevOrder.OrderLineItems.filter(\n        li => li.kind !== 'tax'\n      )\n\n      return {\n        ...prevOrder,\n        OrderLineItems: [\n          ...notTaxLineItems,\n          {\n            kind: 'tax',\n            description: `tax ${TAX_RATE_STRING}`,\n            quantity: 1,\n            price: tax,\n            total: tax\n          }\n        ]\n      }\n    })\n  }\n\n  function onSubTotalChange(subtotal: number) {\n    setOrder(prevOrder => ({\n      ...prevOrder,\n      subtotal\n    }))\n  }\n\n  function onTotalChange(total: number) {\n    setOrder(prevOrder => ({\n      ...prevOrder,\n      total\n    }))\n  }\n\n  function valueFor(field: keyof Order) {\n    return order && order[field] ? order[field] : ''\n  }\n\n  const handleStatusChange = (\n    event: React.ChangeEvent<{\n      name?: string | undefined\n      value: unknown\n    }>\n  ) => {\n    setOrder(prevOrder => ({\n      ...prevOrder,\n      status: event.target.value as OrderStatus\n    }))\n  }\n\n  const handlePaymentStatusChange = (\n    event: React.ChangeEvent<{\n      name?: string | undefined\n      value: unknown\n    }>\n  ) => {\n    setOrder(prevOrder => ({\n      ...prevOrder,\n      payment_status: event.target.value as PaymentStatus\n    }))\n  }\n\n  const handleShipmentStatusChange = (\n    event: React.ChangeEvent<{\n      name?: string | undefined\n      value: unknown\n    }>\n  ) => {\n    setOrder(prevOrder => ({\n      ...prevOrder,\n      shipment_status: event.target.value as ShipmentStatus\n    }))\n  }\n\n  const shouldShowAddMemberDiscount =\n    !canApplyMemberDiscount ||\n    (order &&\n      order.OrderLineItems.filter(li => li.description === 'member discount')\n        .length === 0)\n\n  return (\n    <div className={classes.root}>\n      {loading ? (\n        <Loading />\n      ) : (\n        <Grid\n          container\n          spacing={2}\n          direction=\"row\"\n          justify=\"center\"\n          alignItems=\"flex-start\"\n        >\n          <Grid item sm={12} md={4} className={classes.sticky}>\n            {showMemberAutocomplete ? (\n              <div style={{ display: 'flex' }}>\n                <Tooltip title=\"close\">\n                  <IconButton\n                    aria-label=\"close\"\n                    onClick={() => setShowMemberAutocomplete(false)}\n                  >\n                    <ClearIcon fontSize=\"inherit\" />\n                  </IconButton>\n                </Tooltip>\n                <MemberAutocomplete onItemSelected={onMembertemSelected} />\n              </div>\n            ) : (\n              <div\n                style={{\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'center',\n                  minHeight: '54px'\n                }}\n              >\n                <div>\n                  <Tooltip title=\"BACK TO ORDERS\">\n                    <IconButton\n                      aria-label=\"back to orders\"\n                      onClick={() => props.history.push('/orders')}\n                    >\n                      <ArrowBackIcon />\n                    </IconButton>\n                  </Tooltip>\n\n                  <h2 style={{ display: 'inline' }}>\n                    {orderId && orderId !== 'new' ? (\n                      <>\n                        EDIT ORDER <i>#{order.id}</i>\n                      </>\n                    ) : (\n                      'CREATE ORDER'\n                    )}\n                  </h2>\n                </div>\n                <div>\n                  <Tooltip title=\"ADD USER DETAILS\">\n                    <IconButton\n                      aria-label=\"add user details\"\n                      onClick={() => setShowMemberAutocomplete(true)}\n                    >\n                      <PeopleIcon />\n                    </IconButton>\n                  </Tooltip>\n                </div>\n              </div>\n            )}\n\n            {order.status !== 'new' && order.status !== 'needs_review' && (\n              <Box color=\"error.main\">\n                <Typography variant=\"overline\" display=\"block\">\n                  ohey!\n                </Typography>\n                <Typography variant=\"body1\" display=\"block\" gutterBottom>\n                  this order status is not \"new\" or \"needs review\" so making\n                  changes might not be great...\n                </Typography>\n              </Box>\n            )}\n            {order.Member && (\n              <Box color=\"info.main\">\n                <Typography variant=\"overline\" display=\"block\" gutterBottom>\n                  Member has discount {order.Member.discount}\n                </Typography>\n              </Box>\n            )}\n            <form className={classes.form} noValidate autoComplete=\"off\">\n              <TextField\n                label=\"name\"\n                type=\"text\"\n                className={classes.formInput}\n                fullWidth\n                value={order.name}\n                onChange={(event: any) => {\n                  event.persist()\n                  setOrder(order => ({ ...order, name: event.target.value }))\n                }}\n              />\n              <TextField\n                label=\"email\"\n                type=\"email\"\n                className={classes.formInput}\n                fullWidth\n                value={order.email}\n                onChange={(event: any) => {\n                  event.persist()\n                  setOrder(order => ({ ...order, email: event.target.value }))\n                }}\n              />\n              <TextField\n                label=\"phone\"\n                type=\"phone\"\n                className={classes.formInput}\n                fullWidth\n                value={order.phone}\n                onChange={(event: any) => {\n                  event.persist()\n                  setOrder(order => ({ ...order, phone: event.target.value }))\n                }}\n              />\n              <TextField\n                label=\"address\"\n                type=\"text\"\n                className={classes.formInput}\n                fullWidth\n                value={order.address}\n                onChange={(event: any) => {\n                  event.persist()\n                  setOrder(order => ({ ...order, address: event.target.value }))\n                }}\n              />\n              <TextField\n                label=\"notes\"\n                className={classes.formInput}\n                multiline\n                rowsMax=\"20\"\n                fullWidth\n                value={order.notes}\n                onChange={(event: any) => {\n                  event.persist()\n                  setOrder(order => ({ ...order, notes: event.target.value }))\n                }}\n              />\n\n              <FormControl fullWidth className={classes.status}>\n                <InputLabel id=\"order-status-select-label\">status</InputLabel>\n                <Select\n                  labelId=\"order-status-select-label\"\n                  id=\"order-status-select\"\n                  value={valueFor('status')}\n                  onChange={handleStatusChange}\n                >\n                  {Object.keys(ORDER_STATUSES).map(status => (\n                    <MenuItem key={`os-sel-${status}`} value={status}>\n                      {ORDER_STATUSES[status as OrderStatus]}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n              <FormControl fullWidth className={classes.status}>\n                <InputLabel id=\"payment-status-select-label\">\n                  payment status\n                </InputLabel>\n                <Select\n                  labelId=\"payment-status-select-label\"\n                  id=\"payment-status-select\"\n                  value={valueFor('payment_status')}\n                  onChange={handlePaymentStatusChange}\n                >\n                  {Object.keys(PAYMENT_STATUSES).map(status => (\n                    <MenuItem key={`ps-sel-${status}`} value={status}>\n                      {PAYMENT_STATUSES[status as PaymentStatus]}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n              <FormControl fullWidth className={classes.status}>\n                <InputLabel id=\"shipment-status-select-label\">\n                  shipment status\n                </InputLabel>\n                <Select\n                  labelId=\"shipment-status-select-label\"\n                  id=\"shipment-status-select\"\n                  value={valueFor('shipment_status')}\n                  onChange={handleShipmentStatusChange}\n                >\n                  {Object.keys(SHIPMENT_STATUSES).map(status => (\n                    <MenuItem key={`ship-sel-${status}`} value={status}>\n                      {SHIPMENT_STATUSES[status as ShipmentStatus]}\n                    </MenuItem>\n                  ))}\n                </Select>\n              </FormControl>\n            </form>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={onSaveBtnClick}\n              disabled={saving}\n            >\n              Save\n            </Button>\n          </Grid>\n          <Grid item sm={12} md={8}>\n            <div>\n              {showLiAutocomplete ? (\n                <div style={{ display: 'flex' }}>\n                  <Tooltip title=\"close\">\n                    <IconButton\n                      aria-label=\"close\"\n                      onClick={() => setShowLiAutocomplete(false)}\n                    >\n                      <ClearIcon fontSize=\"inherit\" />\n                    </IconButton>\n                  </Tooltip>\n                  <LineItemAutocomplete onItemSelected={onAddLineitem} />\n                </div>\n              ) : (\n                <>\n                  <Button\n                    aria-label=\"add line items\"\n                    size=\"large\"\n                    onClick={() => setShowLiAutocomplete(true)}\n                  >\n                    <AddIcon />\n                    LINE ITEMS\n                  </Button>\n\n                  <Button\n                    aria-label=\"add adjustment\"\n                    size=\"large\"\n                    onClick={createAdjustment}\n                  >\n                    <AddIcon />\n                    ADJUSTMENT\n                  </Button>\n\n                  {shouldShowAddMemberDiscount && (\n                    <Button\n                      aria-label=\"add member discount\"\n                      size=\"large\"\n                      onClick={() => {\n                        setCanApplyMemberDiscount(true)\n                        setNeedToCheckForDiscounts(true)\n                      }}\n                    >\n                      <AddIcon />\n                      MEMBER DISCOUNT\n                    </Button>\n                  )}\n                </>\n              )}\n            </div>\n            <OrderLineItems\n              line_items={order.OrderLineItems}\n              onLineItemUpdated={onLineItemUpdated}\n              removeLineItem={removeLineItem}\n              onTaxesChange={onTaxesChange}\n              onTotalChange={onTotalChange}\n              onSubTotalChange={onSubTotalChange}\n            />\n          </Grid>\n        </Grid>\n      )}\n      <Snackbar\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center'\n        }}\n        open={snackOpen}\n        autoHideDuration={6000}\n        onClose={handleSnackClose}\n        ContentProps={{\n          'aria-describedby': 'message-id'\n        }}\n        message={<span id=\"message-id\">{snackMsg}</span>}\n        action={[\n          <IconButton key=\"close\" aria-label=\"close\" onClick={handleSnackClose}>\n            <CloseIcon />\n          </IconButton>\n        ]}\n      />\n    </div>\n  )\n}\n\nconst mapStateToProps = (states: RootState): UserServiceProps => {\n  return {\n    userService: states.session.userService\n  }\n}\n\nexport default connect(mapStateToProps, undefined)(withRouter(EditOrder))\n","import React, { createRef } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles'\nimport MaterialTable from 'material-table'\n\nimport { MemberRouterProps } from '../types/Member'\nimport { Member } from '../types/Member'\nimport { API_HOST } from '../constants'\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      padding: theme.spacing(2),\n      maxWidth: '100vw',\n      minHeight: '100vh'\n    }\n  })\n)\n\nfunction Members(props: RouteComponentProps<MemberRouterProps>) {\n  const classes = useStyles()\n  const tableRef = createRef<any>()\n\n  const token = localStorage && localStorage.getItem('token')\n\n  const newMemberAction = {\n    icon: 'add',\n    tooltip: 'add new member',\n    isFreeAction: true,\n    onClick: () => props.history.push('/members/new')\n  }\n\n  const deleteAction = {\n    tooltip: 'Remove Member',\n    icon: 'delete',\n    onClick: (e: any, member: Member | Member[]) => {\n      let members: Member[]\n      if (Array.isArray(member)) {\n        members = member\n      } else {\n        members = [member]\n      }\n\n      if (!members || members.length === 0) {\n        return\n      }\n      const id = members[0].id\n      if (window.confirm(`Are you sure you want to delete this member?`)) {\n        fetch(`${API_HOST}/member`, {\n          method: 'DELETE',\n          headers: {\n            'Content-Type': 'application/json',\n            Authorization: `Bearer ${token}`\n          },\n          body: JSON.stringify({ id })\n        })\n          .then(response => response.json())\n          .then(() => tableRef.current && tableRef.current.onQueryChange())\n          .catch(err => console.warn('members deleteAction caught err', err))\n      }\n    }\n  }\n\n  const editAction = {\n    icon: 'edit',\n    tooltip: 'edit member',\n    onClick: (e: any, members: Member | Member[]) => {\n      let member: Member\n      if (Array.isArray(members)) {\n        member = members[0]\n      } else {\n        member = members\n      }\n      member.id && props.history.push(`/members/${member.id}`)\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      <MaterialTable\n        tableRef={tableRef}\n        columns={[\n          {\n            title: 'created',\n            field: 'createdAt',\n            type: 'datetime',\n            filtering: false,\n            render: row =>\n              row.createdAt && new Date(row.createdAt).toLocaleString()\n          },\n          {\n            title: 'registration email',\n            field: 'registration_email',\n            type: 'string',\n            filtering: false\n          },\n          { title: 'name', field: 'name', type: 'string', filtering: false },\n          { title: 'phone', field: 'phone', type: 'string', filtering: false },\n          {\n            title: 'address',\n            field: 'address',\n            type: 'string',\n            filtering: false\n          },\n          { title: 'discount', field: 'discount', type: 'string' },\n          { title: 'discount type', field: 'discount_type', type: 'string' },\n          { title: 'fees paid', field: 'fees_paid', type: 'string' },\n          { title: 'store credit', field: 'store_credit', type: 'string' },\n          { title: 'shares', field: 'shares', type: 'string' },\n          { title: 'type', field: 'member_type', type: 'string' },\n\n          {\n            title: 'updated',\n            field: 'updatedAt',\n            type: 'datetime',\n            hidden: true\n          },\n          { title: 'id', field: 'id', type: 'string', hidden: true }\n        ]}\n        data={query =>\n          new Promise((resolve, reject) => {\n            fetch(`${API_HOST}/members`, {\n              method: 'post',\n              headers: {\n                'Content-Type': 'application/json',\n                Authorization: `Bearer ${token}`\n              },\n              body: JSON.stringify(query)\n            })\n              .then(response => response.json())\n              .then(result => {\n                resolve(result)\n              })\n              .catch(err => {\n                console.warn(err)\n                return resolve({ data: [], page: 0, totalCount: 0 })\n              })\n          })\n        }\n        title=\"Members\"\n        options={{\n          headerStyle: { position: 'sticky', top: 0 },\n          maxBodyHeight: 'calc(100vh - 121px - 28px)',\n          pageSize: 50,\n          pageSizeOptions: [50, 100, 500],\n          debounceInterval: 750,\n          filtering: true,\n          search: true,\n          emptyRowsWhenPaging: false\n        }}\n        actions={[newMemberAction, deleteAction, editAction]}\n      />\n    </div>\n  )\n}\n\nexport default withRouter(Members)\n","import React, { useState, useEffect } from 'react'\nimport { withRouter, RouteComponentProps } from 'react-router-dom'\nimport { makeStyles, Theme, createStyles } from '@material-ui/core'\nimport Paper from '@material-ui/core/Paper'\nimport Grid from '@material-ui/core/Grid'\nimport TextField from '@material-ui/core/TextField'\nimport InputLabel from '@material-ui/core/InputLabel'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport FormControl from '@material-ui/core/FormControl'\n// import FormHelperText from '@material-ui/core/FormHelperText'\nimport Select from '@material-ui/core/Select'\nimport Button from '@material-ui/core/Button'\nimport IconButton from '@material-ui/core/IconButton'\nimport Tooltip from '@material-ui/core/Tooltip'\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack'\n\n// import Menu from '@material-ui/core/Menu'\n// import ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown'\nimport { Member, MemberRouterProps } from '../types/Member'\n\nimport Loading from '../Loading'\nimport { API_HOST } from '../constants'\n\nconst token = localStorage && localStorage.getItem('token')\n\nconst blankMember: Member = {\n  id: 'new',\n  registration_email: '',\n  name: '',\n  phone: '',\n  address: '',\n  discount: 0,\n  discount_type: '',\n  fees_paid: 0,\n  store_credit: 0,\n  shares: 0,\n  member_type: '',\n  data: {}\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      margin: theme.spacing(2),\n      padding: theme.spacing(2)\n    },\n    gridItem: {\n      margin: theme.spacing(2, 0)\n    },\n    sticky: {\n      [theme.breakpoints.up('sm')]: {\n        position: 'sticky',\n        top: '0'\n      },\n      zIndex: 1,\n      backgroundColor: theme.palette.background.paper\n    }\n  })\n)\n\nfunction EditMember(props: RouteComponentProps<MemberRouterProps>) {\n  const classes = useStyles()\n  const [loadingMember, setLoadingMember] = useState(true)\n  const [loading, setLoading] = useState(false)\n\n  const [error, setError] = useState('')\n  const [response, setResponse] = useState('')\n  const memberId = props.match.params.id\n\n  const [member, setMember] = useState<Member>(blankMember)\n\n  useEffect(() => {\n    if (!memberId || memberId === 'undefined') {\n      return\n    }\n\n    if (memberId === 'new') {\n      setMember(blankMember)\n      setLoadingMember(false)\n    } else {\n      fetch(`${API_HOST}/members`, {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        },\n        body: JSON.stringify({\n          filters: [\n            {\n              column: {\n                field: 'id'\n              },\n              value: memberId\n            }\n          ]\n        })\n      })\n        .then(response => response.json())\n        .then(response => {\n          // console.log('zomfg response:', response)\n          setMember(response.data[0] as Member)\n        })\n        .catch(err => setMember(blankMember))\n        .finally(() => setLoadingMember(false))\n    }\n  }, [memberId])\n\n  function submitData() {\n    setError('')\n    setResponse('')\n    setLoading(true)\n\n    const path = memberId === 'new' ? '/create' : '/update'\n\n    fetch(`${API_HOST}/member${path}`, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      },\n      body: JSON.stringify({ member })\n    })\n      .then(response => response.json())\n      .then(response => {\n        if (response.error) {\n          setError(response.msg)\n        } else {\n          setResponse(response.msg)\n        }\n      })\n      .catch(err => {\n        console.warn('fetch caugher err:', err)\n        setError(err.toString())\n      })\n      .finally(() => setLoading(false))\n  }\n\n  return (\n    <Paper className={classes.root}>\n      {loadingMember ? (\n        <Loading />\n      ) : (\n        <Grid\n          container\n          spacing={2}\n          direction=\"row\"\n          justify=\"center\"\n          alignItems=\"flex-start\"\n        >\n          <Grid item sm={6}>\n            <div\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                minHeight: '54px'\n              }}\n              className={classes.sticky}\n            >\n              <Tooltip title=\"BACK TO MEMBERS\">\n                <IconButton\n                  aria-label=\"back to members\"\n                  onClick={() => props.history.push('/members')}\n                >\n                  <ArrowBackIcon />\n                </IconButton>\n              </Tooltip>\n\n              <h2>{memberId === 'new' ? 'Create' : 'Edit'} Member</h2>\n            </div>\n\n            <TextField\n              label=\"email\"\n              fullWidth\n              value={member.registration_email}\n              className={classes.gridItem}\n              onChange={(\n                event: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>\n              ) => {\n                event.persist()\n                setMember(prevMember => ({\n                  ...prevMember,\n                  registration_email: event.target.value\n                }))\n              }}\n            />\n            <TextField\n              label=\"name\"\n              fullWidth\n              value={member.name}\n              className={classes.gridItem}\n              onChange={event => {\n                event.persist()\n                setMember(prevMember => ({\n                  ...prevMember,\n                  name: event.target.value\n                }))\n              }}\n            />\n            <TextField\n              label=\"phone\"\n              fullWidth\n              value={member.phone}\n              className={classes.gridItem}\n              onChange={event => {\n                event.persist()\n                setMember(prevMember => ({\n                  ...prevMember,\n                  phone: event.target.value\n                }))\n              }}\n            />\n            <TextField\n              label=\"address\"\n              fullWidth\n              value={member.address}\n              className={classes.gridItem}\n              onChange={event => {\n                event.persist()\n                setMember(prevMember => ({\n                  ...prevMember,\n                  address: event.target.value\n                }))\n              }}\n            />\n            <TextField\n              label=\"discount\"\n              fullWidth\n              value={member.discount}\n              type=\"number\"\n              className={classes.gridItem}\n              onChange={event => {\n                event.persist()\n                setMember(prevMember => ({\n                  ...prevMember,\n                  discount: parseFloat(event.target.value)\n                }))\n              }}\n            />\n            <TextField\n              label=\"discount type\"\n              fullWidth\n              value={member.discount_type}\n              className={classes.gridItem}\n              onChange={event => {\n                event.persist()\n                setMember(prevMember => ({\n                  ...prevMember,\n                  discount_type: event.target.value\n                }))\n              }}\n            />\n\n            <TextField\n              label=\"fees paid\"\n              fullWidth\n              value={member.fees_paid}\n              type=\"number\"\n              className={classes.gridItem}\n              onChange={event => {\n                event.persist()\n                setMember(prevMember => ({\n                  ...prevMember,\n                  fees_paid: parseFloat(event.target.value)\n                }))\n              }}\n            />\n\n            <TextField\n              label=\"store credit\"\n              fullWidth\n              value={member.store_credit}\n              className={classes.gridItem}\n              type=\"number\"\n              onChange={event => {\n                event.persist()\n                setMember(prevMember => ({\n                  ...prevMember,\n                  store_credit: parseFloat(event.target.value)\n                }))\n              }}\n            />\n            <TextField\n              label=\"shares\"\n              fullWidth\n              value={member.shares}\n              className={classes.gridItem}\n              type=\"number\"\n              onChange={event => {\n                event.persist()\n                setMember(prevMember => ({\n                  ...prevMember,\n                  shares: parseFloat(event.target.value)\n                }))\n              }}\n            />\n\n            <FormControl fullWidth className={classes.gridItem}>\n              <InputLabel id=\"prev-import-tag-select-label\">Type</InputLabel>\n              <Select\n                labelId=\"prev-import-tag-select-label\"\n                id=\"prev-import-tag-select\"\n                value={member.member_type}\n                onChange={event =>\n                  event.target &&\n                  event.target.value &&\n                  setMember(prevMember => ({\n                    ...prevMember,\n                    member_type: event.target.value as string\n                  }))\n                }\n              >\n                <MenuItem value=\"consumer-owners\">consumer-owner</MenuItem>\n                <MenuItem value=\"worker-owners\">worker-owner</MenuItem>\n                <MenuItem value=\"producer-owners\">producer owner</MenuItem>\n              </Select>\n            </FormControl>\n\n            <div className={classes.gridItem}>\n              <Button\n                disabled={loading}\n                onClick={() => submitData()}\n                size=\"large\"\n              >\n                {memberId === 'new' ? 'CREATE' : 'SAVE'}\n              </Button>\n            </div>\n          </Grid>\n\n          <Grid item sm={6} className={classes.sticky}>\n            {loading && <Loading />}\n            {error && (\n              <div className={classes.gridItem}>\n                <h3>Response Error!</h3>\n                <p>{error}</p>\n              </div>\n            )}\n            {response && (\n              <div className={classes.gridItem}>\n                <h3>Response</h3>\n                <p>{response}</p>\n              </div>\n            )}\n          </Grid>\n        </Grid>\n      )}\n    </Paper>\n  )\n}\n\nexport default withRouter(EditMember)\n","import React, { useState, useEffect } from 'react'\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { ThunkDispatch } from 'redux-thunk'\nimport clsx from 'clsx'\n\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport Drawer from '@material-ui/core/Drawer'\nimport List from '@material-ui/core/List'\nimport Divider from '@material-ui/core/Divider'\nimport IconButton from '@material-ui/core/IconButton'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport TagFaces from '@material-ui/icons/TagFaces'\nimport { createStyles, Theme, makeStyles } from '@material-ui/core/styles'\n\nimport { mainListItems } from './listItems' // secondaryListItems\n\nimport { RootState } from './redux'\nimport { UserServiceProps } from './redux/session/reducers'\nimport { checkSession, logout } from './redux/session/actions'\n\nimport { PreferencesServiceProps } from './redux/preferences/reducers'\nimport { getPreferences } from './redux/preferences/actions'\n\nimport Loading from './Loading'\nimport Dashboard from './dashboard/Dashboard'\nimport Login from './auth/Login'\nimport Register from './auth/Register'\nimport ProtectedRoute from './auth/ProtectedRoute'\nimport UserMenu from './auth/UserMenu'\nimport Pages from './pages/Pages'\nimport Orders from './orders/Orders'\nimport WholesaleOrders from './wholesaleorders/WholesaleOrders'\nimport Users from './users/Users'\nimport Products from './products/Products'\nimport ImportProducts from './products/ImportProducts'\nimport EditOrder from './orders/EditOrder'\nimport Members from './members/Members'\nimport EditMember from './members/EditMember'\nimport { APP_VERSION } from './constants'\n\nconst drawerWidth = 240\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      minHeight: '100vh'\n    },\n    nav: {\n      zIndex: theme.zIndex.drawer + 1,\n      display: 'flex',\n      height: '36px',\n      alignItems: 'center',\n      marginLeft: '2px',\n      position: 'fixed',\n      top: 0,\n      left: 0\n    },\n    drawer: {\n      width: drawerWidth,\n      flexShrink: 0\n    },\n    drawerPaper: {\n      width: drawerWidth\n    },\n    version: {\n      fontStyle: 'italic',\n      fontSize: '0.8em',\n      flexGrow: 1,\n      alignSelf: 'center',\n      flexDirection: 'column',\n      display: 'flex',\n      justifyContent: 'flex-end'\n    },\n    content: {\n      // flexGrow: 1\n    }\n  })\n)\n\ninterface DispatchProps {\n  checkSession: () => void\n  getPreferences: () => void\n  logout: () => void\n}\n\ntype Props = UserServiceProps & PreferencesServiceProps & DispatchProps\n\nconst App: React.FC<Props> = (props: Props) => {\n  const [loading, setLoading] = useState(true)\n\n  // checkSession is destructured from props and passed into useEffect\n  // which is a bit confusing since checkSession is also imported. ah scope.\n  const {\n    checkSession,\n    userService,\n    getPreferences\n    // ,preferencesService\n  } = props\n\n  useEffect(() => {\n    getPreferences()\n  }, [getPreferences])\n\n  useEffect(() => {\n    checkSession()\n  }, [checkSession])\n\n  useEffect(() => {\n    // console.log(\n    //   'userService fx.. userService.isFetching:',\n    //   !userService.isFetching && !!userService.user,\n    //   'userService:',\n    //   userService\n    // )\n    !userService.isFetching && userService.user && setLoading(false)\n    setOpen(userService.isFetching && !!userService.user)\n  }, [userService])\n\n  const classes = useStyles()\n  const [open, setOpen] = React.useState(true)\n\n  // #TODO: move this. i guess.\n  // console.log(preferencesService)\n\n  return (\n    <Router>\n      <div className={classes.root}>\n        <CssBaseline />\n        <div className={classes.nav}>\n          {userService.user && userService.user.role === 'admin' ? (\n            <IconButton\n              edge=\"start\"\n              aria-label=\"open drawer\"\n              onClick={() => setOpen(true)}\n            >\n              <MenuIcon />\n            </IconButton>\n          ) : (\n            <UserMenu />\n          )}\n        </div>\n\n        {userService && userService.user && userService.user.email && (\n          <Drawer\n            classes={{\n              paper: clsx(classes.drawerPaper)\n            }}\n            onClose={() => setOpen(false)}\n            open={open}\n          >\n            <List onClick={() => setOpen(false)}>{mainListItems}</List>\n\n            <Divider />\n            <ListItem button onClick={() => props.logout()}>\n              <ListItemIcon>\n                <TagFaces />\n              </ListItemIcon>\n              <ListItemText primary=\"log out\" />\n            </ListItem>\n\n            {/* <List>{secondaryListItems}</List>  */}\n            <div className={classes.version}>\n              <span>{APP_VERSION}</span>\n            </div>\n          </Drawer>\n        )}\n\n        <main className={classes.content}>\n          {/* ROUTER */}\n\n          {loading ? (\n            <Loading />\n          ) : (\n            <Switch>\n              <Route path=\"/login\" component={Login} />\n              <Route path=\"/register\" component={Register} />\n              <ProtectedRoute\n                userService={userService}\n                path=\"/products\"\n                component={Products}\n                exact\n              />\n              <ProtectedRoute\n                userService={userService}\n                path=\"/products/import\"\n                component={ImportProducts}\n              />\n              <ProtectedRoute\n                userService={userService}\n                path=\"/orders\"\n                exact\n                component={Orders}\n              />\n              <ProtectedRoute\n                userService={userService}\n                path=\"/orders/edit/:id\"\n                component={EditOrder}\n              />\n              <ProtectedRoute\n                userService={userService}\n                path=\"/orders/create\"\n                component={EditOrder}\n              />\n              <ProtectedRoute\n                userService={userService}\n                path=\"/wholesaleorders\"\n                component={WholesaleOrders}\n              />\n              <ProtectedRoute\n                userService={userService}\n                path=\"/users\"\n                component={Users}\n              />\n              <ProtectedRoute\n                userService={userService}\n                path=\"/members\"\n                component={Members}\n                exact\n              />\n              <ProtectedRoute\n                userService={userService}\n                path=\"/members/:id\"\n                component={EditMember}\n              />\n              <ProtectedRoute\n                userService={userService}\n                path=\"/pages\"\n                component={Pages}\n              />\n              <ProtectedRoute\n                userService={userService}\n                path=\"/\"\n                component={Dashboard}\n              />\n            </Switch>\n          )}\n\n          {/* <Box pt={4}>FOOT'r</Box> */}\n        </main>\n      </div>\n    </Router>\n  )\n}\n\nconst mapStateToProps = (\n  states: RootState\n): UserServiceProps & PreferencesServiceProps => {\n  return {\n    userService: states.session.userService,\n    preferencesService: states.preferences.preferencesService\n  }\n}\n\nconst mapDispatchToProps = (\n  dispatch: ThunkDispatch<{}, {}, any>\n): DispatchProps => {\n  return {\n    checkSession: () => dispatch(checkSession()),\n    getPreferences: () => dispatch(getPreferences()),\n    logout: () => dispatch(logout())\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App)\n","import red from '@material-ui/core/colors/red'\nimport { createMuiTheme } from '@material-ui/core/styles'\n\n// A custom theme for this app\nconst theme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    primary: {\n      main: '#556cd6'\n    },\n    secondary: {\n      main: '#FF4081'\n    },\n    error: {\n      main: red.A400\n    }\n    // background: {\n    //   default: '#fff',\n    // },\n  }\n})\n\nexport default theme\n","import { combineReducers } from 'redux'\n\nimport { Action } from './actions'\nimport { User, LoginError } from '../../types/User'\n\nexport interface UserService {\n  isFetching: boolean\n  user?: User\n  error?: LoginError\n}\n\nexport interface UserServiceProps {\n  userService: UserService\n}\n\nconst userService = (\n  state: UserService = { isFetching: false },\n  action: Action\n): UserService => {\n  switch (action.type) {\n    case 'SET':\n      return { ...state, user: action.user, error: undefined }\n    case 'SET_FETCHING':\n      return {\n        ...state,\n        isFetching: action.isFetching\n      }\n    case 'SET_ERROR':\n      return { ...state, user: undefined, error: action.error }\n  }\n  return state\n}\n\nexport default combineReducers<UserServiceProps>({\n  userService\n})\n","import { combineReducers } from 'redux'\n\nimport { Action } from './actions'\nimport { Preferences, PreferencesError } from '../../types/Preferences'\n\nexport interface PreferencesService {\n  isFetching: boolean\n  preferences?: Preferences\n  error?: PreferencesError\n}\n\nexport interface PreferencesServiceProps {\n  preferencesService: PreferencesService\n}\n\nconst preferencesService = (\n  state: PreferencesService = { isFetching: false },\n  action: Action\n): PreferencesService => {\n  switch (action.type) {\n    case 'SET_PREFERENCES':\n      return { ...state, preferences: action.preferences, error: undefined }\n    case 'SET_FETCHING_PREFERENCES':\n      return {\n        ...state,\n        isFetching: action.isFetching\n      }\n    case 'SET_ERROR_PREFERENCES':\n      return { ...state, preferences: undefined, error: action.error }\n  }\n  return state\n}\n\nexport default combineReducers<PreferencesServiceProps>({\n  preferencesService\n})\n","import { createStore, combineReducers, applyMiddleware } from 'redux'\nimport thunk from 'redux-thunk'\nimport session, { UserServiceProps } from './session/reducers'\nimport preferences, { PreferencesServiceProps } from './preferences/reducers'\n\nexport interface RootState {\n  session: UserServiceProps\n  preferences: PreferencesServiceProps\n}\n\nexport default createStore(\n  combineReducers<RootState>({\n    session,\n    preferences\n  }),\n  applyMiddleware(thunk)\n)\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport { ThemeProvider } from '@material-ui/core/styles'\nimport { Provider } from 'react-redux'\n\nimport App from './App'\nimport theme from './theme'\nimport store from './redux'\n\nReactDOM.render(\n  <Provider store={store}>\n    <ThemeProvider theme={theme}>\n      {/* CssBaseline kickstart an elegant, consistent, and simple baseline to build upon. */}\n      <CssBaseline />\n      <App />\n    </ThemeProvider>\n  </Provider>,\n  document.querySelector('#root')\n)\n"],"sourceRoot":""}