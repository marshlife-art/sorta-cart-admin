(this["webpackJsonpsorta-cart-admin"]=this["webpackJsonpsorta-cart-admin"]||[]).push([[0],{458:function(e){e.exports=JSON.parse('{"name":"sorta-cart-admin","version":"0.1.0","private":true,"homepage":"https://admin.marshcoop.org/","repository":"github:marshlife-art/sorta-cart-admin","scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","eject":"react-scripts eject","predeploy":"npm run build && cp CNAME build/","deploy":"gh-pages -d build"},"dependencies":{"@bugsnag/js":"^6.5.0","@bugsnag/plugin-react":"^6.5.0","@material-ui/core":"latest","@material-ui/icons":"^4.5.1","@material-ui/lab":"^4.0.0-alpha.36","date-fns":"^2.16.1","json2csv":"^4.5.4","material-table":"^1.54.2","react":"latest","react-dom":"latest","react-markdown":"^5.0.3","react-redux":"^7.1.3","react-router-dom":"^5.1.2","react-scripts":"^4.0.1","redux":"^4.0.5","redux-logger":"^3.0.6","redux-thunk":"^2.3.0","remark-gfm":"^1.0.0","typescript":"latest"},"devDependencies":{"@types/react":"latest","@types/react-dom":"latest","@types/react-redux":"^7.1.5","@types/react-router-dom":"^5.1.3","@types/redux-logger":"^3.0.7","@types/node":"13.1.2","@types/redux-mock-store":"^1.0.1","fake-indexeddb":"^3.0.0","gh-pages":"^2.1.1","redux-mock-store":"^1.5.4"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]}}')},614:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=n.n(r),i=n(21),s=n.n(i),o=n(407),l=n.n(o),d=n(408),u=n.n(d),j=n(41),b=n(63),h=n(411),p=n(8),O=Object(b.c)({userService:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET":return Object(p.a)(Object(p.a)({},e),{},{user:t.user,error:void 0});case"SET_FETCHING":return Object(p.a)(Object(p.a)({},e),{},{isFetching:t.isFetching});case"SET_ERROR":return Object(p.a)(Object(p.a)({},e),{},{user:void 0,error:t.error})}return e}}),m=Object(b.c)({preferencesService:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PREFERENCES":return Object(p.a)(Object(p.a)({},e),{},{preferences:t.preferences,error:void 0});case"SET_FETCHING_PREFERENCES":return Object(p.a)(Object(p.a)({},e),{},{isFetching:t.isFetching});case"SET_ERROR_PREFERENCES":return Object(p.a)(Object(p.a)({},e),{},{preferences:void 0,error:t.error})}return e}}),f=Object(b.e)(Object(b.c)({session:O,preferences:m}),Object(b.a)(h.a)),x=n(7),g=n(26),v=n(33),y=n(3),S=n(650),w=n(657),k=n(89),C=n(625),_=n(658),I=n(659),N=n(662),T=n(428),E=n.n(T),A=n(616),F=n(641),P=n(356),L=n(429),R=n.n(L),z=n(357),W=n(375),D=n(237),M=n.n(D),B=n(152),q=Object(B.a)({palette:{type:"dark",primary:{main:"#556cd6"},secondary:{main:"#FF4081"},error:{main:M.a.A400}}}),H=Object(B.a)({palette:{type:"light",primary:{main:"#556cd6"},secondary:{main:"#FF4081"},error:{main:M.a.A400}}}),U=n(642),J=n(412),$=n.n(J),K=n(413),G=n.n(K),V=n(417),Q=n.n(V),Y=n(419),X=n.n(Y),Z=n(240),ee=n.n(Z),te=n(259),ne=n.n(te),ce=n(418),re=n.n(ce),ae=n(414),ie=n.n(ae),se=n(161),oe=n.n(se),le=n(415),de=n.n(le),ue=n(416),je=n.n(ue),be=n(420),he=n.n(be),pe=Object(c.jsxs)("div",{children:[Object(c.jsxs)(A.a,{button:!0,component:g.b,to:"/",children:[Object(c.jsx)(F.a,{children:Object(c.jsx)($.a,{})}),Object(c.jsx)(P.a,{primary:"Dashboard"})]}),Object(c.jsxs)(A.a,{button:!0,component:g.b,to:"/products",children:[Object(c.jsx)(F.a,{children:Object(c.jsx)(G.a,{})}),Object(c.jsx)(P.a,{primary:"Products"})]}),Object(c.jsxs)(A.a,{button:!0,component:g.b,to:"/products/import",children:[Object(c.jsx)(F.a,{children:Object(c.jsx)(ie.a,{})}),Object(c.jsx)(P.a,{primary:"Import Products"})]}),Object(c.jsxs)(A.a,{button:!0,component:g.b,to:"/products/onhand",children:[Object(c.jsx)(F.a,{children:Object(c.jsx)(de.a,{})}),Object(c.jsx)(P.a,{primary:"Stock On Hand"})]}),Object(c.jsxs)(A.a,{button:!0,component:g.b,to:"/products/addstock",children:[Object(c.jsx)(F.a,{children:Object(c.jsx)(je.a,{})}),Object(c.jsx)(P.a,{primary:"Add Stock"})]}),Object(c.jsxs)(A.a,{button:!0,component:g.b,to:"/orders",children:[Object(c.jsx)(F.a,{children:Object(c.jsx)(Q.a,{})}),Object(c.jsx)(P.a,{primary:"Orders"})]}),Object(c.jsxs)(A.a,{button:!0,component:g.b,to:"/wholesaleorders",children:[Object(c.jsx)(F.a,{children:Object(c.jsx)(re.a,{})}),Object(c.jsx)(P.a,{primary:"Wholesale Orders"})]}),Object(c.jsxs)(A.a,{button:!0,component:g.b,to:"/users",children:[Object(c.jsx)(F.a,{children:Object(c.jsx)(X.a,{})}),Object(c.jsx)(P.a,{primary:"Users"})]}),Object(c.jsxs)(A.a,{button:!0,component:g.b,to:"/members",children:[Object(c.jsx)(F.a,{children:Object(c.jsx)(ee.a,{})}),Object(c.jsx)(P.a,{primary:"Members"})]}),Object(c.jsxs)(A.a,{button:!0,component:g.b,to:"/storecredits",children:[Object(c.jsx)(F.a,{children:Object(c.jsx)(oe.a,{})}),Object(c.jsx)(P.a,{primary:"Store Credits"})]}),Object(c.jsxs)(A.a,{button:!0,component:g.b,to:"/announcements",children:[Object(c.jsx)(F.a,{children:Object(c.jsx)(he.a,{})}),Object(c.jsx)(P.a,{primary:"Announcements"})]})]}),Oe=(U.a,A.a,F.a,ne.a,P.a,A.a,F.a,ne.a,P.a,A.a,F.a,ne.a,P.a,n(32)),me=n.n(Oe),fe=n(62),xe="https://api.marshcoop.org",ge=.06391,ve="".concat((100*ge).toFixed(3),"%"),ye={new:"new",needs_review:"needs review",pending:"pending",complete:"complete",void:"void",archived:"archived"},Se={balance_due:"balance due",paid:"paid",credit_owed:"credit owed",failed:"failed",void:"void"},we={backorder:"backorder",pending:"pending",ready:"ready",shipped:"shipped",partial:"partial",canceled:"canceled"},ke="v".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).npm_package_version||n(458).version," made with \u2665 in NYC"),Ce=function(e){return{type:"SET",user:e}},_e=function(e){return{type:"SET_ERROR",error:e}},Ie=function(e){return{type:"SET_FETCHING",isFetching:e}},Ne={id:void 0,email:void 0,token:void 0},Te={dark_mode:"true"},Ee=function(e){return{type:"SET_PREFERENCES",preferences:e}},Ae=function(e){return{type:"SET_FETCHING_PREFERENCES",isFetching:e}},Fe=n(643),Pe=n(287);function Le(){return Object(c.jsx)(Fe.a,{fixed:!0,children:Object(c.jsx)(Pe.a,{pt:4,style:{textAlign:"center"},children:"L O A D I N G . . ."})})}var Re=n(644),ze=n(143),We=n(301),De=n(358),Me=n(362),Be=n(361),qe=n(359),He=n(360),Ue=n(116);function Je(e){return Object(c.jsx)(Ue.a,{component:"h2",variant:"h6",color:"textPrimary",gutterBottom:!0,children:e.children})}var $e=n(663),Ke=Object(z.a)((function(e){return{seeMore:{marginTop:e.spacing(3)},rowHover:{"&:hover":{backgroundColor:e.palette.background.default,cursor:"pointer"}}}}));var Ge=Object(v.h)((function(e){var t=Ke(),n=Object(r.useState)({data:[],page:0,totalCount:0}),i=Object(x.a)(n,2),s=i[0],o=i[1];return Object(r.useEffect)((function(){fetch("".concat(xe,"/orders/recent"),{method:"get",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then(o).catch((function(e){return console.warn(e),{data:[],page:0,totalCount:0}}))}),[]),Object(c.jsxs)(a.a.Fragment,{children:[Object(c.jsx)(Je,{children:"orders in the last 14 days"}),Object(c.jsxs)(De.a,{size:"small",children:[Object(c.jsx)(qe.a,{children:Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{children:"created"}),Object(c.jsx)(Be.a,{children:"status"}),Object(c.jsx)(Be.a,{children:"name"}),Object(c.jsx)(Be.a,{children:"email"}),Object(c.jsx)(Be.a,{children:"items"}),Object(c.jsx)(Be.a,{children:"subtotal"}),Object(c.jsx)(Be.a,{align:"right",children:"total"})]})}),Object(c.jsx)(Me.a,{children:s.data.map((function(n){return Object(c.jsxs)(He.a,{className:t.rowHover,onClick:function(){return e.history.push("/orders/edit/".concat(n.id))},children:[Object(c.jsx)(Be.a,{title:n.createdAt&&new Date(n.createdAt).toLocaleString(),children:n.createdAt&&Object($e.a)(new Date(n.createdAt),Date.now(),{addSuffix:!0})}),Object(c.jsx)(Be.a,{children:n.status}),Object(c.jsx)(Be.a,{children:n.name}),Object(c.jsx)(Be.a,{children:n.email}),Object(c.jsx)(Be.a,{children:n.item_count}),Object(c.jsx)(Be.a,{children:n.subtotal}),Object(c.jsx)(Be.a,{align:"right",children:n.total})]},n.id)}))})]}),Object(c.jsx)("div",{className:t.seeMore,children:Object(c.jsx)(We.a,{variant:"contained",color:"primary",onClick:function(t){e.history.push("/orders")},children:"ALL ORDERS"})})]})})),Ve=Object(z.a)((function(e){return{seeMore:{marginTop:e.spacing(3)},rowHover:{"&:hover":{backgroundColor:e.palette.background.default,cursor:"pointer"}}}}));var Qe=Object(v.h)((function(e){var t=Ve(),n=Object(r.useState)({data:[],page:0,totalCount:0}),i=Object(x.a)(n,2),s=i[0],o=i[1];return Object(r.useEffect)((function(){fetch("".concat(xe,"/wholesaleorders"),{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({pageSize:10})}).then((function(e){return e.json()})).then(o).catch((function(e){return console.warn(e),{data:[],page:0,totalCount:0}}))}),[]),Object(c.jsxs)(a.a.Fragment,{children:[Object(c.jsx)(Je,{children:"recent wholesale orders"}),Object(c.jsxs)(De.a,{size:"small",children:[Object(c.jsx)(qe.a,{children:Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{children:"created"}),Object(c.jsx)(Be.a,{children:"vendor"}),Object(c.jsx)(Be.a,{children:"status"})]})}),Object(c.jsx)(Me.a,{children:s.data.map((function(n){return Object(c.jsxs)(He.a,{className:t.rowHover,onClick:function(){return e.history.push("/wholesaleorders/edit/".concat(n.id))},children:[Object(c.jsx)(Be.a,{title:n.createdAt&&new Date(n.createdAt).toLocaleString(),children:n.createdAt&&Object($e.a)(new Date(n.createdAt),Date.now(),{addSuffix:!0})}),Object(c.jsx)(Be.a,{children:n.vendor}),Object(c.jsx)(Be.a,{children:n.status})]},n.id)}))})]}),Object(c.jsx)("div",{className:t.seeMore,children:Object(c.jsx)(We.a,{variant:"contained",color:"primary",onClick:function(t){e.history.push("/wholesaleorders")},children:"SEE MORE"})})]})})),Ye=Object(z.a)((function(e){return{seeMore:{marginTop:e.spacing(3)},rowHover:{"&:hover":{backgroundColor:e.palette.background.default,cursor:"pointer"}}}}));var Xe=Object(v.h)((function(e){var t=Ye(),n=Object(r.useState)({data:[],page:0,totalCount:0}),i=Object(x.a)(n,2),s=i[0],o=i[1];return Object(r.useEffect)((function(){fetch("".concat(xe,"/members"),{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({pageSize:10})}).then((function(e){return e.json()})).then(o).catch((function(e){return console.warn(e),{data:[],page:0,totalCount:0}}))}),[]),Object(c.jsxs)(a.a.Fragment,{children:[Object(c.jsx)(Je,{children:"recent members"}),Object(c.jsxs)(De.a,{size:"small",children:[Object(c.jsx)(qe.a,{children:Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{children:"created"}),Object(c.jsx)(Be.a,{children:"name"}),Object(c.jsx)(Be.a,{children:"email"}),Object(c.jsx)(Be.a,{align:"right",children:"fees_paid"})]})}),Object(c.jsx)(Me.a,{children:s.data.map((function(n){return Object(c.jsxs)(He.a,{className:t.rowHover,onClick:function(){return e.history.push("/members/".concat(n.id))},children:[Object(c.jsx)(Be.a,{title:n.createdAt&&new Date(n.createdAt).toLocaleString(),children:n.createdAt&&Object($e.a)(new Date(n.createdAt),Date.now(),{addSuffix:!0})}),Object(c.jsx)(Be.a,{children:n.name}),Object(c.jsx)(Be.a,{children:n.registration_email}),Object(c.jsx)(Be.a,{align:"right",children:n.fees_paid})]},n.id)}))})]}),Object(c.jsx)("div",{className:t.seeMore,children:Object(c.jsx)(We.a,{variant:"contained",color:"primary",onClick:function(t){e.history.push("/members")},children:"ALL MEMBERS"})})]})})),Ze=Object(z.a)((function(e){return{root:{padding:e.spacing(2),minHeight:"100vh"},paper:{padding:e.spacing(2),display:"flex",overflowX:"hidden",flexDirection:"column"}}}));function et(){var e=Ze();return Object(c.jsx)("div",{className:e.root,children:Object(c.jsxs)(Re.a,{container:!0,spacing:3,children:[Object(c.jsx)(Re.a,{item:!0,xs:12,md:6,children:Object(c.jsx)(ze.a,{className:e.paper,children:Object(c.jsx)(Qe,{})})}),Object(c.jsx)(Re.a,{item:!0,xs:12,md:6,children:Object(c.jsx)(ze.a,{className:e.paper,children:Object(c.jsx)(Xe,{})})}),Object(c.jsx)(Re.a,{item:!0,xs:12,children:Object(c.jsx)(ze.a,{className:e.paper,children:Object(c.jsx)(Ge,{})})})]})})}var tt=n(363),nt=Object(z.a)((function(e){return{form:{width:"100%",minHeight:"100vh",marginTop:e.spacing(1),display:"flex",flexDirection:"column",justifyContent:"center"},title:{display:"flex",justifyContent:"space-between",alignItems:"flex-end"},submit:{margin:e.spacing(3,0,2)}}}));var ct=Object(j.b)((function(e,t){return{userService:e.session.userService}}),(function(e,t){return{login:function(t,n){return e(function(e,t){return function(){var n=Object(fe.a)(me.a.mark((function n(c){return me.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){c(Ie(!0)),fetch("".concat(xe,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){"ok"===e.msg&&e.user&&e.user.id?c(Ce(e.user)):c(_e({error:"error",reason:e.message}))})).catch((function(e){console.warn("login error:",e),c(_e({error:"error",reason:"unable to login right now :("}))})).finally((function(){c(Ie(!1)),n()}))})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))(Object(v.h)((function(e){var t=e.userService,n=e.history,a=nt(),i=Object(r.useState)(""),s=Object(x.a)(i,2),o=s[0],l=s[1];return Object(r.useEffect)((function(){t.user&&!t.isFetching&&t.user.role&&"admin"===t.user.role&&n.push("/")}),[t,n]),Object(c.jsx)(Fe.a,{maxWidth:"sm",children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),l("");var n=t.currentTarget,c=n.elements.namedItem("email"),r=n.elements.namedItem("password");c&&c.value.length>0&&r&&r.value.length>0&&e.login(c.value,r.value)},className:a.form,children:[Object(c.jsxs)("div",{className:a.title,children:[Object(c.jsx)(Ue.a,{variant:"h2",display:"block",children:"MARSH COOP"}),Object(c.jsx)(Ue.a,{variant:"overline",display:"inline",children:"admin"})]}),Object(c.jsx)(tt.a,{label:"email",name:"email",type:"text",autoFocus:!0,fullWidth:!0,required:!0}),Object(c.jsx)(tt.a,{label:"password",name:"password",type:"password",fullWidth:!0,required:!0}),Object(c.jsx)("div",{children:Object(c.jsx)(We.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:e.userService.isFetching,className:a.submit,children:"Login"})}),Object(c.jsxs)(Pe.a,{color:"error.main",children:[e.userService.error&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Ue.a,{variant:"overline",display:"block",children:"onoz! an error!"}),Object(c.jsx)(Ue.a,{variant:"body1",display:"block",gutterBottom:!0,children:e.userService.error.reason})]}),o&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Ue.a,{variant:"overline",display:"block",children:"onoz! an error!"}),Object(c.jsx)(Ue.a,{variant:"body1",display:"block",gutterBottom:!0,children:o})]})]})]})})}))),rt=Object(z.a)((function(e){return{container:{},form:{width:"100%",minHeight:"100vh",marginTop:e.spacing(1),display:"flex",flexDirection:"column",justifyContent:"center"},submit:{margin:e.spacing(3,0,2)}}}));var at=Object(j.b)((function(e,t){return{userService:e.session.userService}}),(function(e,t){return{register:function(t,n){return e(function(e,t){return function(){var n=Object(fe.a)(me.a.mark((function n(c){return me.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){c(Ie(!0)),fetch("".concat(xe,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({regKey:e,password:t})}).then((function(e){return e.json()})).then((function(e){"ok"===e.msg&&e.user&&e.user.id?c(Ce(e.user)):c(_e({error:"error",reason:e.message}))})).catch((function(e){console.warn("register error:",e),c(_e({error:"error",reason:"unable to register right now :("}))})).finally((function(){c(Ie(!1)),n()}))})));case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}}))(Object(v.h)((function(e){var t=new URLSearchParams(Object(v.g)().search).get("regKey"),n=e.userService,a=e.history,i=rt(),s=Object(r.useState)(""),o=Object(x.a)(s,2),l=o[0],d=o[1];return Object(r.useEffect)((function(){n.user&&!n.isFetching&&n.user.role&&"admin"===n.user.role&&a.push("/")}),[n,a]),Object(c.jsx)(Fe.a,{maxWidth:"sm",className:i.container,children:Object(c.jsxs)("form",{onSubmit:function(n){n.preventDefault(),d("");var c=n.currentTarget,r=c.elements.namedItem("password"),a=c.elements.namedItem("password_confirm"),i="";if(t&&(i=t),!i){var s=c.elements.namedItem("regKey");s&&s.value.length>1&&(i=s.value)}i||d("no registration key"),r&&r.value.length>0&&a&&a.value.length>0&&(a.value!==r.value?d("passwords do not match"):e.register(i,a.value))},className:i.form,children:[!t&&Object(c.jsx)(tt.a,{label:"registration key",name:"regKey",type:"text",autoFocus:!0,fullWidth:!0,required:!0}),Object(c.jsx)(tt.a,{label:"password",name:"password",type:"password",autoFocus:!!t,fullWidth:!0,required:!0}),Object(c.jsx)(tt.a,{label:"password_confirm",name:"password_confirm",type:"password",fullWidth:!0,required:!0}),Object(c.jsx)("div",{children:Object(c.jsx)(We.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:e.userService.isFetching,className:i.submit,children:"submit"})}),Object(c.jsxs)(Pe.a,{color:"error.main",children:[e.userService.error&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Ue.a,{variant:"overline",display:"block",children:"onoz! an error!"}),Object(c.jsx)(Ue.a,{variant:"body1",display:"block",gutterBottom:!0,children:e.userService.error.reason})]}),l&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Ue.a,{variant:"overline",display:"block",children:"onoz! an error!"}),Object(c.jsx)(Ue.a,{variant:"body1",display:"block",gutterBottom:!0,children:l})]})]})]})})}))),it=n(203),st=function(e){var t=e.component,n=e.userService,r=e.children,a=Object(it.a)(e,["component","userService","children"]);return Object(c.jsx)(v.b,Object(p.a)(Object(p.a)({},a),{},{render:function(e){return function(e){return!(!e.user||!e.user.role||"admin"!==e.user.role)}(n)?t?Object(c.jsx)(t,Object(p.a)({},e)):r:Object(c.jsx)(v.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},ot=n(5),lt=n(646),dt=n(647),ut=n(648),jt=n(251),bt=n.n(jt),ht=n(364),pt=Object(z.a)((function(e){return{root:{padding:e.spacing(2),margin:e.spacing(2),maxWidth:"100vw",minHeight:"100vh"},header:{fontSize:"1.5em",color:e.palette.text.primary,backgroundColor:e.palette.background.paper},row:{width:"100%",padding:"0 1em",display:"flex",justifyContent:"space-between",alignItems:"center"},nested:{paddingLeft:e.spacing(4)},seeMore:{marginTop:e.spacing(3)},rowHover:{"&:hover":{backgroundColor:e.palette.background.paper}}}})),Ot=Object(ot.a)((function(e){return{root:{backgroundColor:e.palette.background.default,border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}}}))(lt.a),mt=Object(ot.a)({root:{backgroundColor:"rgba(0, 0, 0, .03)",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:"12px 0"}},expanded:{}})(dt.a),ft=Object(ot.a)((function(e){return{root:{marginLeft:e.spacing(2)}}}))(ut.a);var xt=Object(v.h)((function(e){var t=pt(),n=Object(r.useState)([]),i=Object(x.a)(n,2),s=i[0],o=i[1];return Object(r.useEffect)((function(){fetch("".concat(xe,"/admin/store_credit_report"),{method:"get",headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){o(e)})).catch((function(e){console.warn(e),o([])}))}),[]),Object(c.jsx)(ze.a,{className:t.root,children:Object(c.jsx)(C.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:Object(c.jsx)(U.a,{component:"h1",className:t.header,children:"Store Credits"}),children:s.map((function(n){return Object(c.jsxs)(a.a.Fragment,{children:[Object(c.jsx)(A.a,{children:Object(c.jsxs)("div",{className:t.row,children:[Object(c.jsx)(ht.a,{title:"edit member",children:Object(c.jsx)(We.a,{onClick:function(){return e.history.push("/members/".concat(n.id))},children:n.name})}),Object(c.jsx)(Ue.a,{children:n.registration_email}),Object(c.jsxs)(Ue.a,{children:["$ ",n.store_credit.toFixed(2)]})]})}),Object(c.jsxs)(Ot,{square:!0,children:[Object(c.jsx)(mt,{expandIcon:Object(c.jsx)(bt.a,{}),"aria-controls":"panel".concat(n.id,"-content"),id:"panel".concat(n.id,"-header"),children:Object(c.jsx)(Ue.a,{children:"Order Line Items"})}),Object(c.jsx)(ft,{children:Object(c.jsxs)(De.a,{children:[Object(c.jsx)(qe.a,{children:Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{children:"createdAt"}),Object(c.jsx)(Be.a,{children:"order#"}),Object(c.jsx)(Be.a,{children:"description"}),Object(c.jsx)(Be.a,{align:"right",children:"total"})]})}),Object(c.jsxs)(Me.a,{children:[Object(c.jsxs)(He.a,{children:[Object(c.jsxs)(Be.a,{colSpan:2,align:"center",children:["Credits (",n.credits.length,")"]}),Object(c.jsx)(Be.a,{align:"right",children:"SUM"}),Object(c.jsx)(Be.a,{align:"right",children:n.credits_sum})]}),n.credits.map((function(r){return Object(c.jsxs)(He.a,{className:t.rowHover,children:[Object(c.jsx)(Be.a,{children:r.createdAt&&new Date(r.createdAt).toLocaleString()}),Object(c.jsx)(Be.a,{children:Object(c.jsx)(ht.a,{title:"edit order",children:Object(c.jsxs)(We.a,{onClick:function(){return e.history.push("/orders/edit/".concat(r.OrderId))},children:["#",r.OrderId]})})}),Object(c.jsx)(Be.a,{children:r.description}),Object(c.jsx)(Be.a,{align:"right",children:r.total})]},"".concat(n.id).concat(r.id))})),Object(c.jsxs)(He.a,{children:[Object(c.jsxs)(Be.a,{colSpan:2,align:"center",children:["Adjustments (",n.adjustments.length,")"]}),Object(c.jsx)(Be.a,{align:"right",children:"SUM"}),Object(c.jsx)(Be.a,{align:"right",children:n.adjustments_sum})]}),n.adjustments.map((function(r){return Object(c.jsxs)(He.a,{className:t.rowHover,children:[Object(c.jsx)(Be.a,{children:r.createdAt&&new Date(r.createdAt).toLocaleString()}),Object(c.jsx)(Be.a,{children:Object(c.jsx)(ht.a,{title:"edit order",children:Object(c.jsxs)(We.a,{onClick:function(){return e.history.push("/orders/edit/".concat(r.OrderId))},children:["#",r.OrderId]})})}),Object(c.jsx)(Be.a,{children:r.description}),Object(c.jsx)(Be.a,{align:"right",children:r.total})]},"".concat(n.id).concat(r.id))}))]})]})})]})]},n.id)}))})})})),gt=n(77),vt=n.n(gt),yt=n(660),St=Object(z.a)((function(e){return Object(W.a)({root:{marginRight:e.spacing(2),borderLeft:"".concat(e.spacing(6),"px solid ").concat(e.palette.divider)},gridHeading:{color:e.palette.text.secondary},gridItem:{paddingBottom:e.spacing(2),paddingLeft:e.spacing(2),paddingRight:e.spacing(2),textAlign:"center"},lastUpdated:{marginLeft:e.spacing(2)},squareLink:{marginLeft:"1em"}})}));function wt(e){var t=St(),n=e.order,r=e.order.OrderLineItems||[],a=r.filter((function(e){return"product"!==e.kind&&"payment"!==e.kind&&"credit"!==e.kind})),i=r.filter((function(e){return"payment"===e.kind})),s=i.reduce((function(e,t){return e+parseFloat("".concat(t.total))}),0),o=r.filter((function(e){return"credit"===e.kind})),l=o.reduce((function(e,t){return e+parseFloat("".concat(t.total))}),0),d=parseFloat("".concat(n.total))+parseFloat("".concat(l))+parseFloat("".concat(s));return Object(c.jsxs)("div",{className:t.root,children:[Object(c.jsxs)(De.a,{"aria-label":"order details table",size:"small",children:[Object(c.jsx)(qe.a,{children:Object(c.jsxs)(He.a,{children:[Object(c.jsxs)(Be.a,{component:"th",children:["Line Items (",n.item_count,")"]}),Object(c.jsx)(Be.a,{component:"th",align:"right",children:"on hand"}),Object(c.jsx)(Be.a,{component:"th",align:"right",children:"price"}),Object(c.jsx)(Be.a,{component:"th",align:"right",children:"unit"}),Object(c.jsx)(Be.a,{component:"th",align:"right",children:"qty"}),Object(c.jsx)(Be.a,{component:"th",align:"right",children:"total"})]})}),Object(c.jsxs)(Me.a,{children:[r.map((function(e,t){return"product"===e.kind&&Object(c.jsxs)(He.a,{children:[Object(c.jsxs)(Be.a,{component:"td",scope:"row",children:[e.vendor&&"[".concat(e.vendor,"] "),e.description,e.data&&e.data.product?" ".concat(e.data.product.unf):""]}),Object(c.jsx)(Be.a,{align:"right",children:"on_hand"===e.status?"x":""}),Object(c.jsx)(Be.a,{align:"right",children:e.price}),Object(c.jsx)(Be.a,{align:"right",children:e.selected_unit}),Object(c.jsx)(Be.a,{align:"right",children:e.quantity}),Object(c.jsx)(Be.a,{align:"right",children:e.total})]},"orderli".concat(t))})),Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{component:"td",scope:"row",colSpan:3}),Object(c.jsx)(Be.a,{component:"td",scope:"row",align:"right",children:Object(c.jsx)("b",{children:"Sub Total"})}),Object(c.jsx)(Be.a,{component:"td",scope:"row",align:"right",children:n.subtotal})]}),a.length>0&&Object(c.jsx)(He.a,{children:Object(c.jsx)(Be.a,{component:"td",scope:"row",children:Object(c.jsx)("b",{children:"Adjustments"})})}),a.map((function(e,t){return Object(c.jsxs)(He.a,{children:[Object(c.jsxs)(Be.a,{component:"td",scope:"row",colSpan:3,children:["(".concat(e.kind,") ")," ",e.description]}),Object(c.jsx)(Be.a,{align:"right",children:e.quantity}),Object(c.jsx)(Be.a,{align:"right",children:e.total})]},"orderli".concat(t))})),Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{component:"td",scope:"row",colSpan:3}),Object(c.jsx)(Be.a,{component:"td",scope:"row",align:"right",children:Object(c.jsx)("b",{children:"Total"})}),Object(c.jsx)(Be.a,{component:"td",scope:"row",align:"right",children:n.total})]}),i&&i.length>0&&Object(c.jsx)(He.a,{children:Object(c.jsx)(Be.a,{component:"td",scope:"row",children:Object(c.jsx)("b",{children:"Payments"})})}),i.map((function(e,n){return Object(c.jsxs)(He.a,{children:[Object(c.jsxs)(Be.a,{component:"td",scope:"row",colSpan:3,children:[e.description,e.data&&e.data.payment&&e.data.payment.receipt_number&&Object(c.jsx)(yt.a,{className:t.squareLink,color:"secondary",href:e.data.payment.receipt_url,target:"_blank",rel:"noopener noreferrer",children:e.data.payment.receipt_number})]}),Object(c.jsx)(Be.a,{align:"right",children:e.quantity}),Object(c.jsx)(Be.a,{align:"right",children:e.total})]},"orderli".concat(n))})),o&&o.length>0&&Object(c.jsx)(He.a,{children:Object(c.jsx)(Be.a,{component:"td",scope:"row",children:Object(c.jsx)("b",{children:"Credits"})})}),o.map((function(e,t){return Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{component:"td",scope:"row",colSpan:3,children:e.description}),Object(c.jsx)(Be.a,{align:"right",children:e.quantity}),Object(c.jsx)(Be.a,{align:"right",children:e.total})]},"orderli".concat(t))})),d>0&&Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{component:"td",scope:"row",colSpan:3}),Object(c.jsx)(Be.a,{component:"td",scope:"row",align:"right",children:Object(c.jsx)("b",{children:"Balance Due"})}),Object(c.jsx)(Be.a,{component:"td",scope:"row",align:"right",children:d.toFixed(2)})]}),d<0&&Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{component:"td",scope:"row",colSpan:3}),Object(c.jsx)(Be.a,{component:"td",scope:"row",align:"right",children:Object(c.jsx)("b",{children:"Credit Owed"})}),Object(c.jsx)(Be.a,{component:"td",scope:"row",align:"right",children:Math.abs(d).toFixed(2)})]})]})]}),Object(c.jsxs)(Re.a,{container:!0,direction:"row",justify:"center",alignItems:"flex-start",children:[Object(c.jsx)(Re.a,{item:!0,xs:4,children:Object(c.jsxs)("div",{className:t.gridItem,children:[Object(c.jsx)(Ue.a,{variant:"overline",display:"block",className:t.gridHeading,gutterBottom:!0,children:"customer"}),Object(c.jsxs)(Ue.a,{variant:"body1",children:[n.name," ",Object(c.jsx)(yt.a,{color:"secondary",href:"mailto:".concat(n.email),children:n.email}),Object(c.jsx)("br",{}),Object(c.jsx)(yt.a,{color:"secondary",href:"tel:".concat(n.phone),children:n.phone}),Object(c.jsx)("br",{}),n.address," ",Object(c.jsx)("br",{})]})]})}),n.User&&n.User!==n.Member&&Object(c.jsx)(Re.a,{item:!0,xs:4,children:Object(c.jsxs)("div",{className:t.gridItem,children:[Object(c.jsx)(Ue.a,{variant:"overline",display:"block",className:t.gridHeading,gutterBottom:!0,children:"created by"}),Object(c.jsxs)(Ue.a,{variant:"body1",children:[Object(c.jsx)(yt.a,{color:"secondary",href:"mailto:".concat(n.User.email),children:n.User.email})," ",n.User.role&&Object(c.jsxs)(c.Fragment,{children:["(",n.User.role,") "]})]})]})}),Object(c.jsx)(Re.a,{item:!0,xs:4,children:Object(c.jsxs)("div",{className:t.gridItem,children:[Object(c.jsx)(Ue.a,{variant:"overline",display:"block",className:t.gridHeading,gutterBottom:!0,children:"notes"}),Object(c.jsx)(Ue.a,{variant:"body2",children:n.notes})]})})]}),n.createdAt!==n.updatedAt&&Object(c.jsxs)("div",{className:t.lastUpdated,children:[Object(c.jsx)("i",{children:"Last updated"})," ",new Date(n.updatedAt).toLocaleString()]})]})}var kt=n(666),Ct=Object(z.a)((function(e){return Object(W.a)({root:{padding:e.spacing(2),maxWidth:"100vw",minHeight:"100vh"}})}));var _t=Object(v.h)((function(e){var t=Ct(),n=Object(r.createRef)(),a=Object(r.useState)(!1),i=Object(x.a)(a,2),s=i[0],o=i[1],l=Object(r.useState)(!1),d=Object(x.a)(l,2),u=d[0],j=d[1],b={icon:s?"zoom_out":"search",tooltip:s?"CLOSE SEARCH":"SEARCH",isFreeAction:!0,onClick:function(){return o(!s)}},h={icon:"add",tooltip:"NEW ORDER",isFreeAction:!0,onClick:function(){return e.history.push("/orders/create")}},p={tooltip:"PRINT",icon:"print",onClick:function(e,t){var n=t.map((function(e){return e.id}));fetch("".concat(xe,"/orders/print"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({orderIds:n})}).then((function(e){return e.text()})).then((function(t){try{var n=window.open("about:blank");n&&(n.document.body.innerHTML+=t)}catch(e){console.warn("caught error doing this razzle dazze shit e:",e)}})).catch((function(e){console.warn(e)}))}},O={tooltip:"EDIT",icon:"edit",onClick:function(t,n){n[0]&&n[0].id&&e.history.push("/orders/edit/".concat(n[0].id))}},m=Object(r.useState)([b,h]),f=Object(x.a)(m,2),g=f[0],v=f[1];return Object(r.useEffect)((function(){!u&&v([b,h])}),[s,u]),Object(c.jsx)("div",{className:t.root,children:Object(c.jsx)(vt.a,{tableRef:n,columns:[{title:"#",field:"id",type:"string",filtering:!1},{title:"created",field:"createdAt",type:"datetime",filtering:!1,render:function(e){return Object(c.jsx)("div",{title:e.createdAt&&new Date(e.createdAt).toLocaleString(),children:e.createdAt&&Object(kt.a)(new Date(e.createdAt),Date.now())})}},{title:"status",field:"status",type:"string",lookup:ye},{title:"payment status",field:"payment_status",type:"string",lookup:Se},{title:"shipment status",field:"shipment_status",type:"string",lookup:we},{title:"name",field:"name",type:"string",filtering:!1},{title:"email",field:"email",type:"string",filtering:!1},{title:"items",field:"item_count",type:"numeric",filtering:!1},{title:"total",field:"total",type:"currency",filtering:!1},{title:"updated",field:"updatedAt",type:"datetime",filtering:!1,hidden:!0},{title:"phone",field:"phone",type:"string",hidden:!0},{title:"address",field:"address",type:"string",hidden:!0},{title:"notes",field:"notes",type:"string",hidden:!0},{title:"WholesaleOrderId",field:"WholesaleOrderId",type:"string",hidden:!0},{title:"history",field:"history",type:"string",hidden:!0}],data:function(e){return new Promise((function(t,n){fetch("".concat(xe,"/orders"),{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){return console.warn(e),t({data:[],page:0,totalCount:0})}))}))},detailPanel:function(e){return Object(c.jsx)(wt,{order:e})},onRowClick:function(e,t,n){return n&&n()},title:"Orders",options:{headerStyle:{position:"sticky",top:0},maxBodyHeight:"calc(100vh - 121px - 28px)",pageSize:50,pageSizeOptions:[50,100,500],debounceInterval:750,filtering:!0,search:s,emptyRowsWhenPaging:!1,selection:!0},onSelectionChange:function(e,t){s&&o(!1),0!==e.length?(j(!0),1===e.length?v([p,O]):v([p])):j(!1)},actions:g})})})),It=n(128),Nt=n.n(It),Tt=n(661),Et=n(250),At=n(87),Ft=n.n(At),Pt=n(303),Lt=n(367),Rt=n(302),zt=n(305),Wt={id:"",vendor:"",notes:"",status:"new",payment_status:"balance_due",shipment_status:"backorder",createdAt:"",updatedAt:""},Dt=n(656),Mt=n(230),Bt=n(255),qt=n.n(Bt),Ht=n(164),Ut=n.n(Ht),Jt=n(423),$t=n.n(Jt),Kt=function(e){return Object(c.jsx)(Mt.a,Object(p.a)({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e))},Gt=Object(ot.a)((function(e){return{root:{"&:focus":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(Lt.a);function Vt(e){var t=a.a.useState(null),n=Object(x.a)(t,2),r=n[0],i=n[1],s=function(){i(null)};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(Dt.a,{variant:"contained",color:"primary","aria-label":"split button",children:[Object(c.jsx)(We.a,{variant:"contained",color:"primary",onClick:e.onSaveBtnClick,children:"save"}),Object(c.jsx)(We.a,{"aria-controls":"wholesaleorders-menu","aria-haspopup":"true",variant:"contained",color:"primary",size:"small",onClick:function(e){i(e.currentTarget)},children:Object(c.jsx)(Ut.a,{})})]}),Object(c.jsxs)(Kt,{id:"wholesaleorders-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:s,children:[Object(c.jsxs)(Gt,{onClick:function(){window.confirm("are you sure?")&&e.onDeleteBtnClick(),s()},disabled:!e.wholesaleOrder.id,children:[Object(c.jsx)(F.a,{children:Object(c.jsx)(qt.a,{fontSize:"small"})}),Object(c.jsx)(P.a,{primary:"delete wholesale order"})]}),Object(c.jsxs)(Gt,{onClick:function(){e.onProductsExportToCsv(),s()},disabled:!e.wholesaleOrder.id,children:[Object(c.jsx)(F.a,{children:Object(c.jsx)($t.a,{})}),Object(c.jsx)(P.a,{primary:"export products to .csv"})]})]})]})}var Qt=n(104),Yt=Object(z.a)((function(e){return Object(W.a)({liTable:{marginTop:e.spacing(4)},deleteBtn:{width:"88px"},unf:{minWidth:"105px"},groupedRow:{backgroundColor:e.palette.background.default},groupedRowTotals:e.typography.h6})}));var Xt=Object(v.h)((function(e){var t,n=Yt(),i=null===e||void 0===e||null===(t=e.wholesaleOrder)||void 0===t?void 0:t.OrderLineItems,s=e.lineItemData,o=e.setLineItemData,l=e.setSnackMsg,d=e.setSnackOpen;return Object(r.useEffect)((function(){var e={};o((function(e){return Object(p.a)(Object(p.a)({},e),{},{productTotal:0,adjustmentTotal:0,orderTotal:0})})),null===i||void 0===i||i.forEach((function(t){var n=t.data&&t.data.product&&"".concat(t.data.product.unf).concat(t.data.product.upc_code),c=n||t.description,r=e[c],a=t.data&&t.data.product&&"EA"===t.selected_unit?t.quantity/t.data.product.pk:t.quantity,i=t.data&&t.data.product&&"CS"===t.selected_unit?t.quantity*t.data.product.pk:t.quantity,s=t.data&&t.data.product?+(parseFloat(t.data.product.ws_price_cost)*a).toFixed(2):t.total;e[c]={qtySum:r?r.qtySum+a:a,qtyUnits:r?r.qtyUnits+i:i,qtyAdjustments:0,totalSum:r?r.totalSum+s:s,product:t&&t.data&&t.data.product,vendor:t.vendor,description:t.description,line_items:r?[].concat(Object(Qt.a)(r.line_items),[t]):[t]},o((function(e){return Object(p.a)(Object(p.a)({},e),{},{productTotal:e.productTotal+parseFloat("".concat(s)),orderTotal:e.orderTotal+s})}))})),Object.values(e).forEach((function(e){if(e.qtySum%1!==0&&e.product){var t=e.product.pk,n=e.line_items.reduce((function(e,t){return e+("EA"===t.selected_unit?t.quantity:0)}),0),c=Math.abs(n%t-t),r=+(c*parseFloat(e.product.u_price_cost)).toFixed(2),a=r;e.line_items.push({quantity:c,price:r,total:a,kind:"adjustment",description:"add ".concat(c," EA")}),e.totalSum=e.totalSum+a,e.qtySum=Math.round(e.qtySum+c/t),e.qtyAdjustments=c,o((function(e){return Object(p.a)(Object(p.a)({},e),{},{adjustmentTotal:e.adjustmentTotal+ +a,orderTotal:e.orderTotal+a})}))}})),o((function(t){return Object(p.a)(Object(p.a)({},t),{},{groupedLineItems:e})}))}),[i]),Object(c.jsxs)(De.a,{size:"small",className:n.liTable,children:[Object(c.jsx)(qe.a,{children:Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{className:n.deleteBtn}),Object(c.jsx)(Be.a,{className:n.unf,children:"unf"}),Object(c.jsx)(Be.a,{children:"description"}),Object(c.jsx)(Be.a,{children:"price"}),Object(c.jsx)(Be.a,{children:"cost"}),Object(c.jsx)(Be.a,{children:"pk"}),Object(c.jsx)(Be.a,{align:"center",children:"qty"}),Object(c.jsx)(Be.a,{align:"right",children:"total"})]})}),Object(c.jsxs)(Me.a,{children:[Object.values(s.groupedLineItems).map((function(t,r){return Object(c.jsxs)(a.a.Fragment,{children:[Object(c.jsxs)(He.a,{className:n.groupedRow,children:[Object(c.jsxs)(Be.a,{className:n.deleteBtn,children:[Object(c.jsx)(ht.a,{title:"remove line item",children:Object(c.jsx)(Et.a,{"aria-label":"remove line item",onClick:function(){return function(t){var n=t.line_items.map((function(e){return e.id})).filter((function(e){return e}));n&&n.length&&window.confirm("are you sure?")&&fetch("".concat(xe,"/wholesaleorder/removelineitem"),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({ids:n})}).then((function(e){return e.json()})).then((function(t){return!t.error&&e.setReload(!0)})).catch((function(e){return console.warn("members removelineitem caught err",e)}))}(t)},children:Object(c.jsx)(Ft.a,{})})}),Object(c.jsx)(ht.a,{title:"give order credits",children:Object(c.jsx)(Et.a,{"aria-label":"issue order credits for this item",onClick:function(){return function(e){var t=e.line_items.map((function(t){return t.OrderId?{OrderId:t.OrderId,total:t.total,description:e.description}:void 0})).filter((function(e){return e}));window.confirm("will issue order credits. are you sure?")&&fetch("".concat(xe,"/wholesaleorder/issuecredits"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){e.error?(l("Unable to create credits!"),d(!0)):(l("Store credits created!"),d(!0))})).catch((function(e){l("onoz! error creating credits: ".concat(e)),d(!0),console.warn("issueOrderCredits caught err",e)}))}(t)},children:Object(c.jsx)(oe.a,{})})})]}),Object(c.jsx)(Be.a,{children:t.product&&"".concat(t.product.unf?t.product.unf:t.product.upc_code," ")}),Object(c.jsxs)(Be.a,{children:[t.product&&"".concat(t.product.name," ").concat(t.product.description),t.product&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("br",{}),"".concat(t.product.upc_code," ").concat(t.product.category," > ").concat(t.product.sub_category)," "]})]}),Object(c.jsxs)(Be.a,{children:[t.product&&t.product.ws_price,t.product&&t.product.ws_price!==t.product.u_price?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)("br",{}),"(".concat(t.product.u_price,"EA)")]}):""]}),Object(c.jsxs)(Be.a,{children:[t.product&&" ".concat(t.product.ws_price_cost),Object(c.jsx)("br",{}),t.product&&"".concat(t.product.ws_price_cost!==t.product.u_price_cost?"(".concat(t.product.u_price_cost,"EA)"):"")]}),Object(c.jsx)(Be.a,{children:t.product&&t.product.pk}),Object(c.jsx)(Be.a,{align:"center",className:n.groupedRowTotals,children:+t.qtySum.toFixed(2)}),Object(c.jsx)(Be.a,{align:"right",className:n.groupedRowTotals,children:t.totalSum.toFixed(2)})]}),t.line_items.map((function(t){return Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{colSpan:2}),Object(c.jsxs)(Be.a,{children:["[",t.kind,"] ",t.vendor," ",t.data&&t.data.product&&t.data.product.import_tag?t.data.product.import_tag:t.description," ",t.OrderId&&Object(c.jsxs)(yt.a,{color:"secondary",href:"/orders/edit/".concat(t.OrderId),onClick:function(n){n.preventDefault(),e.history.push("/orders/edit/".concat(t.OrderId))},children:["Order #",t.OrderId]})]}),Object(c.jsx)(Be.a,{}),Object(c.jsx)(Be.a,{}),Object(c.jsx)(Be.a,{children:"adjustment"===t.kind?"".concat(t.quantity," EA"):"".concat(t.quantity," ").concat(t.selected_unit)}),Object(c.jsx)(Be.a,{align:"center",children:t.data&&t.data.product&&"EA"===t.selected_unit?+(t.quantity/t.data.product.pk).toFixed(2):null}),Object(c.jsx)(Be.a,{align:"right",children:t.total})]},"wsli".concat(t.id))}))]},"wsgli".concat(r))})),Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{colSpan:2,align:"center",children:"ITEM COUNT"}),Object(c.jsx)(Be.a,{colSpan:2,align:"right",children:"PRODUCT TOTAL"}),Object(c.jsx)(Be.a,{colSpan:2,align:"right",children:"ADJUSTMENTS TOTAL"}),Object(c.jsx)(Be.a,{colSpan:2,align:"right",className:n.groupedRowTotals,children:"TOTAL"})]}),Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{colSpan:2,align:"center",children:Object.keys(s.groupedLineItems).length}),Object(c.jsx)(Be.a,{colSpan:2,align:"right",children:s.productTotal.toFixed(2)}),Object(c.jsx)(Be.a,{colSpan:2,align:"right",children:s.adjustmentTotal.toFixed(2)}),Object(c.jsx)(Be.a,{colSpan:2,align:"right",className:n.groupedRowTotals,children:s.orderTotal.toFixed(2)})]})]})]})})),Zt=n(517).Parser,en=Object(z.a)((function(e){return Object(W.a)({vendor:{marginBottom:e.spacing(2),marginRight:e.spacing(2)},editMenu:{padding:"".concat(e.spacing(2),"px 0"),textAlign:"right"}})}));var tn=Object(v.h)((function(e){var t=en(),n=Object(r.useState)(""),i=Object(x.a)(n,2),s=i[0],o=i[1],l=Object(r.useState)(),d=Object(x.a)(l,2),u=d[0],j=d[1],b=Object(r.useState)(!0),h=Object(x.a)(b,2),O=h[0],m=h[1],f=Object(r.useState)(!1),g=Object(x.a)(f,2),v=g[0],y=g[1],S=Object(r.useState)(!0),w=Object(x.a)(S,2),k=w[0],C=w[1],_=Object(r.useState)({groupedLineItems:{},productTotal:0,adjustmentTotal:0,orderTotal:0}),I=Object(x.a)(_,2),N=I[0],T=I[1],E=function(e,t,n,c){var a=Object(r.useState)({status:"loading"}),i=Object(x.a)(a,2),s=i[0],o=i[1];return Object(r.useEffect)((function(){return e?"new"===e?(o({status:"loaded",payload:Wt}),t(!1),void c(!1)):void fetch("".concat(xe,"/wholesaleorder/").concat(e),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){o({status:"loaded",payload:e})})).catch((function(e){console.warn("useWholesaleOrderService fetch caught err:",e),o(Object(p.a)({},e))})).finally((function(){t(!1),c(!1)})):(t(!1),void c(!1))}),[e,t,n,c]),s}(s,m,k,C);Object(r.useEffect)((function(){"loaded"===E.status&&E.payload&&j(E.payload)}),[E,s]);var A=a.a.useState(!1),F=Object(x.a)(A,2),P=F[0],L=F[1],R=a.a.useState(""),z=Object(x.a)(R,2),W=z[0],D=z[1],M=function(e,t){"clickaway"!==t&&L(!1)},B=e.match.params.id;function q(e){return u&&u[e]?u[e]:""}return Object(r.useEffect)((function(){B&&o(B)}),[B]),function(e,t,n,c,a){var i=Object(r.useState)({status:"loading"}),s=Object(x.a)(i,2),o=s[0],l=s[1];Object(r.useEffect)((function(){if(t&&e&&e.id){var r="new"===e.id?"/wholesaleorder/create":"/wholesaleorder/upsert";fetch("".concat(xe).concat(r),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){l({status:"loaded",payload:e.order}),c(e.msg),a(!0)})).catch((function(e){console.warn("useWholesaleOrderSaveService fetch caught err:",e),l(Object(p.a)({},e)),c("o noz! ".concat(e)),a(!0)})).finally((function(){n(!1)}))}else n(!1)}),[e,t,n,c,a])}(u,v,y,D,L),u?Object(c.jsxs)(c.Fragment,{children:[O?Object(c.jsx)(Le,{}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(Re.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"flex-start",children:[Object(c.jsxs)(Re.a,{item:!0,sm:5,children:[Object(c.jsx)(tt.a,{className:t.vendor,label:"vendor",fullWidth:!0,value:q("vendor"),onChange:function(e){j((function(t){if(t)return Object(p.a)(Object(p.a)({},t),{},{vendor:e.target.value})}))}}),Object(c.jsxs)(Rt.a,{fullWidth:!0,children:[Object(c.jsx)(Pt.a,{id:"order-status-select-label",children:"status"}),Object(c.jsx)(zt.a,{labelId:"order-status-select-label",id:"order-status-select",value:q("status"),onChange:function(e){j((function(t){if(t)return Object(p.a)(Object(p.a)({},t),{},{status:e.target.value})}))},children:Object.keys(ye).map((function(e){return Object(c.jsx)(Lt.a,{value:e,children:ye[e]},"os-sel-".concat(e))}))})]}),Object(c.jsxs)(Rt.a,{fullWidth:!0,children:[Object(c.jsx)(Pt.a,{id:"payment-status-select-label",children:"payment status"}),Object(c.jsx)(zt.a,{labelId:"payment-status-select-label",id:"payment-status-select",value:q("payment_status"),onChange:function(e){j((function(t){if(t)return Object(p.a)(Object(p.a)({},t),{},{payment_status:e.target.value})}))},children:Object.keys(Se).map((function(e){return Object(c.jsx)(Lt.a,{value:e,children:Se[e]},"ps-sel-".concat(e))}))})]}),Object(c.jsxs)(Rt.a,{fullWidth:!0,children:[Object(c.jsx)(Pt.a,{id:"shipment-status-select-label",children:"shipment status"}),Object(c.jsx)(zt.a,{labelId:"shipment-status-select-label",id:"shipment-status-select",value:q("shipment_status"),onChange:function(e){j((function(t){if(t)return Object(p.a)(Object(p.a)({},t),{},{shipment_status:e.target.value})}))},children:Object.keys(we).map((function(e){return Object(c.jsx)(Lt.a,{value:e,children:we[e]},"ship-sel-".concat(e))}))})]})]}),Object(c.jsxs)(Re.a,{item:!0,sm:7,children:[Object(c.jsx)(tt.a,{label:"notes",multiline:!0,fullWidth:!0,rows:4,rowsMax:28,value:q("notes"),onChange:function(e){j((function(t){if(t)return Object(p.a)(Object(p.a)({},t),{},{notes:e.target.value})}))}}),Object(c.jsx)("div",{className:t.editMenu,children:Object(c.jsx)(Vt,{wholesaleOrder:u,onSaveBtnClick:function(){"new"===s&&j((function(e){if(e)return Object(p.a)(Object(p.a)({},e),{},{id:"new"})})),y(!0),e.setReloadOrders(!0)},onDeleteBtnClick:function(){u&&fetch("".concat(xe,"/wholesaleorder"),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:u.id})}).then((function(e){return e.json()})).then((function(t){t.error?(D(t.msg),L(!0)):e.history.replace("/wholesaleorders")})).catch((function(e){console.warn("delete wholesaleOrder fetch caught err:",e),D("o noz! ".concat(e)),L(!0)}))},onProductsExportToCsv:function(){var e=u&&u.vendor;if(e){var t=new Zt({fields:[{value:"product.unf",label:"unf"},{value:"product.upc_code",label:"upc_code"},{value:"vendor",label:"vendor"},{value:"description",label:"description"},{value:"qtySum",label:"qtySum"},{value:"qtyUnits",label:"units ordered"},{value:"qtyAdjustments",label:"on_hand_count_change"},{value:"totalSum",label:"totalSum"},{value:"product.ws_price_cost",label:"ws_price_cost"},{value:"product.u_price_cost",label:"u_price_cost"},{value:"product.pk",label:"pk"},{value:"product.size",label:"size"},{value:"product.unit_type",label:"unit_type"},{value:"product.category",label:"category"},{value:"product.sub_category",label:"sub_category"},{value:"product.name",label:"name"},{value:"product.description",label:"description"},{value:"product.count_on_hand",label:"count_on_hand"}]}).parse(Object.values(N.groupedLineItems));!function(e,t){if(window.navigator.msSaveBlob){var n=new Blob([t],{type:"text/csv"});window.navigator.msSaveBlob(n,e)}else{var c=document.createElement("a");if(c.download=e,window.URL.createObjectURL){var r=new Blob([t],{type:"text/csv"});c.href=window.URL.createObjectURL(r)}else c.href="data:text/csv;charset=utf-8,"+encodeURIComponent(t);if(document.createEvent){var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),c.dispatchEvent(a)}else c.click()}}("".concat(e,".csv"),t)}}})})]})]}),Object(c.jsx)(Xt,{wholesaleOrder:u,setReload:C,lineItemData:N,setLineItemData:T,setSnackMsg:D,setSnackOpen:L})]}),Object(c.jsx)(Tt.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:P,autoHideDuration:6e3,onClose:M,ContentProps:{"aria-describedby":"message-id"},message:Object(c.jsx)("span",{id:"message-id",children:W}),action:[Object(c.jsx)(Et.a,{"aria-label":"close",onClick:M,children:Object(c.jsx)(Ft.a,{})},"close")]})]}):Object(c.jsx)(Le,{})})),nn=Object(z.a)((function(e){return Object(W.a)({root:{maxWidth:"100vw"}})}));var cn=Object(v.h)((function(e){var t=nn(),n=Object(r.createRef)(),i=Object(r.useState)(!1),s=Object(x.a)(i,2),o=s[0],l=s[1],d=Object(r.useCallback)((function(){n.current&&n.current.onQueryChange(),l(!1)}),[n,l]),u=Object(r.useState)(),j=Object(x.a)(u,2),b=j[0],h=j[1],p={tooltip:"ADD LINE ITEMS TO ORDER",icon:"add",onClick:function(e,t){k(e),Array.isArray(t)&&h(t.map((function(e){return e.id})))}};Object(r.useEffect)((function(){o&&d()}),[o,d]);var O=Object(r.useState)(),m=Object(x.a)(O,2),f=m[0],g=m[1];Object(r.useEffect)((function(){fetch("".concat(xe,"/wholesaleorders"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:["new","needs_review"]})}).then((function(e){return e.json()})).then((function(e){return g(e.data.map((function(e){return{id:e.id,name:"".concat(e.vendor," ").concat(new Date(e.createdAt).toLocaleDateString())}})))})).catch(console.warn)}),[]);var v=a.a.useState(null),y=Object(x.a)(v,2),S=y[0],w=y[1],k=function(e){w(e.currentTarget)},C=function(){h([]),w(null)},I=function(t){fetch("".concat(xe,"/wholesaleorder/addlineitems"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:t,selectedLineItems:b})}).then((function(e){return e.json()})).then((function(e){})).catch(console.warn).finally((function(){C(),l(!0),e.setReloadOrders(!0)}))};return Object(c.jsxs)("div",{className:t.root,children:[Object(c.jsx)(vt.a,{tableRef:n,columns:[{title:"vendor",field:"vendor",type:"string",filterPlaceholder:"filter"},{title:"OrderId",field:"OrderId",type:"string",filtering:!0,render:function(t){return Object(c.jsxs)(yt.a,{color:"secondary",href:"/orders/edit/".concat(t.OrderId),onClick:function(n){n.preventDefault(),e.history.push("/orders/edit/".concat(t.OrderId))},children:["Order #",t.OrderId]})}},{title:"qty",field:"quantity",type:"string",filtering:!1},{title:"total",field:"total",type:"string",filtering:!1},{title:"product",field:"data",type:"string",render:function(e){return e.data&&e.data.product?"".concat(e.data.product.name," ").concat(e.data.product.description):null}},{title:"id",field:"id",type:"string",hidden:!0},{title:"WholesaleOrderId",field:"WholesaleOrderId",type:"string",hidden:!0}],data:function(e){return new Promise((function(t,n){fetch("".concat(xe,"/wholesaleorders/lineitems"),{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){return console.warn("onoz, caught err:",e),t({data:[],page:0,totalCount:0})}))}))},title:"Line Items",options:{headerStyle:{position:"sticky",top:0},maxBodyHeight:"calc(100vh - 121px - 28px)",pageSize:50,pageSizeOptions:[50,100,500],debounceInterval:750,filtering:!0,search:!0,emptyRowsWhenPaging:!1,selection:!0},actions:[p]}),Object(c.jsxs)(Mt.a,{id:"simple-menu",anchorEl:S,keepMounted:!0,open:Boolean(S),onClose:C,children:[Object(c.jsx)(Lt.a,{onClick:function(){return I("new")},children:"New wholesale order"}),Object(c.jsx)(_.a,{}),f&&f.map((function(e){return Object(c.jsx)(Lt.a,{onClick:function(){return I(e.id)},children:e.name},"wholesaleorder-sel-".concat(e.id))}))]})]})})),rn=Object(ot.a)({root:{border:"1px solid rgba(0, 0, 0, .125)",boxShadow:"none","&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"},"&$expanded":{margin:"auto"}},expanded:{}})(lt.a),an=Object(ot.a)({root:{backgroundColor:"rgba(0, 0, 0, .03)",borderBottom:"1px solid rgba(0, 0, 0, .125)",marginBottom:-1,minHeight:56,"&$expanded":{minHeight:56}},content:{"&$expanded":{margin:"12px 0"}},expanded:{}})(dt.a),sn=Object(ot.a)((function(e){return{root:{padding:0}}}))(ut.a),on=Object(z.a)((function(e){return Object(W.a)({root:{padding:e.spacing(2),maxWidth:"100vw",minHeight:"100vh"},title:{display:"flex",alignItems:"center",justifyContent:"space-between",textAlign:"left",marginLeft:e.spacing(2),padding:e.spacing(2)},titleText:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,height:"100%"},paperNav:{textAlign:"center",color:e.palette.text.secondary,height:"100%"},list:{padding:0,width:"90%"},selectedListItem:{borderLeft:"".concat(e.spacing(2),"px solid ").concat(e.palette.divider)},noOrdersMsg:{padding:e.spacing(2)}})}));var ln=Object(j.b)((function(e){return{userService:e.session.userService}}),void 0)(Object(v.h)((function(e){var t=on(),n=e.userService,a=Object(r.useState)([]),i=Object(x.a)(a,2),s=i[0],o=i[1],l=Object(r.useState)(!0),d=Object(x.a)(l,2),u=d[0],j=d[1],b=Object(r.useState)(!1),h=Object(x.a)(b,2),O=h[0],m=h[1],f=Object(r.useState)("new"),y=Object(x.a)(f,2),S=y[0],w=y[1],k=function(e,t,n,c){var a=Object(r.useState)({status:"loading"}),i=Object(x.a)(a,2),s=i[0],o=i[1];return Object(r.useEffect)((function(){n&&fetch("".concat(xe,"/wholesaleorders"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:e})}).then((function(e){return e.json()})).then((function(e){o({status:"loaded",payload:e.data})})).catch((function(e){console.warn("useWholesaleOrderService fetch caught err:",e),o(Object(p.a)({},e))})).finally((function(){c(!1),t(!1)}))}),[n,c,e,t]),s}(S,m,u,j);Object(r.useEffect)((function(){"loaded"===k.status&&o(k.payload)}),[k]);var _,I=Object(r.useState)(!1),N=Object(x.a)(I,2),T=N[0],E=N[1],F=function(e,t){"clickaway"!==t&&E(!1)};try{_=window.location.pathname.split("/").reverse()[0],isNaN(parseInt(_))&&(_=void 0)}catch(L){}return n?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(Re.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch",className:t.root,spacing:2,children:[Object(c.jsx)(Re.a,{sm:12,md:3,lg:2,item:!0,children:Object(c.jsxs)(ze.a,{className:t.paperNav,children:[Object(c.jsxs)("div",{className:t.title,children:[Object(c.jsx)(yt.a,{color:"textPrimary",href:"",onClick:function(t){t.preventDefault(),e.history.push("/wholesaleorders")},className:t.titleText,children:"WHOLESALE ORDERS"}),Object(c.jsx)(Et.a,{"aria-label":"add wholesale order",title:"add wholeslae order",onClick:function(){return e.history.push("/wholesaleorders/edit/new"),void E(!0)},children:Object(c.jsx)(Nt.a,{})})]}),Object.keys(ye).map((function(e){return Object(c.jsxs)(rn,{square:!0,defaultExpanded:"new"===e,expanded:S===e,onChange:function(t,n){return function(e,t){t&&(w(e),j(!0))}(e,n)},children:[Object(c.jsx)(an,{expandIcon:Object(c.jsx)(bt.a,{}),"aria-controls":"panel".concat(e,"-content"),id:"panel".concat(e,"-header"),children:Object(c.jsx)(Ue.a,{children:ye[e]})}),Object(c.jsx)(sn,{children:O?Object(c.jsx)(Le,{}):Object(c.jsx)(C.a,{className:t.list,children:s&&s.length?s.map((function(e,n){return Object(c.jsx)(A.a,{button:!0,component:g.b,to:"/wholesaleorders/edit/".concat(e.id),className:_==e.id?t.selectedListItem:void 0,children:Object(c.jsx)(P.a,{primary:e.vendor,secondary:new Date(e.createdAt).toLocaleDateString()})},"wsorder".concat(n))})):Object(c.jsx)("div",{className:t.noOrdersMsg,children:Object(c.jsx)("i",{children:"No wholesale orders for this status..."})})})})]},"EP".concat(e))}))]})}),Object(c.jsx)(Re.a,{sm:12,md:9,lg:10,item:!0,children:Object(c.jsxs)(v.d,{children:[Object(c.jsx)(st,{userService:n,path:"/wholesaleorders",exact:!0,children:Object(c.jsx)(cn,{setReloadOrders:j})}),Object(c.jsx)(st,{userService:n,path:"/wholesaleorders/edit/:id",children:Object(c.jsx)(ze.a,{className:t.paper,children:Object(c.jsx)(tn,{setReloadOrders:j})})})]})})]}),Object(c.jsx)(Tt.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:T,autoHideDuration:4e3,onClose:F,ContentProps:{"aria-describedby":"message-id"},message:Object(c.jsx)("span",{id:"message-id",children:"Created new Wholesale Order!"}),action:[Object(c.jsx)(Et.a,{"aria-label":"close",onClick:F,children:Object(c.jsx)(Ft.a,{})},"close")]})]}):null}))),dn=n(204),un=n(434),jn=n(433),bn=Object(z.a)((function(e){return Object(W.a)({modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}})})),hn=["admin","member","guest"];function pn(e){var t=bn(),n=Object(r.useState)(""),a=Object(x.a)(n,2),i=a[0],s=a[1],o=Object(r.useState)("guest"),l=Object(x.a)(o,2),d=l[0],u=l[1],j=Object(r.useState)(!1),b=Object(x.a)(j,2),h=b[0],p=b[1],O=Object(r.useState)(""),m=Object(x.a)(O,2),f=m[0],g=m[1];Object(r.useEffect)((function(){i&&i.includes("@")?p(!1):p(!0)}),[i]);return Object(c.jsx)("div",{children:Object(c.jsx)(dn.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:t.modal,open:e.open,onClose:e.handleClose,closeAfterTransition:!0,BackdropComponent:un.a,BackdropProps:{timeout:500},children:Object(c.jsx)(jn.a,{in:e.open,children:Object(c.jsxs)("div",{className:t.paper,children:[Object(c.jsx)("h2",{children:"Add New User"}),Object(c.jsxs)("div",{children:[Object(c.jsx)(tt.a,{type:"email",margin:"dense",label:"email",placeholder:"email",value:i,onChange:function(e){return s(e.target.value)},autoFocus:!0,fullWidth:!0}),Object(c.jsxs)(Rt.a,{fullWidth:!0,children:[Object(c.jsx)(Pt.a,{id:"role-select-label",children:"Role"}),Object(c.jsx)(zt.a,{labelId:"role-select-label",id:"role-select",margin:"dense",value:d,onChange:function(e){return e.target&&e.target.value&&u(e.target.value)},children:hn.map((function(e){return Object(c.jsx)(Lt.a,{value:e,children:e},"role-select".concat(e))}))})]}),Object(c.jsx)(We.a,{variant:"contained",color:"primary",onClick:function(){i?(g(""),fetch("".concat(xe,"/user/create"),{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:i,role:d})}).then((function(e){return e.json()})).then((function(t){if(t.error)return g(t.msg);e.handleRefresh(),e.handleClose()})).catch((function(e){return console.warn(e),g("o noz! there was an error creating user")})).finally((function(){return p(!1)}))):g("type an email!")},disabled:h,children:"CREATE"}),f&&Object(c.jsx)(Pe.a,{color:"error.main",children:Object(c.jsx)(Ue.a,{component:"p",children:f})})]})]})})})})}var On=Object(ot.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return Object(c.jsx)(Mt.a,Object(p.a)({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},e))})),mn=Object(ot.a)((function(e){return{root:{"&:focus":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(Lt.a);function fn(e){var t=a.a.useState(null),n=Object(x.a)(t,2),r=n[0],i=n[1],s=a.a.useState(e.user.role||"none"),o=Object(x.a)(s,2),l=o[0],d=o[1],u=function(){i(null)},j=function(e,t){e&&fetch("".concat(xe,"/user/role"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:e,role:t})}).then((function(e){return e.json()})).then((function(e){u(),d(t)})).catch((function(e){return console.warn("handleRoleChange caught err:",e)}))};return Object(c.jsxs)("div",{children:[Object(c.jsx)(We.a,{"aria-controls":"user-roles-menu","aria-haspopup":"true",variant:"contained",color:"primary",onClick:function(e){i(e.currentTarget)},disabled:e.disabled,children:l}),Object(c.jsxs)(On,{id:"user-roles-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:u,children:[Object(c.jsx)(mn,{children:Object(c.jsx)(P.a,{primary:"admin",onClick:function(){return j(e.user.id,"admin")}})}),Object(c.jsx)(mn,{children:Object(c.jsx)(P.a,{primary:"member",onClick:function(){return j(e.user.id,"member")}})}),Object(c.jsx)(mn,{children:Object(c.jsx)(P.a,{primary:"guest",onClick:function(){return j(e.user.id,"guest")}})})]})]})}var xn=Object(z.a)((function(e){return Object(W.a)({root:{padding:e.spacing(2),maxWidth:"100vw",minHeight:"100vh"}})}));var gn=Object(j.b)((function(e){return{userService:e.session.userService}}),void 0)(Object(v.h)((function(e){var t=xn(),n=e.userService,a=Object(r.createRef)(),i=Object(r.useState)(!1),s=Object(x.a)(i,2),o=s[0],l=s[1],d=Object(r.useState)(!1),u=Object(x.a)(d,2),j=u[0],b=u[1],h={icon:o?"zoom_out":"search",tooltip:o?"Close Search":"Search",isFreeAction:!0,onClick:function(){return l(!o)}},p={icon:"add",tooltip:"add new user",isFreeAction:!0,onClick:function(){return b(!0)}},O={tooltip:"Remove User",icon:"delete",onClick:function(e,t){if(n&&n.user&&n.user.email===t.email)alert("you cannot delete yrself!");else{if(!t.id)return;window.confirm("Are you sure you want to delete ".concat(t.email,"?"))&&fetch("".concat(xe,"/user"),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:t.id})}).then((function(e){return e.json()})).then((function(){return a.current&&a.current.onQueryChange()})).catch((function(e){return console.warn("user deleteAction caught err",e)}))}}},m=Object(r.useState)([h,p,O]),f=Object(x.a)(m,2),g=f[0],v=f[1];return Object(r.useEffect)((function(){v([h,p,O])}),[o]),Object(c.jsxs)("div",{className:t.root,children:[Object(c.jsx)(vt.a,{tableRef:a,columns:[{title:"role",field:"role",type:"string",render:function(e){return Object(c.jsx)(fn,{user:e,disabled:!(!n||!n.user||n.user.email!==e.email)})}},{title:"email",field:"email",type:"string"},{title:"active",field:"active",type:"boolean",filtering:!1},{title:"created",field:"createdAt",type:"datetime",filtering:!1,render:function(e){return new Date(e.createdAt).toLocaleString()}},{title:"updated",field:"updatedAt",type:"datetime",filtering:!1,render:function(e){return new Date(e.updatedAt).toLocaleString()}},{title:"id",field:"id",type:"string",hidden:!0}],data:function(e){return new Promise((function(t,n){fetch("".concat(xe,"/users"),{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){return console.warn(e),t({data:[],page:0,totalCount:0})}))}))},title:"Users",options:{headerStyle:{position:"sticky",top:0},maxBodyHeight:"calc(100vh - 121px - 28px)",pageSize:50,pageSizeOptions:[50,100,500],debounceInterval:750,filtering:!0,search:o,emptyRowsWhenPaging:!1},actions:g}),Object(c.jsx)(pn,{open:j,handleClose:function(){b(!1)},handleRefresh:function(){return a.current&&a.current.onQueryChange()}})]})}))),vn=Object(z.a)((function(e){return Object(W.a)({root:{padding:e.spacing(2),maxWidth:"100vw",minHeight:"100vh"}})}));var yn=function(){var e=vn(),t=Object(r.createRef)(),n=Object(r.useState)(!1),a=Object(x.a)(n,2),i=a[0],s=a[1],o=Object(r.useCallback)((function(){t.current&&t.current.onQueryChange(),s(!1)}),[t,s]),l={tooltip:"destroy all selected products",icon:"delete",onClick:function(e,t){var n=Array.isArray(t)?t.map((function(e){return e.id})):[t.id];0!==n.length&&window.confirm("are sure you want to destroy these ".concat(n.length," products?"))&&fetch("".concat(xe,"/products/destroy"),{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({ids:n})}).catch((function(e){return console.warn("destroy products caught err:",e)})).finally((function(){return s(!0)}))}};Object(r.useEffect)((function(){i&&o()}),[i,o]);var d=Object(r.useState)((function(){fetch("".concat(xe,"/categories")).then((function(e){return e.json()})).then((function(e){return b(e)}))})),u=Object(x.a)(d,2),j=u[0],b=u[1],h=Object(r.useState)((function(){fetch("".concat(xe,"/sub_categories")).then((function(e){return e.json()})).then((function(e){return m(e)}))})),p=Object(x.a)(h,2),O=p[0],m=p[1],f=Object(r.useState)((function(){fetch("".concat(xe,"/products/vendors")).then((function(e){return e.json()})).then((function(e){return y(e)}))})),g=Object(x.a)(f,2),v=g[0],y=g[1];return Object(c.jsx)("div",{className:e.root,children:Object(c.jsx)(vt.a,{tableRef:t,columns:[{title:"category",field:"category",type:"string",lookup:j,filterPlaceholder:"filter"},{title:"sub category",field:"sub_category",type:"string",lookup:O,filterPlaceholder:"filter"},{title:"vendor",field:"vendor",type:"string",lookup:v,filterPlaceholder:"filter"},{title:"import tag",field:"import_tag",type:"string",filterPlaceholder:"filter",filterCellStyle:{paddingTop:"32px"}},{title:"name",field:"name",type:"string",hidden:!0},{title:"name -- description",field:"description",type:"string",filterPlaceholder:"filter",filterCellStyle:{paddingTop:"32px"},render:function(e){return e.name?"".concat(e.name," -- ").concat(e.description):e.description}},{title:"pk size unit",field:"pk",type:"numeric",filtering:!1,render:function(e){return"".concat(e.pk," ").concat(e.size," ").concat(e.unit_type)}},{title:"size",field:"size",type:"string",filtering:!1,hidden:!0},{title:"unit type",field:"unit_type",type:"string",filtering:!1,hidden:!0},{title:"price",field:"ws_price",type:"currency",filtering:!1},{title:"",field:"u_price",type:"currency",filtering:!1},{title:"upc",field:"upc_code",type:"string",hidden:!0},{title:"id",field:"id",type:"string",hidden:!0}],data:function(e){return new Promise((function(t,n){fetch("".concat(xe,"/products"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){return console.warn("onoz, caught err:",e),t({data:[],page:0,totalCount:0})}))}))},title:"Products",options:{headerStyle:{position:"sticky",top:0},maxBodyHeight:"calc(100vh - 121px - 28px)",pageSize:50,pageSizeOptions:[50,100,500],debounceInterval:750,filtering:!0,search:!0,emptyRowsWhenPaging:!1,selection:!0},actions:[l]})})},Sn=n(304),wn=n(374),kn=n(402),Cn=Object(z.a)((function(e){return Object(W.a)({root:{margin:e.spacing(2),padding:e.spacing(2),zIndex:2},gridItem:{margin:e.spacing(2,0)},vendor:{display:"flex",alignItems:"center",margin:e.spacing(2,0)},preFormat:{whiteSpace:"pre-wrap"}})}));function _n(){var e=Cn(),t=Object(r.useState)(!1),n=Object(x.a)(t,2),i=n[0],s=n[1],o=Object(r.useState)(""),l=Object(x.a)(o,2),d=l[0],u=l[1],j=Object(r.useState)(""),b=Object(x.a)(j,2),h=b[0],p=b[1],O=Object(r.useState)(""),m=Object(x.a)(O,2),f=m[0],g=m[1],v=Object(r.useState)(0),y=Object(x.a)(v,2),S=y[0],w=y[1],k=Object(r.useState)(!1),C=Object(x.a)(k,2),_=C[0],I=C[1],N=Object(r.useState)(),T=Object(x.a)(N,2),E=T[0],A=T[1],F=Object(r.useState)(""),P=Object(x.a)(F,2),L=P[0],R=P[1],z=Object(r.useState)(""),W=Object(x.a)(z,2),D=W[0],M=W[1],B=Object(r.useState)((function(){fetch("".concat(xe,"/products/vendors")).then((function(e){return e.json()})).then((function(e){return U(e)}))})),q=Object(x.a)(B,2),H=q[0],U=q[1],J=Object(r.useState)((function(){fetch("".concat(xe,"/products/import_tags")).then((function(e){return e.json()})).then((function(e){return G(e)}))})),$=Object(x.a)(J,2),K=$[0],G=$[1];var V=a.a.useState(null),Q=Object(x.a)(V,2),Y=Q[0],X=Q[1],Z=function(){X(null)};return Object(c.jsxs)(ze.a,{className:e.root,children:[Object(c.jsx)("h3",{children:"Import Products"}),Object(c.jsxs)(Re.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"flex-start",children:[Object(c.jsxs)(Re.a,{item:!0,sm:4,children:[Object(c.jsxs)("div",{className:e.vendor,children:[Object(c.jsx)(tt.a,{label:"Vendor",helperText:"Required.",fullWidth:!0,value:d,onChange:function(e){return u(e.target.value)}}),Object(c.jsx)("div",{children:Object(c.jsx)(We.a,{"aria-controls":"customized-menu","aria-haspopup":"true",variant:"contained",color:"primary",size:"small",onClick:function(e){X(e.currentTarget)},children:Object(c.jsx)(Ut.a,{})})}),Object(c.jsx)(Mt.a,{id:"vendor-menu",anchorEl:Y,keepMounted:!0,open:Boolean(Y),onClose:Z,children:H&&Object.keys(H).map((function(e){return Object(c.jsx)(Lt.a,{onClick:function(){return function(e){u(e),Z()}(e)},children:e},"vendor-sel-".concat(e))}))})]}),Object(c.jsxs)(Rt.a,{fullWidth:!0,className:e.gridItem,children:[Object(c.jsx)(Pt.a,{id:"prev-import-tag-select-label",children:"Previous Import Tag"}),Object(c.jsxs)(zt.a,{labelId:"prev-import-tag-select-label",id:"prev-import-tag-select",value:f,onChange:function(e){return e.target&&g(e.target.value)},children:[Object(c.jsx)(Lt.a,{value:"",children:"None"}),K&&Object.keys(K).map((function(e){return Object(c.jsx)(Lt.a,{value:e,children:e},"tag-sel-".concat(e))}))]}),Object(c.jsx)(Sn.a,{children:"If updating, products with the tag you select here will first be removed."})]}),Object(c.jsx)(tt.a,{label:"Import Tag",helperText:"Required. This should be unique.",fullWidth:!0,value:h,onChange:function(e){return p(e.target.value)},className:e.gridItem}),Object(c.jsx)(tt.a,{label:"Markup",helperText:"Markup percentage. Use decimal format.",type:"number",inputProps:{min:"0",max:"1",step:"0.01"},fullWidth:!0,value:S,onChange:function(e){return w(isNaN(parseFloat(e.target.value))?0:parseFloat(e.target.value))},className:e.gridItem}),Object(c.jsx)(Rt.a,{fullWidth:!0,className:e.gridItem,children:Object(c.jsx)(wn.a,{control:Object(c.jsx)(kn.a,{onChange:function(e,t){I(t)},checked:_,value:"force_check"}),label:"Force duplicate check. (only check this if you absolutly need to!)"})}),Object(c.jsx)("input",{id:"csvFileInput",type:"file",accept:".csv",onChange:function(e){if(s(!0),e.target.files&&e.target.files.length){var t=new FormData;t.append("file",e.target.files[0]),A(t),s(!1)}else A(void 0),s(!1)},disabled:i,className:e.gridItem}),Object(c.jsx)("div",{className:e.gridItem,children:Object(c.jsx)(We.a,{disabled:i||!h||!d||void 0===E,onClick:function(){return R(""),M(""),s(!0),void(E?(E.delete("vendor"),E.delete("import_tag"),E.delete("prev_import_tag"),E.delete("markup"),E.delete("force_check"),E.append("vendor",d),E.append("import_tag",h),E.append("prev_import_tag",f),E.append("markup","".concat(S)),E.append("force_check","".concat(_)),fetch("".concat(xe,"/products/upload"),{method:"POST",credentials:"include",body:E}).then((function(e){return e.json()})).then((function(e){e.error?R(e.msg):M(e.msg)})).catch((function(e){console.warn("fetch caugher err:",e),R(e.toString())})).finally((function(){s(!1);var e=document.getElementById("csvFileInput");e&&(A(void 0),e.value="")}))):R("please select a file!"))},variant:"contained",color:"primary",fullWidth:!0,children:"IMPORT"})}),Object(c.jsxs)("div",{className:e.gridItem,children:[i&&Object(c.jsx)(Le,{}),L&&Object(c.jsxs)("div",{className:e.gridItem,children:[Object(c.jsx)("h3",{children:"Response Error!"}),Object(c.jsx)("p",{className:e.preFormat,children:L})]}),D&&Object(c.jsxs)("div",{className:e.gridItem,children:[Object(c.jsx)("h3",{children:"Response"}),Object(c.jsx)("p",{children:D})]})]})]}),Object(c.jsxs)(Re.a,{item:!0,sm:8,children:[Object(c.jsx)(Ue.a,{variant:"h6",gutterBottom:!0,children:"Helpful Information"}),Object(c.jsx)(Ue.a,{variant:"body1",gutterBottom:!0,component:"div",children:Object(c.jsxs)("dl",{children:[Object(c.jsx)("dt",{children:"What kind of file should be uploaded?"}),Object(c.jsx)("dd",{children:"Comma separated value files with the extension .csv"}),Object(c.jsx)("dt",{children:"What columns will get processed?"}),Object(c.jsxs)("dd",{children:[Object(c.jsx)("b",{children:"unf"}),", ",Object(c.jsx)("b",{children:"upc_code"}),", ",Object(c.jsx)("b",{children:"name"}),", ",Object(c.jsx)("b",{children:"description"}),","," ",Object(c.jsx)("b",{children:"pk"}),", ",Object(c.jsx)("b",{children:"size"}),", ",Object(c.jsx)("b",{children:"unit_type"}),", ",Object(c.jsx)("b",{children:"ws_price"}),","," ",Object(c.jsx)("b",{children:"u_price"}),", ",Object(c.jsx)("b",{children:"ws_price_markup"}),", ",Object(c.jsx)("b",{children:"u_price_markup"}),","," ",Object(c.jsx)("b",{children:"category"}),", ",Object(c.jsx)("b",{children:"sub_category"}),", ",Object(c.jsx)("b",{children:"no_backorder"}),","," ",Object(c.jsx)("b",{children:"codes"}),", ",Object(c.jsx)("b",{children:"a"}),", ",Object(c.jsx)("b",{children:"r"}),", ",Object(c.jsx)("b",{children:"c"}),", ",Object(c.jsx)("b",{children:"l"}),", ",Object(c.jsx)("b",{children:"d"}),","," ",Object(c.jsx)("b",{children:"f"}),", ",Object(c.jsx)("b",{children:"g"}),", ",Object(c.jsx)("b",{children:"v"}),", ",Object(c.jsx)("b",{children:"w"}),", ",Object(c.jsx)("b",{children:"y"}),", ",Object(c.jsx)("b",{children:"k"}),","," ",Object(c.jsx)("b",{children:"ft"}),", ",Object(c.jsx)("b",{children:"m"}),", ",Object(c.jsx)("b",{children:"s"}),", ",Object(c.jsx)("b",{children:"n"}),", ",Object(c.jsx)("b",{children:"og"}),"."]}),Object(c.jsx)("dt",{children:"Are any of these optional?"}),Object(c.jsxs)("dd",{children:[Object(c.jsx)("b",{children:"unf"}),", ",Object(c.jsx)("b",{children:"ws_price_markup"}),", ",Object(c.jsx)("b",{children:"u_price_markup"}),","," ",Object(c.jsx)("b",{children:"category"}),", ",Object(c.jsx)("b",{children:"sub_category"}),", ",Object(c.jsx)("b",{children:"no_backorder"}),","," ",Object(c.jsx)("b",{children:"codes"}),", ",Object(c.jsx)("b",{children:"a"}),", ",Object(c.jsx)("b",{children:"r"}),", ",Object(c.jsx)("b",{children:"c"}),", ",Object(c.jsx)("b",{children:"l"}),", ",Object(c.jsx)("b",{children:"d"}),","," ",Object(c.jsx)("b",{children:"f"}),", ",Object(c.jsx)("b",{children:"g"}),", ",Object(c.jsx)("b",{children:"v"}),", ",Object(c.jsx)("b",{children:"w"}),", ",Object(c.jsx)("b",{children:"y"}),", ",Object(c.jsx)("b",{children:"k"}),","," ",Object(c.jsx)("b",{children:"ft"}),", ",Object(c.jsx)("b",{children:"m"}),", ",Object(c.jsx)("b",{children:"s"}),", ",Object(c.jsx)("b",{children:"n"}),", ",Object(c.jsx)("b",{children:"og"}),"."]}),Object(c.jsxs)("dt",{children:[Object(c.jsx)("b",{children:"codes"})," column"]}),Object(c.jsxs)("dd",{children:["the ",Object(c.jsx)("b",{children:"codes"})," column value can be a comma-separated list of codes. the values that can be entered in this field are any combination of a, r, c, l, d, f, g, v, w, y, k, ft, m, s, n, og, 1, 2, 3."]}),Object(c.jsx)("dt",{children:"How do the code columns translate?"}),Object(c.jsxs)("dd",{children:["The values in the code columns need to be the same as the header. so for example if there's a column ",Object(c.jsx)("b",{children:"a"})," then the value for the fields in the column need to be ",Object(c.jsx)("i",{children:"a"})," (or blank if not appliciable). except for the ",Object(c.jsx)("b",{children:"og"})," column which can have values og, 1, 2, or 3.",Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"code"}),Object(c.jsx)("th",{children:"translation"})]})}),Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"a"}),Object(c.jsx)("td",{children:"Artificial ingredients"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"c"}),Object(c.jsx)("td",{children:"Low carb"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"d"}),Object(c.jsx)("td",{children:"Dairy free"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"f"}),Object(c.jsx)("td",{children:"Food Service items"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"g"}),Object(c.jsx)("td",{children:"Gluten free"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"k"}),Object(c.jsx)("td",{children:"Kosher"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"l"}),Object(c.jsx)("td",{children:"Low sodium/no salt"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"m"}),Object(c.jsx)("td",{children:"Non-GMO Project Verified"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"r"}),Object(c.jsx)("td",{children:"Refined sugar"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"v"}),Object(c.jsx)("td",{children:"Vegan"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"w"}),Object(c.jsx)("td",{children:"Wheat free"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"ft"}),Object(c.jsx)("td",{children:"Fair Trade"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"n"}),Object(c.jsx)("td",{children:"Natural"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"s"}),Object(c.jsx)("td",{children:"Specialty Only"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"y"}),Object(c.jsx)("td",{children:"Yeast free"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"og"}),Object(c.jsx)("td",{children:"Organic"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"1"}),Object(c.jsx)("td",{children:"100% organic"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"2"}),Object(c.jsx)("td",{children:"95%+ organic"})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:"3"}),Object(c.jsx)("td",{children:"70%+ organic"})]})]})]})]}),Object(c.jsx)("dt",{children:"How is markup applied?"}),Object(c.jsxs)("dd",{children:["Markup is a percentage in decimal format so 0.10 will markup products by 10%. The formula is: ",Object(c.jsx)("i",{children:"PRICE + (PRICE * MARKUP)"})," ","so if the value of ",Object(c.jsx)("b",{children:"ws_price"})," is 10.00 and the markup specified is 0.10 the the markup price will be 11.00.",Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),"If any rows of the price sheet has a non-empty, non-zero value in the ",Object(c.jsx)("b",{children:"ws_price_markup"})," or ",Object(c.jsx)("b",{children:"u_price_markup"})," then that will be used as the markup price. This means only some rows of the price sheet can contain special markups while the rest of the sheet can have a single markup applied."]}),Object(c.jsx)("dt",{children:"Import Tag"}),Object(c.jsxs)("dd",{children:["This field is used to track changes to new price sheets that are meant to update products that have already been imported once. A use-case for this is when uploading partial lists of product for a vendor. So for example if a sub-set of products are imported, then a while later a new sheet of products can be imported without having to destroy and re-import all the products for a vendor. If uploading a complete list of all products for a particular vendor then it would be reasonable to use the same value as the Vendor field.",Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)("b",{children:"NOTE:"})," it can be useful to include the current date in the value for the Import Tag field (or otherwise make this a unique value). When creating wholesale orders it might be useful to know which price sheet a product that was ordered came from.",Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),"When the Previous Import Tag is specified, products with that tag are first deleted before new products are created."]})]})})]})]})]})}var In=Object(z.a)((function(e){return Object(W.a)({root:{padding:e.spacing(2),maxWidth:"100vw",minHeight:"100vh"}})}));var Nn=function(){var e=In(),t=Object(r.createRef)(),n=Object(r.useState)(!1),a=Object(x.a)(n,2),i=a[0],s=a[1],o=Object(r.useCallback)((function(){t.current&&t.current.onQueryChange(),s(!1)}),[t,s]),l={tooltip:"destroy all selected products",icon:"delete",onClick:function(e,t){var n=Array.isArray(t)?t.map((function(e){return e.id})):[t.id];0!==n.length&&window.confirm("are sure you want to destroy these ".concat(n.length," products?"))&&fetch("".concat(xe,"/products/destroy"),{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({ids:n})}).catch((function(e){return console.warn("destroy products caught err:",e)})).finally((function(){return s(!0)}))}},d={tooltip:"Export .csv",icon:"file_copy",isFreeAction:!0,onClick:function(){window.location.assign("".concat(xe,"/products/stock_csv"))}};Object(r.useEffect)((function(){i&&o()}),[i,o]);var u=Object(r.useState)((function(){fetch("".concat(xe,"/categories")).then((function(e){return e.json()})).then((function(e){return h(e)}))})),j=Object(x.a)(u,2),b=j[0],h=j[1],p=Object(r.useState)((function(){fetch("".concat(xe,"/sub_categories")).then((function(e){return e.json()})).then((function(e){return f(e)}))})),O=Object(x.a)(p,2),m=O[0],f=O[1],g=Object(r.useState)((function(){fetch("".concat(xe,"/products/vendors")).then((function(e){return e.json()})).then((function(e){return S(e)}))})),v=Object(x.a)(g,2),y=v[0],S=v[1];return Object(c.jsx)("div",{className:e.root,children:Object(c.jsx)(vt.a,{tableRef:t,columns:[{title:"category",field:"category",type:"string",lookup:b,filterPlaceholder:"filter"},{title:"sub category",field:"sub_category",type:"string",lookup:m,filterPlaceholder:"filter"},{title:"vendor",field:"vendor",type:"string",lookup:y,filterPlaceholder:"filter"},{title:"import tag",field:"import_tag",type:"string",filterPlaceholder:"filter",filterCellStyle:{paddingTop:"32px"}},{title:"name",field:"name",type:"string",hidden:!0},{title:"name -- description",field:"description",type:"string",filterPlaceholder:"filter",filterCellStyle:{paddingTop:"32px"},render:function(e){return e.name?"".concat(e.name," -- ").concat(e.description):e.description}},{title:"count",field:"count_on_hand",type:"numeric",filterPlaceholder:"filter",filterCellStyle:{paddingTop:"32px"}},{title:"pk",field:"pk",type:"numeric",filtering:!1,render:function(e){return"".concat(e.pk," ").concat(e.size," ").concat(e.unit_type)}},{title:"no_backorder",field:"no_backorder",type:"boolean"},{title:"upc",field:"upc_code",type:"string",hidden:!0},{title:"id",field:"id",type:"string",hidden:!0}],data:function(e){return new Promise((function(t,n){fetch("".concat(xe,"/products/stock"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){return console.warn("onoz, caught err:",e),t({data:[],page:0,totalCount:0})}))}))},title:"Stock On Hand",options:{headerStyle:{position:"sticky",top:0},maxBodyHeight:"calc(100vh - 121px - 28px)",pageSize:50,pageSizeOptions:[50,100,500],debounceInterval:750,filtering:!0,search:!0,emptyRowsWhenPaging:!1,selection:!0},actions:[d,l]})})},Tn=Object(z.a)((function(e){return Object(W.a)({root:{margin:e.spacing(2),padding:e.spacing(2),zIndex:2},gridItem:{margin:e.spacing(2,0)},vendor:{display:"flex",alignItems:"center",margin:e.spacing(2,0)},preFormat:{whiteSpace:"pre-wrap"}})}));function En(){var e=Tn(),t=Object(r.useState)(!1),n=Object(x.a)(t,2),a=n[0],i=n[1],s=Object(r.useState)(!0),o=Object(x.a)(s,2),l=o[0],d=o[1],u=Object(r.useState)(),j=Object(x.a)(u,2),b=j[0],h=j[1],p=Object(r.useState)(""),O=Object(x.a)(p,2),m=O[0],f=O[1],g=Object(r.useState)(""),v=Object(x.a)(g,2),y=v[0],S=v[1];return Object(c.jsxs)(ze.a,{className:e.root,children:[Object(c.jsx)("h3",{children:"Add Stock Changes"}),Object(c.jsxs)(Re.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"flex-start",children:[Object(c.jsxs)(Re.a,{item:!0,sm:4,children:[Object(c.jsx)(Rt.a,{fullWidth:!0,className:e.gridItem,children:Object(c.jsx)(wn.a,{control:Object(c.jsx)(kn.a,{onChange:function(e,t){d(t)},checked:l,value:"dryrun"}),label:"Dry Run"})}),Object(c.jsx)("input",{id:"AddStockCSVFileInput",type:"file",accept:".csv",onChange:function(e){if(i(!0),e.target.files&&e.target.files.length){var t=new FormData;t.append("file",e.target.files[0]),h(t),i(!1)}else h(void 0),i(!1)},disabled:a,className:e.gridItem}),Object(c.jsx)("div",{className:e.gridItem,children:Object(c.jsx)(We.a,{disabled:a||void 0===b,onClick:function(){return f(""),S(""),i(!0),void(b?(b.delete("dryrun"),b.append("dryrun","".concat(l)),fetch("".concat(xe,"/products/add_stock"),{method:"POST",credentials:"include",body:b}).then((function(e){return e.json()})).then((function(e){if(e.error)f(e.msg);else{if(!l){var t=document.getElementById("AddStockCSVFileInput");t&&(h(void 0),t.value="")}S(e.msg)}})).catch((function(e){console.warn("fetch caugher err:",e),f(e.toString())})).finally((function(){return i(!1)}))):f("please select a file!"))},variant:"contained",color:"primary",fullWidth:!0,children:"ADD STOCK"})}),Object(c.jsxs)("div",{className:e.gridItem,children:[a&&Object(c.jsx)(Le,{}),m&&Object(c.jsxs)("div",{className:e.gridItem,children:[Object(c.jsx)("h3",{children:"Response Error!"}),Object(c.jsx)("p",{className:e.preFormat,children:m})]}),y&&Object(c.jsxs)("div",{className:e.gridItem,children:[Object(c.jsx)("h3",{children:"Response"}),Object(c.jsx)("p",{className:e.preFormat,children:y})]})]})]}),Object(c.jsxs)(Re.a,{item:!0,sm:8,children:[Object(c.jsx)(Ue.a,{variant:"h6",gutterBottom:!0,children:"Helpful Information"}),Object(c.jsx)(Ue.a,{variant:"body1",gutterBottom:!0,component:"div",children:Object(c.jsxs)("dl",{children:[Object(c.jsx)("dt",{children:"Product Identifier"}),Object(c.jsxs)("dd",{children:[Object(c.jsx)("b",{children:"unf"})," and ",Object(c.jsx)("b",{children:"upc_code"})," columns are used to identify a unique product."]}),Object(c.jsx)("dt",{children:"Columns"}),Object(c.jsxs)("dd",{children:[Object(c.jsx)("b",{children:"unf"}),", ",Object(c.jsx)("b",{children:"upc_code"}),", ",Object(c.jsx)("b",{children:"count_on_hand"}),","," ",Object(c.jsx)("b",{children:"count_on_hand_change"}),", and ",Object(c.jsx)("b",{children:"no_backorder"}),"; any other columns will be ignored.",Object(c.jsxs)("p",{children:["precedence: first will check if ",Object(c.jsx)("b",{children:"count_on_hand"})," is a number, and if so, will do a hard count set for the value specified. if ",Object(c.jsx)("b",{children:"count_on_hand"})," is not a number, then will look for a number in ",Object(c.jsx)("b",{children:"count_on_hand_change"})," (and add that to the product ",Object(c.jsx)("b",{children:"count_on_hand"})," value)."]}),Object(c.jsxs)("p",{children:[Object(c.jsx)("i",{children:"note:"})," use whole integer numbers only (so 0.4 would turn into 0), negative numbers would subtract."]})]}),Object(c.jsx)("dt",{children:"Dry Run"}),Object(c.jsx)("dd",{children:"when checked, this will not modify inventory (useful for debugging .csv files)."})]})})]})]})]})}var An=n(95),Fn=n(424),Pn=n.n(Fn),Ln=n(129),Rn=n.n(Ln),zn=n(256),Wn=n.n(zn),Dn=n(376),Mn=Object(z.a)((function(e){return Object(W.a)({root:{width:"100%",overflowX:"auto",height:"100%"},table:{maxWidth:"95vw",padding:e.spacing(1),borderCollapse:"separate","& td":{border:"none"}},qtyinput:{width:"50px"}})}));function Bn(e){return void 0===e?"0.00":"$".concat("string"===typeof e?parseFloat(e).toFixed(2):e.toFixed(2))}function qn(e){var t=e.data&&e.data.product&&e.data.product.u_price?parseFloat(e.data.product.u_price):e.price,n=e.data&&e.data.product?parseFloat(e.data.product.ws_price):e.price;return"EA"===e.selected_unit&&t?isNaN(e.quantity*t)?0:e.quantity*t:isNaN(e.quantity*n)?0:e.quantity*n}function Hn(e){var t=[];return e.data&&e.data.product&&e.data.product.pk&&1!==e.data.product.pk&&t.push(e.data.product.pk),e.data&&e.data.product&&e.data.product.size&&t.push(e.data.product.size),t.join(" / ")}var Un=function(e){var t=Mn(),n=e.line_items.filter((function(e){return"product"===e.kind})).map((function(e){var t=e.total;return"string"===typeof t?parseFloat(t):t})).reduce((function(e,t){return e+t}),0),a=function(e){return e.filter((function(e){return"adjustment"===e.kind})).map((function(e){var t=e.total;return parseFloat("".concat(t))})).reduce((function(e,t){return e+t}),0)}(e.line_items),i=ge*(n+a),s=i+n+a,o=e.onTaxesChange,l=e.onTotalChange,d=e.onSubTotalChange;Object(r.useEffect)((function(){o(i)}),[i]),Object(r.useEffect)((function(){l(s)}),[s]),Object(r.useEffect)((function(){d(n)}),[n]);var u=function(t,n){t.quantity=n>0?n:1,t.total=qn(t);var c=e.line_items.indexOf(t);e.onLineItemUpdated(c,t)},j=function(t,n){t.description=n;var c=e.line_items.indexOf(t);e.onLineItemUpdated(c,t)},b=function(t,n){t.price=n,t.total=qn(t);var c=e.line_items.indexOf(t);e.onLineItemUpdated(c,t)},h=function(t){var n=e.line_items.indexOf(t);e.removeLineItem(n)},p=e.line_items.filter((function(e){return"product"===e.kind&&"on_hand"===e.status})),O=e.line_items.filter((function(e){return"product"===e.kind&&"on_hand"!==e.status})),m=e.line_items.filter((function(e){return"adjustment"===e.kind})),f=e.line_items.filter((function(e){return"payment"===e.kind})),x=f.reduce((function(e,t){return e+parseFloat("".concat(t.total))}),0),g=e.line_items.filter((function(e){return"credit"===e.kind})),v=g.reduce((function(e,t){return e+parseFloat("".concat(t.total))}),0),y=parseFloat("".concat(s))+parseFloat("".concat(v))+parseFloat("".concat(x));function S(n,r,a){return Object(c.jsxs)(He.a,{children:[Object(c.jsxs)(Be.a,{align:"center",children:[Object(c.jsx)(ht.a,{title:"remove line item",children:Object(c.jsx)(Et.a,{"aria-label":"delete",size:"small",onClick:function(e){return h(n)},children:Object(c.jsx)(Rn.a,{fontSize:"inherit"})})}),Object(c.jsx)(ht.a,{title:"give order credits",children:Object(c.jsx)(Et.a,{"aria-label":"issue order credits for this item",onClick:function(){return function(t){e.createCreditFromLineItem(t)}(n)},children:Object(c.jsx)(oe.a,{})})})]}),Object(c.jsxs)(Be.a,{children:["[",n.vendor,"] ",n.description]}),Object(c.jsxs)(Be.a,{align:"right",children:[Object(c.jsx)("div",{children:n.data&&n.data.product&&"EA"===n.selected_unit&&n.data.product.u_price?Bn(n.data.product.u_price):Bn(n.data&&n.data.product?n.data.product.ws_price:n.price)}),Object(c.jsx)("div",{children:Hn(n)})]}),Object(c.jsx)(Be.a,{align:"center",children:n.data&&n.data.product&&n.data.product.u_price&&n.data.product.u_price!==n.data.product.ws_price?Object(c.jsxs)(zt.a,{value:n.selected_unit,onChange:function(t){return function(t,n){t.selected_unit=n,t.data&&t.data.product&&(t.price="CS"===n?+t.data.product.ws_price:+t.data.product.u_price),t.total=qn(t);var c=e.line_items.indexOf(t);e.onLineItemUpdated(c,t)}(n,t.target.value)},margin:"dense",children:[Object(c.jsx)(Lt.a,{value:"CS",children:"Case"}),Object(c.jsx)(Lt.a,{value:"EA",children:"Each"})]}):n.data&&n.data.product&&"CS"===n.data.product.unit_type?"Case":"Each"}),Object(c.jsx)(Be.a,{align:"right",children:Object(c.jsx)(tt.a,{className:t.qtyinput,type:"number",InputLabelProps:{shrink:!0},margin:"dense",fullWidth:!0,value:n.quantity,onChange:function(e){return u(n,e.target.value)},inputProps:{min:"1",step:"1"}})}),Object(c.jsx)(Be.a,{align:"right",children:Bn(n.total)})]},"li".concat(a).concat(r))}return Object(c.jsx)(ze.a,{className:t.root,children:Object(c.jsxs)(De.a,{className:t.table,"aria-label":"cart",children:[Object(c.jsx)(qe.a,{children:Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{align:"center"}),Object(c.jsx)(Be.a,{children:"Description"}),Object(c.jsx)(Be.a,{align:"center",children:"Price"}),Object(c.jsx)(Be.a,{align:"center",children:"Unit"}),Object(c.jsx)(Be.a,{align:"center",children:"Qty."}),Object(c.jsx)(Be.a,{align:"center",children:"Total"})]})}),Object(c.jsxs)(Me.a,{children:[p.length>0&&Object(c.jsx)(He.a,{children:Object(c.jsx)(Be.a,{align:"left",colSpan:3,children:"On Hand"})}),p.map((function(e,t){return S(e,t,"on_hand")})),O.length>0&&Object(c.jsx)(He.a,{children:Object(c.jsx)(Be.a,{align:"left",colSpan:3,children:"Backorder"})}),O.map((function(e,t){return S(e,t,"backorder")})),Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{rowSpan:1,colSpan:3}),Object(c.jsx)(Be.a,{align:"right",children:"Subtotal"}),Object(c.jsx)(Be.a,{align:"center",children:e.line_items&&e.line_items.length}),Object(c.jsx)(Be.a,{align:"right",children:Bn(n)})]}),m.map((function(e,n){return Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{align:"center",children:Object(c.jsx)(ht.a,{title:"remove adjustment",children:Object(c.jsx)(Et.a,{"aria-label":"delete",size:"small",onClick:function(t){return h(e)},children:Object(c.jsx)(Rn.a,{fontSize:"inherit"})})})}),Object(c.jsx)(Be.a,{colSpan:2,children:Object(c.jsx)(tt.a,{type:"text",InputLabelProps:{shrink:!0},margin:"dense",fullWidth:!0,value:e.description,onChange:function(t){return j(e,t.target.value)}})}),Object(c.jsx)(Be.a,{children:Object(c.jsx)(tt.a,{type:"number",margin:"dense",fullWidth:!0,value:e.price||e.total,onChange:function(t){return b(e,t.target.value)},inputProps:{min:"-9999",max:"9999",step:"1"},InputProps:{startAdornment:Object(c.jsx)(Dn.a,{position:"start",children:"$"})}})}),Object(c.jsx)(Be.a,{align:"right",children:Object(c.jsx)(tt.a,{className:t.qtyinput,type:"number",InputLabelProps:{shrink:!0},margin:"dense",fullWidth:!0,value:e.quantity,onChange:function(t){return u(e,t.target.value)},inputProps:{min:"1",step:"1"}})}),Object(c.jsx)(Be.a,{align:"right",children:Bn(e.total)})]},"li".concat(n))})),Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{rowSpan:1,colSpan:3}),Object(c.jsx)(Be.a,{align:"right",children:"Tax"}),Object(c.jsx)(Be.a,{align:"center",children:ve}),Object(c.jsx)(Be.a,{align:"right",children:Bn(i)})]}),f.length>0&&Object(c.jsx)(He.a,{children:Object(c.jsx)(Be.a,{component:"td",scope:"row",children:Object(c.jsx)("b",{children:"Payments"})})}),f.map((function(e,n){return Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{align:"center",children:Object(c.jsx)(ht.a,{title:"remove payment",children:Object(c.jsx)(Et.a,{"aria-label":"delete",size:"small",onClick:function(t){return h(e)},children:Object(c.jsx)(Rn.a,{fontSize:"inherit"})})})}),Object(c.jsxs)(Be.a,{colSpan:2,children:[Object(c.jsx)(tt.a,{type:"text",InputLabelProps:{shrink:!0},margin:"dense",fullWidth:!0,value:e.description,onChange:function(t){return j(e,t.target.value)}}),e.data&&e.data.payment&&e.data.payment.receipt_number&&Object(c.jsx)(yt.a,{color:"secondary",href:e.data.payment.receipt_url,target:"_blank",rel:"noopener noreferrer",children:e.data.payment.receipt_number})]}),Object(c.jsx)(Be.a,{children:Object(c.jsx)(tt.a,{type:"number",margin:"dense",fullWidth:!0,value:e.price||e.total,onChange:function(t){return b(e,t.target.value)},inputProps:{min:"-9999",max:"-0.01",step:"0.01"},InputProps:{startAdornment:Object(c.jsx)(Dn.a,{position:"start",children:"$"})}})}),Object(c.jsx)(Be.a,{align:"right",children:Object(c.jsx)(tt.a,{className:t.qtyinput,type:"number",InputLabelProps:{shrink:!0},margin:"dense",fullWidth:!0,value:e.quantity,onChange:function(t){return u(e,t.target.value)},inputProps:{min:"1",step:"1"}})}),Object(c.jsx)(Be.a,{align:"right",children:Bn(e.total)})]},"li".concat(n))})),g.length>0&&Object(c.jsx)(He.a,{children:Object(c.jsx)(Be.a,{component:"td",scope:"row",children:Object(c.jsx)("b",{children:"Credits"})})}),g.map((function(e,n){return Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{align:"center",children:Object(c.jsx)(ht.a,{title:"remove credit",children:Object(c.jsx)(Et.a,{"aria-label":"delete",size:"small",onClick:function(t){return h(e)},children:Object(c.jsx)(Rn.a,{fontSize:"inherit"})})})}),Object(c.jsx)(Be.a,{colSpan:2,children:Object(c.jsx)(tt.a,{type:"text",InputLabelProps:{shrink:!0},margin:"dense",fullWidth:!0,value:e.description,onChange:function(t){return j(e,t.target.value)}})}),Object(c.jsx)(Be.a,{children:Object(c.jsx)(tt.a,{type:"number",margin:"dense",fullWidth:!0,value:e.price||e.total,onChange:function(t){return b(e,t.target.value)},inputProps:{min:"-9999",max:"-0.01",step:"0.01"},InputProps:{startAdornment:Object(c.jsx)(Dn.a,{position:"start",children:"$"})}})}),Object(c.jsx)(Be.a,{align:"right",children:Object(c.jsx)(tt.a,{className:t.qtyinput,type:"number",InputLabelProps:{shrink:!0},margin:"dense",fullWidth:!0,value:e.quantity,onChange:function(t){return u(e,t.target.value)},inputProps:{min:"1",step:"1"}})}),Object(c.jsx)(Be.a,{align:"right",children:Bn(e.total)})]},"li".concat(n))})),Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{rowSpan:1,colSpan:3}),Object(c.jsx)(Be.a,{align:"right",children:"Total"}),Object(c.jsx)(Be.a,{align:"right",colSpan:2,children:Bn(s)})]}),y>0&&Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{component:"td",scope:"row",colSpan:3}),Object(c.jsx)(Be.a,{component:"td",scope:"row",align:"right",children:Object(c.jsx)("b",{children:"Balance Due"})}),Object(c.jsx)(Be.a,{component:"td",scope:"row",align:"right",colSpan:2,children:Object(c.jsxs)("b",{children:["$",y.toFixed(2)]})})]}),y<0&&Object(c.jsxs)(He.a,{children:[Object(c.jsx)(Be.a,{component:"td",scope:"row",colSpan:3}),Object(c.jsx)(Be.a,{component:"td",scope:"row",align:"right",children:Object(c.jsx)("b",{children:"Credit Owed"})}),Object(c.jsx)(Be.a,{component:"td",scope:"row",align:"right",colSpan:2,children:Object(c.jsxs)("b",{children:["$",Math.abs(y).toFixed(2)]})})]})]})]})})},Jn=n(665),$n=n(365);function Kn(e){var t=a.a.useState(!1),n=Object(x.a)(t,2),r=n[0],i=n[1],s=a.a.useState([]),o=Object(x.a)(s,2),l=o[0],d=o[1],u=a.a.useState(""),j=Object(x.a)(u,2),b=j[0],h=j[1],O=a.a.useState(r&&0===l.length),m=Object(x.a)(O,2),f=m[0],g=m[1];return a.a.useEffect((function(){var e=!0;if(f)return Object(fe.a)(me.a.mark((function t(){var n,c;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(xe,"/products"),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({search:b})});case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,e&&(d(c.data.map((function(e){return{name:"".concat(e.name," ").concat(e.description," ").concat(e.pk," ").concat(e.size," $").concat(e.ws_price," ").concat(e.u_price!==e.ws_price?"($".concat(e.u_price," EA)"):"").concat(isNaN(parseInt("".concat(e.count_on_hand)))?"":" ".concat(e.count_on_hand," on hand")),product:e}}))),g(!1));case 7:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[f,b]),a.a.useEffect((function(){r||d([])}),[r]),Object(c.jsx)(Jn.a,{id:"add-line-item-autocomplete",style:{width:"100%"},open:r,onOpen:function(){i(!0)},onClose:function(){i(!1)},getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onChange:function(t,n){return n&&"string"!==typeof n&&e.onItemSelected(n)},options:l,loading:f,freeSolo:!0,renderInput:function(e){return Object(c.jsx)(tt.a,Object(p.a)(Object(p.a)({},e),{},{label:"Product search",fullWidth:!0,variant:"outlined",value:b,onChange:function(e){var t;(t=e.target.value)&&t.length>2&&(h(t),g(!0))},InputProps:Object(p.a)(Object(p.a)({},e.InputProps),{},{endAdornment:Object(c.jsxs)(a.a.Fragment,{children:[f?Object(c.jsx)($n.a,{size:20}):null,e.InputProps.endAdornment]})})}))}})}function Gn(e){var t=Object(r.useState)(!1),n=Object(x.a)(t,2),i=n[0],s=n[1],o=Object(r.useState)([]),l=Object(x.a)(o,2),d=l[0],u=l[1],j=Object(r.useState)(""),b=Object(x.a)(j,2),h=b[0],O=b[1],m=Object(r.useState)(i&&0===d.length),f=Object(x.a)(m,2),g=f[0],v=f[1];return Object(r.useEffect)((function(){var e=!0;if(g)return Object(fe.a)(me.a.mark((function t(){var n,c;return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(xe,"/members"),{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({search:h})});case 2:return n=t.sent,t.next=5,n.json();case 5:c=t.sent,e&&(u(c.data.map((function(e){return{name:"".concat(e.name," ").concat(e.User&&e.User.email?e.User.email:e.registration_email),member:e}}))),v(!1));case 7:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[g,h]),Object(r.useEffect)((function(){i||u([])}),[i]),Object(c.jsx)(Jn.a,{id:"add-line-item-autocomplete",style:{width:"100%"},open:i,onOpen:function(){s(!0)},onClose:function(){s(!1)},getOptionSelected:function(e,t){return e.name===t.name},getOptionLabel:function(e){return e.name},onChange:function(t,n){return n&&"string"!==typeof n&&e.onItemSelected(n)},options:d,loading:g,freeSolo:!0,renderInput:function(e){return Object(c.jsx)(tt.a,Object(p.a)(Object(p.a)({},e),{},{label:"Member search",fullWidth:!0,autoFocus:!0,variant:"outlined",value:h,onChange:function(e){var t;(t=e.target.value)&&t.length>0&&(O(t),v(!0))},InputProps:Object(p.a)(Object(p.a)({},e.InputProps),{},{endAdornment:Object(c.jsxs)(a.a.Fragment,{children:[g?Object(c.jsx)($n.a,{size:20}):null,e.InputProps.endAdornment]})})}))}})}var Vn={id:"new",status:"new",payment_status:"balance_due",shipment_status:"backorder",total:0,item_count:0,subtotal:0,name:"",email:"",phone:"",address:"",notes:"",createdAt:"",updatedAt:"",OrderLineItems:[]},Qn=Object(z.a)((function(e){var t;return Object(W.a)({root:{padding:e.spacing(2),maxWidth:"100vw",minHeight:"100vh"},form:{marginBottom:e.spacing(4)},formInput:{display:"block",marginBottom:e.spacing(2)},status:{marginBottom:e.spacing(2)},liHeader:{display:"inline-block",marginRight:e.spacing(2)},sticky:(t={},Object(An.a)(t,e.breakpoints.up("md"),{position:"sticky",top:"0px"}),Object(An.a)(t,"zIndex",1),Object(An.a)(t,"backgroundColor",e.palette.background.paper),t),saveBtn:{flexGrow:1,marginLeft:e.spacing(2)},orderSideHeading:{display:"flex",justifyContent:"space-between",alignItems:"center",minHeight:"54px",marginBottom:e.spacing(2)},emailIcon:{marginRight:"5px"}})}));function Yn(e,t){return Xn.apply(this,arguments)}function Xn(){return(Xn=Object(fe.a)(me.a.mark((function e(t,n){var c;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(xe,"/admin/store_credit"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({MemberId:t})}).then((function(e){return e.json()})).then((function(e){return e&&e.store_credit?e.store_credit:0})).catch((function(e){return 0}));case 2:c=e.sent,n(c);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zn=Object(j.b)((function(e){return{userService:e.session.userService}}),void 0)(Object(v.h)((function(e){var t=Qn(),n=Object(r.useState)(""),i=Object(x.a)(n,2),s=i[0],o=i[1],l=Object(r.useState)(!0),d=Object(x.a)(l,2),u=d[0],j=d[1],b=Object(r.useState)(Vn),h=Object(x.a)(b,2),O=h[0],m=h[1],f=Object(r.useState)(!1),g=Object(x.a)(f,2),v=g[0],y=g[1],S=Object(r.useState)(!1),w=Object(x.a)(S,2),k=w[0],C=w[1],_=Object(r.useState)(!1),I=Object(x.a)(_,2),N=I[0],T=I[1],E=a.a.useState(!1),A=Object(x.a)(E,2),F=A[0],P=A[1],L=a.a.useState(""),R=Object(x.a)(L,2),z=R[0],W=R[1],D=Object(r.useState)(!0),M=Object(x.a)(D,2),B=M[0],q=M[1],H=Object(r.useState)(!1),U=Object(x.a)(H,2),J=U[0],$=U[1],K=function(e,t){var n=Object(r.useState)({status:"loading"}),c=Object(x.a)(n,2),a=c[0],i=c[1];return Object(r.useEffect)((function(){e&&0!==e.length?fetch("".concat(xe,"/order/edit/").concat(e),{headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(e){return e.json()})).then((function(e){i({status:"loaded",payload:e})})).catch((function(e){console.warn("useOrderService fetch caught err:",e),i(Object(p.a)({},e))})).finally((function(){t(!1)})):t(!1)}),[e,t]),a}(s,j),G=Object(r.useState)(0),V=Object(x.a)(G,2),Q=V[0],Y=V[1];Object(r.useEffect)((function(){if("loaded"===K.status&&K.payload){var e=K.payload;e.Member&&e.Member.discount&&e.Member.discount>0&&$(!0),e.Member&&e.Member.id&&Yn(e.Member.id,Y),m(e)}}),[K]);var X=e.match.params.id;Object(r.useEffect)((function(){X&&"new"!==X&&o(X)}),[X]),Object(r.useEffect)((function(){if(O&&!O.UserId&&e.userService&&e.userService.user&&e.userService.user.id){var t=e.userService.user.id;t&&m((function(e){return Object(p.a)(Object(p.a)({},e),{},{UserId:t})}))}}),[e.userService,O]),Object(r.useEffect)((function(){if(B&&O){if(O&&O.OrderLineItems&&J){var e=O.OrderLineItems.map((function(e){var t=!1;if(e.data&&e.data.product&&"CS"===e.selected_unit?t=e.data.product.ws_price!==e.data.product.ws_price_cost:e.data&&e.data.product&&"EA"===e.selected_unit&&(t=e.data.product.u_price!==e.data.product.u_price_cost),t&&e.data&&e.data.product){var n="CS"===e.selected_unit?parseFloat(e.data.product.ws_price_cost):parseFloat(e.data.product.u_price_cost);return+(e.total-n*e.quantity).toFixed(2)}return 0})).reduce((function(e,t){return e+t}),0);if(e>0){var t=-e.toFixed(2),n=O.OrderLineItems.filter((function(e){return"adjustment"===e.kind&&"member discount"===e.description}));if(n[0]){if(n[0].total!==t)te(O.OrderLineItems.indexOf(n[0]),Object(p.a)(Object(p.a)({},n[0]),{},{price:t,total:t}))}else{var c={description:"member discount",quantity:1,price:t,total:t,kind:"adjustment"};m((function(e){return Object(p.a)(Object(p.a)({},e),{},{OrderLineItems:[].concat(Object(Qt.a)(e.OrderLineItems),[c])})}))}}}q(!1)}else q(!1)}),[B,O,J]);var Z=function(e,t){"clickaway"!==t&&P(!1)};function te(e,t){m((function(n){var c=n.OrderLineItems;return c.splice(e,1,t),Object(p.a)(Object(p.a)({},n),{},{OrderLineItems:c})}))}function ne(e,t){var n=Math.abs(parseFloat("".concat(e))),c=-n,r=-(n+n*ge),a={description:t,quantity:1,price:-parseFloat(Math.abs(c).toFixed(2)),total:-parseFloat(Math.abs(r).toFixed(2)),kind:"credit"};m((function(e){return Object(p.a)(Object(p.a)({},e),{},{OrderLineItems:[].concat(Object(Qt.a)(e.OrderLineItems),[a])})}))}function ce(e){return O&&O[e]?O[e]:""}var re=!J||O&&0===O.OrderLineItems.filter((function(e){return"member discount"===e.description})).length;return Object(c.jsxs)("div",{className:t.root,children:[u?Object(c.jsx)(Le,{}):Object(c.jsxs)(Re.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"flex-start",children:[Object(c.jsxs)(Re.a,{item:!0,xs:12,md:4,children:[Object(c.jsx)("div",{className:t.sticky,children:N?Object(c.jsxs)("div",{style:{display:"flex"},children:[Object(c.jsx)(ht.a,{title:"close",children:Object(c.jsx)(Et.a,{"aria-label":"close",onClick:function(){return T(!1)},children:Object(c.jsx)(Rn.a,{fontSize:"inherit"})})}),Object(c.jsx)(Gn,{onItemSelected:function(e){if(e&&e.member){var t=e.member,n=t.id,c=t.name,r=t.phone,a=t.address,i=e.member.User&&e.member.User.email?e.member.User.email:e.member.registration_email;m((function(e){return Object(p.a)(Object(p.a)({},e),{},{name:c||"",email:i||"",phone:r||"",address:a||"",MemberId:n})})),T(!1),Yn(n,Y)}}})]}):Object(c.jsxs)("div",{className:t.orderSideHeading,children:[Object(c.jsx)(ht.a,{title:"BACK TO ORDERS",children:Object(c.jsx)(Et.a,{"aria-label":"back to orders",onClick:function(){return e.history.push("/orders")},children:Object(c.jsx)(Wn.a,{})})}),Object(c.jsx)("h2",{style:{display:"inline-block"},children:s&&"new"!==s?Object(c.jsxs)(c.Fragment,{children:["EDIT ORDER ",Object(c.jsxs)("i",{children:["#",O.id]})]}):"CREATE ORDER"}),Object(c.jsx)("div",{className:t.saveBtn,children:Object(c.jsx)(We.a,{variant:"contained",color:"primary",onClick:function(){y(!0);var t=s&&"new"!==s?"/order/update":"/order/create";fetch("".concat(xe).concat(t),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(O)}).then((function(e){return e.json()})).then((function(t){t.success&&(O&&O.Member&&O.Member.id&&Yn(O.Member.id,Y),P(!0),W("Saved order!"),!t.order.id||s&&"new"!==s||e.history.replace("/orders/edit/".concat(t.order.id)))})).finally((function(){return y(!1)}))},disabled:v,fullWidth:!0,children:"Save"})}),Object(c.jsx)("div",{children:Object(c.jsx)(ht.a,{title:"ADD USER DETAILS",children:Object(c.jsx)(Et.a,{"aria-label":"add user details",onClick:function(){return T(!0)},children:Object(c.jsx)(ee.a,{})})})})]})}),"new"!==O.status&&"needs_review"!==O.status&&Object(c.jsxs)(Pe.a,{color:"error.main",children:[Object(c.jsx)(Ue.a,{variant:"overline",display:"block",children:"ohey!"}),Object(c.jsx)(Ue.a,{variant:"body1",display:"block",gutterBottom:!0,children:'this order status is not "new" or "needs review" so making changes might not be great...'})]}),O.Member&&O.Member.discount&&Object(c.jsx)(Pe.a,{color:"info.main",children:Object(c.jsxs)(Ue.a,{variant:"overline",display:"block",gutterBottom:!0,children:["Member has discount:"," ",Object(c.jsxs)("b",{children:[O.Member.discount," ",O.Member.discount_type&&"(".concat(O.Member.discount_type,")")]})]})}),0!==Q&&Object(c.jsx)(Pe.a,{color:"info.main",children:Object(c.jsxs)(Ue.a,{variant:"overline",display:"block",gutterBottom:!0,children:["Member has store credit:",Object(c.jsx)(ht.a,{title:"apply store credit",children:Object(c.jsx)(We.a,{"aria-label":"apply store credit",size:"large",onClick:function(){return function(){var e=O&&O.subtotal?O.subtotal:Math.abs(Q),t=Math.abs(Q)>=e?-e:Q,n={description:"STORE CREDIT",quantity:1,price:t,total:t,kind:"adjustment"};m((function(e){return Object(p.a)(Object(p.a)({},e),{},{OrderLineItems:[].concat(Object(Qt.a)(e.OrderLineItems),[n])})}))}()},children:Q})})]})}),Object(c.jsxs)("form",{className:t.form,noValidate:!0,autoComplete:"off",children:[Object(c.jsx)(tt.a,{label:"name",type:"text",className:t.formInput,fullWidth:!0,value:O.name,onChange:function(e){e.persist(),m((function(t){return Object(p.a)(Object(p.a)({},t),{},{name:e.target.value})}))}}),Object(c.jsx)(tt.a,{label:"email",type:"email",className:t.formInput,fullWidth:!0,value:O.email,onChange:function(e){e.persist(),m((function(t){return Object(p.a)(Object(p.a)({},t),{},{email:e.target.value})}))}}),Object(c.jsx)(tt.a,{label:"phone",type:"phone",className:t.formInput,fullWidth:!0,value:O.phone,onChange:function(e){e.persist(),m((function(t){return Object(p.a)(Object(p.a)({},t),{},{phone:e.target.value})}))}}),Object(c.jsx)(tt.a,{label:"address",type:"text",className:t.formInput,fullWidth:!0,value:O.address,onChange:function(e){e.persist(),m((function(t){return Object(p.a)(Object(p.a)({},t),{},{address:e.target.value})}))}}),Object(c.jsx)(tt.a,{label:"notes",className:t.formInput,multiline:!0,rowsMax:"20",fullWidth:!0,value:O.notes,onChange:function(e){e.persist(),m((function(t){return Object(p.a)(Object(p.a)({},t),{},{notes:e.target.value})}))}}),Object(c.jsxs)(Rt.a,{fullWidth:!0,className:t.status,children:[Object(c.jsx)(Pt.a,{id:"order-status-select-label",children:"status"}),Object(c.jsx)(zt.a,{labelId:"order-status-select-label",id:"order-status-select",value:ce("status"),onChange:function(e){m((function(t){return Object(p.a)(Object(p.a)({},t),{},{status:e.target.value})}))},children:Object.keys(ye).map((function(e){return Object(c.jsx)(Lt.a,{value:e,children:ye[e]},"os-sel-".concat(e))}))})]}),Object(c.jsxs)(Rt.a,{fullWidth:!0,className:t.status,children:[Object(c.jsx)(Pt.a,{id:"payment-status-select-label",children:"payment status"}),Object(c.jsx)(zt.a,{labelId:"payment-status-select-label",id:"payment-status-select",value:ce("payment_status"),onChange:function(e){m((function(t){return Object(p.a)(Object(p.a)({},t),{},{payment_status:e.target.value})}))},children:Object.keys(Se).map((function(e){return Object(c.jsx)(Lt.a,{value:e,children:Se[e]},"ps-sel-".concat(e))}))})]}),Object(c.jsxs)(Rt.a,{fullWidth:!0,className:t.status,children:[Object(c.jsx)(Pt.a,{id:"shipment-status-select-label",children:"shipment status"}),Object(c.jsx)(zt.a,{labelId:"shipment-status-select-label",id:"shipment-status-select",value:ce("shipment_status"),onChange:function(e){m((function(t){return Object(p.a)(Object(p.a)({},t),{},{shipment_status:e.target.value})}))},children:Object.keys(we).map((function(e){return Object(c.jsx)(Lt.a,{value:e,children:we[e]},"ship-sel-".concat(e))}))})]})]})]}),Object(c.jsxs)(Re.a,{item:!0,xs:12,md:8,children:[Object(c.jsx)("div",{children:k?Object(c.jsxs)("div",{style:{display:"flex"},children:[Object(c.jsx)(ht.a,{title:"close",children:Object(c.jsx)(Et.a,{"aria-label":"close",onClick:function(){return C(!1)},children:Object(c.jsx)(Rn.a,{fontSize:"inherit"})})}),Object(c.jsx)(Kn,{onItemSelected:function(e){if(e){var t=e.product;if(e&&e.name&&t){var n={description:"".concat(t.name," ").concat(t.description),quantity:1,selected_unit:"CS",price:parseFloat(t.ws_price),total:parseFloat(t.ws_price),kind:"product",vendor:t.vendor,data:{product:t}};m((function(e){return Object(p.a)(Object(p.a)({},e),{},{item_count:e.OrderLineItems.filter((function(e){return"product"===e.kind})).length+1,OrderLineItems:[].concat(Object(Qt.a)(e.OrderLineItems),[n])})})),q(!0)}}}})]}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(We.a,{"aria-label":"add line items",size:"large",onClick:function(){return C(!0)},children:[Object(c.jsx)(Nt.a,{}),"LINE ITEMS"]}),Object(c.jsxs)(We.a,{"aria-label":"add adjustment",size:"large",onClick:function(e){var t={description:"new adjustment",quantity:1,price:0,total:0,kind:"adjustment"};m((function(e){return Object(p.a)(Object(p.a)({},e),{},{OrderLineItems:[].concat(Object(Qt.a)(e.OrderLineItems),[t])})}))},children:[Object(c.jsx)(Nt.a,{}),"ADJUSTMENT"]}),re&&Object(c.jsxs)(We.a,{"aria-label":"add member discount",size:"large",onClick:function(){$(!0),q(!0)},children:[Object(c.jsx)(Nt.a,{}),"MEMBER DISCOUNT"]}),Object(c.jsxs)(We.a,{"aria-label":"add payment",size:"large",onClick:function(e){var t=parseFloat(O.total.toFixed(2))||-0,n={description:"payment",quantity:1,price:-t,total:-t,kind:"payment"};m((function(e){return Object(p.a)(Object(p.a)({},e),{},{OrderLineItems:[].concat(Object(Qt.a)(e.OrderLineItems),[n])})}))},children:[Object(c.jsx)(Nt.a,{}),"PAYMENT"]}),Object(c.jsxs)(We.a,{"aria-label":"add credit",size:"large",onClick:function(e){ne(-1,"credit")},children:[Object(c.jsx)(Nt.a,{}),"CREDIT"]}),Object(c.jsxs)(We.a,{"aria-label":"email receipt",size:"large",onClick:function(e){fetch("".concat(xe,"/orders/resend_email"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({orderId:O.id})}).then((function(e){return e.json()})).then((function(e){e.success?W("Re-sent email to ".concat(O.email)):W("onoz! could not send email to ".concat(O.email))})).catch((function(e){console.warn("onoz! caught error re-sending email:",e),W("onoz! could not re-send email")})).finally((function(){return P(!0)}))},children:[Object(c.jsx)(Pn.a,{className:t.emailIcon}),"email receipt"]})]})}),Object(c.jsx)(Un,{line_items:O.OrderLineItems,onLineItemUpdated:function(e,t){te(e,t),q(!0)},removeLineItem:function(e){if(e>-1){var t=O.OrderLineItems[e];"adjustment"===t.kind&&"member discount"===t.description&&$(!1)}m((function(t){var n=t.OrderLineItems;n.splice(e,1);var c=n.filter((function(e){return"product"===e.kind})).length;return Object(p.a)(Object(p.a)({},t),{},{item_count:c,OrderLineItems:n})}))},onTaxesChange:function(e){m((function(t){var n=t.OrderLineItems.filter((function(e){return"tax"!==e.kind}));return Object(p.a)(Object(p.a)({},t),{},{OrderLineItems:[].concat(Object(Qt.a)(n),[{kind:"tax",description:"tax ".concat(ve),quantity:1,price:e,total:e}])})}))},onTotalChange:function(e){m((function(t){return Object(p.a)(Object(p.a)({},t),{},{total:e})}))},onSubTotalChange:function(e){m((function(t){return Object(p.a)(Object(p.a)({},t),{},{subtotal:e})}))},createCreditFromLineItem:function(e){ne(e.total,"STORE CREDIT (".concat(e.description,")"))}})]})]}),Object(c.jsx)(Tt.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:F,autoHideDuration:6e3,onClose:Z,ContentProps:{"aria-describedby":"message-id"},message:Object(c.jsx)("span",{id:"message-id",children:z}),action:[Object(c.jsx)(Et.a,{"aria-label":"close",onClick:Z,children:Object(c.jsx)(Ft.a,{})},"close")]})]})}))),ec=Object(z.a)((function(e){return Object(W.a)({root:{padding:e.spacing(2),maxWidth:"100vw",minHeight:"100vh"}})}));var tc=Object(v.h)((function(e){var t=ec(),n=Object(r.createRef)(),a={icon:"add",tooltip:"add new member",isFreeAction:!0,onClick:function(){return e.history.push("/members/new")}},i={tooltip:"Remove Member",icon:"delete",onClick:function(e,t){var c;if((c=Array.isArray(t)?t:[t])&&0!==c.length){var r=c[0].id;window.confirm("Are you sure you want to delete this member?")&&fetch("".concat(xe,"/member"),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:r})}).then((function(e){return e.json()})).then((function(){return n.current&&n.current.onQueryChange()})).catch((function(e){return console.warn("members deleteAction caught err",e)}))}}},s={icon:"edit",tooltip:"edit member",onClick:function(t,n){var c;(c=Array.isArray(n)?n[0]:n).id&&e.history.push("/members/".concat(c.id))}};return Object(c.jsx)("div",{className:t.root,children:Object(c.jsx)(vt.a,{tableRef:n,columns:[{title:"created",field:"createdAt",type:"datetime",filtering:!1,render:function(e){return Object(c.jsx)("div",{title:e.createdAt&&new Date(e.createdAt).toLocaleString(),children:e.createdAt&&Object(kt.a)(new Date(e.createdAt),Date.now())})}},{title:"registration email",field:"registration_email",type:"string",filtering:!1},{title:"name",field:"name",type:"string",filtering:!1},{title:"phone",field:"phone",type:"string",filtering:!1},{title:"address",field:"address",type:"string",filtering:!1},{title:"discount",field:"discount",type:"string"},{title:"discount type",field:"discount_type",type:"string"},{title:"fees paid",field:"fees_paid",type:"string"},{title:"shares",field:"shares",type:"string"},{title:"type",field:"member_type",type:"string"},{title:"updated",field:"updatedAt",type:"datetime",hidden:!0},{title:"id",field:"id",type:"string",hidden:!0}],data:function(e){return new Promise((function(t,n){fetch("".concat(xe,"/members"),{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){return console.warn(e),t({data:[],page:0,totalCount:0})}))}))},title:"Members",options:{headerStyle:{position:"sticky",top:0},maxBodyHeight:"calc(100vh - 121px - 28px)",pageSize:50,pageSizeOptions:[50,100,500],debounceInterval:750,filtering:!0,search:!0,emptyRowsWhenPaging:!1},actions:[a,i,s]})})})),nc={id:"new",registration_email:"",name:"",phone:"",address:"",discount:0,discount_type:"",fees_paid:0,store_credit:0,shares:0,member_type:"",data:{}},cc=Object(z.a)((function(e){var t;return Object(W.a)({root:{margin:e.spacing(2),padding:e.spacing(2)},gridItem:{margin:e.spacing(2,0)},sticky:(t={},Object(An.a)(t,e.breakpoints.up("sm"),{position:"sticky",top:"0"}),Object(An.a)(t,"zIndex",1),Object(An.a)(t,"backgroundColor",e.palette.background.paper),Object(An.a)(t,"width","100%"),t),ordersHeader:{fontSize:"1.25em",backgroundColor:e.palette.background.paper}})}));function rc(){return(rc=Object(fe.a)(me.a.mark((function e(t,n){var c;return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(xe,"/admin/member_orders"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({MemberId:t})}).then((function(e){return e.json()})).catch((function(e){return[]}));case 2:c=e.sent,n(c);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ac=Object(v.h)((function(e){var t=cc(),n=Object(r.useState)(!0),i=Object(x.a)(n,2),s=i[0],o=i[1],l=Object(r.useState)(!1),d=Object(x.a)(l,2),u=d[0],j=d[1],b=Object(r.useState)(""),h=Object(x.a)(b,2),O=h[0],m=h[1],f=Object(r.useState)(""),g=Object(x.a)(f,2),v=g[0],y=g[1],S=e.match.params.id,w=Object(r.useState)(nc),k=Object(x.a)(w,2),_=k[0],I=k[1],N=Object(r.useState)(!1),T=Object(x.a)(N,2),E=T[0],F=T[1],L=Object(r.useState)(0),R=Object(x.a)(L,2),z=R[0],W=R[1],D=Object(r.useState)([]),M=Object(x.a)(D,2),B=M[0],q=M[1];return Object(r.useEffect)((function(){S&&"undefined"!==S&&("new"===S?(I(nc),o(!1)):(fetch("".concat(xe,"/members"),{method:"post",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({filters:[{column:{field:"id"},value:S}]})}).then((function(e){return e.json()})).then((function(e){I(e.data[0])})).catch((function(e){return I(nc)})).finally((function(){return o(!1)})),Yn(S,W),function(e,t){rc.apply(this,arguments)}(S,q)))}),[S]),Object(c.jsx)(ze.a,{className:t.root,children:s?Object(c.jsx)(Le,{}):Object(c.jsxs)(Re.a,{container:!0,spacing:2,direction:"row",justify:"center",alignItems:"flex-start",children:[Object(c.jsxs)(Re.a,{item:!0,sm:6,children:[Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center",minHeight:"54px"},className:t.sticky,children:[Object(c.jsx)(ht.a,{title:"BACK TO MEMBERS",children:Object(c.jsx)(Et.a,{"aria-label":"back to members",onClick:function(){return e.history.push("/members")},children:Object(c.jsx)(Wn.a,{})})}),Object(c.jsxs)("h2",{children:["new"===S?"Create":"Edit"," Member"]})]}),Object(c.jsx)(tt.a,{label:"email",fullWidth:!0,value:_.registration_email,className:t.gridItem,onChange:function(e){e.persist(),I((function(t){return Object(p.a)(Object(p.a)({},t),{},{registration_email:e.target.value})}))}}),Object(c.jsx)(tt.a,{label:"name",fullWidth:!0,value:_.name,className:t.gridItem,onChange:function(e){e.persist(),I((function(t){return Object(p.a)(Object(p.a)({},t),{},{name:e.target.value})}))}}),Object(c.jsx)(tt.a,{label:"phone",fullWidth:!0,value:_.phone,className:t.gridItem,onChange:function(e){e.persist(),I((function(t){return Object(p.a)(Object(p.a)({},t),{},{phone:e.target.value})}))}}),Object(c.jsx)(tt.a,{label:"address",fullWidth:!0,value:_.address,className:t.gridItem,onChange:function(e){e.persist(),I((function(t){return Object(p.a)(Object(p.a)({},t),{},{address:e.target.value})}))}}),Object(c.jsx)(tt.a,{label:"discount",fullWidth:!0,value:_.discount,type:"number",className:t.gridItem,onChange:function(e){e.persist(),I((function(t){return Object(p.a)(Object(p.a)({},t),{},{discount:parseFloat(e.target.value)})}))}}),Object(c.jsx)(tt.a,{label:"discount type",fullWidth:!0,value:_.discount_type,className:t.gridItem,onChange:function(e){e.persist(),I((function(t){return Object(p.a)(Object(p.a)({},t),{},{discount_type:e.target.value})}))}}),Object(c.jsx)(tt.a,{label:"fees paid",fullWidth:!0,value:_.fees_paid,type:"number",className:t.gridItem,onChange:function(e){e.persist(),I((function(t){return Object(p.a)(Object(p.a)({},t),{},{fees_paid:parseFloat(e.target.value)})}))}}),Object(c.jsx)(tt.a,{label:"store credit",fullWidth:!0,value:_.store_credit,className:t.gridItem,type:"number",helperText:"note: depreciated, don't use this store_credit field anymore."}),Object(c.jsx)(tt.a,{label:"shares",fullWidth:!0,value:_.shares,className:t.gridItem,type:"number",onChange:function(e){e.persist(),I((function(t){return Object(p.a)(Object(p.a)({},t),{},{shares:parseFloat(e.target.value)})}))}}),Object(c.jsxs)(Rt.a,{fullWidth:!0,className:t.gridItem,children:[Object(c.jsx)(Pt.a,{id:"prev-import-tag-select-label",children:"Type"}),Object(c.jsxs)(zt.a,{labelId:"prev-import-tag-select-label",id:"prev-import-tag-select",value:_.member_type,onChange:function(e){return e.target&&e.target.value&&I((function(t){return Object(p.a)(Object(p.a)({},t),{},{member_type:e.target.value})}))},children:[Object(c.jsx)(Lt.a,{value:"consumer-owners",children:"consumer-owner"}),Object(c.jsx)(Lt.a,{value:"worker-owners",children:"worker-owner"}),Object(c.jsx)(Lt.a,{value:"producer-owners",children:"producer owner"})]})]}),Object(c.jsx)(Rt.a,{fullWidth:!0,className:t.gridItem,children:Object(c.jsx)(wn.a,{control:Object(c.jsx)(kn.a,{onChange:function(e,t){F(t)},value:"createNewUser"}),label:"Create User"})}),Object(c.jsx)("div",{className:t.gridItem,children:Object(c.jsx)(We.a,{disabled:u,onClick:function(){return function(){m(""),y(""),j(!0);var e="new"===S?"/create":"/update";fetch("".concat(xe,"/member").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({member:_,createNewUser:E})}).then((function(e){return e.json()})).then((function(e){e.error?m(e.msg):y(e.msg)})).catch((function(e){console.warn("fetch caugher err:",e),m(e.toString())})).finally((function(){return j(!1)}))}()},variant:"contained",color:"primary",fullWidth:!0,children:"new"===S?"CREATE":"SAVE"})})]}),Object(c.jsxs)(Re.a,{item:!0,sm:6,className:t.sticky,zeroMinWidth:!0,children:[u&&Object(c.jsx)(Le,{}),O&&Object(c.jsxs)("div",{className:t.gridItem,children:[Object(c.jsx)("h3",{children:"Response Error!"}),Object(c.jsx)("p",{children:O})]}),v&&Object(c.jsxs)("div",{className:t.gridItem,children:[Object(c.jsx)("h3",{children:"Response"}),Object(c.jsx)("p",{children:v})]}),_&&_.data&&Object(c.jsx)("dl",{children:Object.keys(_.data).map((function(e){return Object(c.jsxs)(a.a.Fragment,{children:[Object(c.jsx)("dt",{children:e}),Object(c.jsx)("dd",{children:_.data[e]})]},"memberdata".concat(e))}))}),0!==z&&Object(c.jsx)(Pe.a,{color:"info.main",children:Object(c.jsxs)(Ue.a,{variant:"overline",display:"block",gutterBottom:!0,children:["Member has store credit: ",z]})}),B.length>0&&Object(c.jsx)(C.a,{component:"nav","aria-label":"member orders",subheader:Object(c.jsxs)(U.a,{component:"h2",className:t.ordersHeader,children:["Orders (",B.length,")"]}),children:B.map((function(t){return Object(c.jsx)(A.a,{button:!0,href:"/orders/edit/".concat(t.id),onClick:function(){return e.history.push("/orders/edit/".concat(t.id))},children:Object(c.jsx)(P.a,{primary:"#".concat(t.id," $").concat(t.total," (").concat(t.item_count,")"),secondary:t.createdAt&&new Date(t.createdAt).toLocaleString()})},t.id)}))})]})]})})})),ic=n(427),sc=n.n(ic),oc=n(425),lc=n.n(oc),dc=n(426),uc=n.n(dc),jc=function(e){return Object(c.jsx)(Mt.a,Object(p.a)({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e))},bc=Object(ot.a)((function(e){return{root:{"&:focus":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(Lt.a);function hc(e){var t=a.a.useState(null),n=Object(x.a)(t,2),r=n[0],i=n[1],s=function(){i(null)};return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(Dt.a,{variant:"contained",color:"primary","aria-label":"split button",children:[Object(c.jsx)(We.a,{variant:"contained",color:"primary",onClick:e.onSaveBtnClick,children:"save"}),Object(c.jsx)(We.a,{"aria-controls":"customized-menu","aria-haspopup":"true",variant:"contained",color:"primary",size:"small",onClick:function(e){i(e.currentTarget)},children:Object(c.jsx)(Ut.a,{})})]}),Object(c.jsx)(jc,{id:"customized-menu",anchorEl:r,keepMounted:!0,open:Boolean(r),onClose:s,children:Object(c.jsxs)(bc,{onClick:function(){window.confirm("are you sure?")&&e.onDeleteBtnClick(),s()},disabled:!e.page.id,children:[Object(c.jsx)(F.a,{children:Object(c.jsx)(qt.a,{fontSize:"small"})}),Object(c.jsx)(P.a,{primary:"delete announcement"})]})})]})}var pc=function(e){return{listItem:{marginTop:e.spacing(1)},header:{marginTop:e.spacing(2)}}};var Oc=Object(ot.a)(pc)((function(e){var t,n=e.classes,r=Object(it.a)(e,["classes"]);switch(r.level){case 1:t="h5";break;case 2:t="h6";break;case 3:t="subtitle1";break;case 4:t="subtitle2";break;default:t="h6"}return Object(c.jsx)(Ue.a,{className:null===n||void 0===n?void 0:n.header,gutterBottom:!0,variant:t,children:r.children})})),mc=Object(ot.a)(pc)((function(e){var t=e.classes,n=Object(it.a)(e,["classes"]);return Object(c.jsx)("li",{className:t.listItem,children:Object(c.jsx)(Ue.a,{component:"span",children:n.children})})}));var fc={heading:Oc,paragraph:function(e){return Object(c.jsx)(Ue.a,{children:e.children})},link:yt.a,listItem:mc,table:function(e){return Object(c.jsx)(ze.a,{children:Object(c.jsx)(De.a,{size:"small","aria-label":"a dense table",children:e.children})})},tableHead:function(e){return Object(c.jsx)(qe.a,{children:e.children})},tableBody:function(e){return Object(c.jsx)(Me.a,{children:e.children})},tableRow:function(e){return Object(c.jsx)(He.a,{children:e.children})},tableCell:function(e){return Object(c.jsx)(Be.a,{children:Object(c.jsx)(Ue.a,{children:e.children})})}},xc=Object(z.a)((function(e){return Object(W.a)({row:{display:"flex"},paper:{padding:e.spacing(2),color:e.palette.text.secondary,height:"100%"},preview:{marginTop:e.spacing(2)},pageName:{marginBottom:e.spacing(2),marginRight:e.spacing(2)}})}));var gc=Object(v.h)((function(e){var t=e.match.params,n=t.id,i=t.slug,s=xc(),o=Object(r.useState)({slug:i,content:""}),l=Object(x.a)(o,2),d=l[0],u=l[1],j=Object(r.useState)(!0),b=Object(x.a)(j,2),h=b[0],O=b[1],m=Object(r.useState)(!1),f=Object(x.a)(m,2),g=f[0],v=f[1],y=Object(r.useState)(!0),S=Object(x.a)(y,2),w=S[0],k=S[1],C=function(e,t){var n=Object(r.useState)({status:"loading"}),c=Object(x.a)(n,2),a=c[0],i=c[1];return Object(r.useEffect)((function(){e&&0!==e.length?fetch("".concat(xe,"/page?id=").concat(e)).then((function(e){return e.json()})).then((function(e){i({status:"loaded",payload:e})})).catch((function(e){console.warn("usePageService fetch caught err:",e),i(Object(p.a)({},e))})).finally((function(){t(!1)})):t(!1)}),[e,t]),a}(n,O);Object(r.useEffect)((function(){"loaded"===C.status&&C.payload&&u(C.payload)}),[C]);var _=a.a.useState(!1),I=Object(x.a)(_,2),N=I[0],T=I[1],E=a.a.useState(""),A=Object(x.a)(E,2),F=A[0],P=A[1],L=function(e,t){"clickaway"!==t&&T(!1)},R=function(e,t,n,c,a){var i=Object(r.useState)({status:"loading"}),s=Object(x.a)(i,2),o=s[0],l=s[1];return Object(r.useEffect)((function(){t&&e&&0!==e.slug.length?fetch("".concat(xe,"/page"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){l({status:"loaded",payload:e.page[0]}),c(e.msg),a(!0)})).catch((function(e){console.warn("usePageSaveService fetch caught err:",e),l(Object(p.a)({},e)),c("o noz! ".concat(e)),a(!0)})).finally((function(){n(!1)})):n(!1)}),[e,t,n,c,a]),o}(d,g,v,P,T);return Object(r.useEffect)((function(){if("loaded"===R.status){var t=R.payload;n==="".concat(t.id)&&i===t.slug||e.history.replace("/announcements/edit/".concat(t.slug,"/").concat(t.id))}}),[R]),d?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Re.a,{xs:6,sm:4,lg:5,item:!0,children:Object(c.jsxs)(ze.a,{className:s.paper,children:[Object(c.jsxs)("div",{className:s.row,children:[Object(c.jsx)(tt.a,{className:s.pageName,label:"title",fullWidth:!0,value:d.slug,onChange:function(e){u((function(t){return Object(p.a)(Object(p.a)({},t),{},{slug:e.target.value})}))}}),Object(c.jsx)(hc,{page:d,onSaveBtnClick:function(){v(!0)},onDeleteBtnClick:function(){fetch("".concat(xe,"/page"),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(t){t.error?(P(t.msg),T(!0)):e.history.replace("/announcements")})).catch((function(e){console.warn("delete page fetch caught err:",e),P("o noz! ".concat(e)),T(!0)}))}}),Object(c.jsx)(We.a,{variant:w?"contained":"outlined",color:"primary",onClick:function(){return k(!w)},children:Object(c.jsx)(sc.a,{})})]}),h?Object(c.jsx)(Le,{}):Object(c.jsx)(tt.a,{label:"content",multiline:!0,fullWidth:!0,rows:4,rowsMax:28,value:d.content,onChange:function(e){u((function(t){return Object(p.a)(Object(p.a)({},t),{},{content:e.target.value})}))}})]})}),Object(c.jsx)(Re.a,{xs:6,sm:4,lg:5,item:!0,children:w&&Object(c.jsx)(ze.a,{className:s.paper,children:Object(c.jsx)(lc.a,{plugins:[uc.a],renderers:fc,children:d.content})})}),Object(c.jsx)(Tt.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:N,autoHideDuration:6e3,onClose:L,ContentProps:{"aria-describedby":"message-id"},message:Object(c.jsx)("span",{id:"message-id",children:F}),action:[Object(c.jsx)(Et.a,{"aria-label":"close",onClick:L,children:Object(c.jsx)(Ft.a,{})},"close")]})]}):Object(c.jsx)(Le,{})})),vc=Object(z.a)((function(e){return Object(W.a)({root:{padding:e.spacing(2),maxWidth:"100vw",minHeight:"100vh"},title:{display:"flex",alignItems:"center"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,height:"100%"}})}));var yc=Object(j.b)((function(e){return{userService:e.session.userService}}),void 0)(Object(v.h)((function(e){var t=vc(),n=e.userService,a=Object(r.useState)([]),i=Object(x.a)(a,2),s=i[0],o=i[1],l=Object(r.useState)(!0),d=Object(x.a)(l,2),u=d[0],j=d[1],b=function(e,t){var n=Object(r.useState)({status:"loading"}),c=Object(x.a)(n,2),a=c[0],i=c[1];return Object(r.useEffect)((function(){e&&fetch("".concat(xe,"/pages"),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){i({status:"loaded",payload:e.rows})})).catch((function(e){console.warn("usePageService fetch caught err:",e),i(Object(p.a)({},e))})).finally((function(){return t(!1)}))}),[e,t]),a}(u,j);Object(r.useEffect)((function(){"loaded"===b.status&&o(b.payload)}),[b]);var h=Object(r.useState)(!1),O=Object(x.a)(h,2),m=O[0],f=O[1],y=function(e,t){"clickaway"!==t&&f(!1)};return n?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(Re.a,{container:!0,direction:"row",justify:"space-between",alignItems:"stretch",className:t.root,spacing:2,children:[Object(c.jsx)(Re.a,{xs:12,sm:4,md:3,lg:2,item:!0,children:Object(c.jsx)(ze.a,{className:t.paper,children:Object(c.jsxs)(C.a,{children:[Object(c.jsx)(A.a,{children:Object(c.jsx)(P.a,{children:Object(c.jsx)("div",{className:t.title,children:Object(c.jsx)(We.a,{"aria-label":"Announcement",title:"Announcement",onClick:function(){j(!0),e.history.push("/announcements/")},children:"ANNOUNCEMENTS"})})})}),Object(c.jsx)(_.a,{}),s.map((function(e,t){return Object(c.jsx)(A.a,{button:!0,component:g.b,to:"/announcements/edit/".concat(e.slug,"/").concat(e.id),children:Object(c.jsx)(P.a,{primary:e.slug,secondary:e.createdAt&&Object($e.a)(new Date(e.createdAt),Date.now(),{addSuffix:!0})})},"page".concat(t))}))]})})}),Object(c.jsxs)(v.d,{children:[Object(c.jsx)(st,{userService:n,path:"/announcements",component:function(){return Object(c.jsx)(Re.a,{xs:12,sm:8,md:9,lg:10,item:!0,children:Object(c.jsx)(ze.a,{className:t.paper,children:Object(c.jsx)(We.a,{"aria-label":"add announcement",title:"add announcement",onClick:function(){return e.history.push("/announcements/edit/draft/-1"),void f(!0)},children:"Create A New Announcement"})})})},exact:!0}),Object(c.jsx)(st,{userService:n,path:"/announcements/edit/:slug/:id",component:gc})]})]}),Object(c.jsx)(Tt.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:m,autoHideDuration:4e3,onClose:y,ContentProps:{"aria-describedby":"message-id"},message:Object(c.jsx)("span",{id:"message-id",children:"Created new announcement!"}),action:[Object(c.jsx)(Et.a,{"aria-label":"close",onClick:y,children:Object(c.jsx)(Ft.a,{})},"close")]})]}):null}))),Sc=Object(z.a)((function(e){return Object(W.a)({root:{minHeight:"100vh"},nav:{zIndex:e.zIndex.speedDial,display:"flex",alignItems:"center",position:"fixed",top:"-12px",left:"-24px",transition:"200ms ease-in-out","& svg":{display:"none"},"&:hover":{top:-6,left:-12},"&:hover svg":{display:"inline-block"}},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},version:{fontStyle:"italic",fontSize:"0.8em",flexGrow:1,alignSelf:"center",flexDirection:"column",display:"flex",justifyContent:"flex-end"},content:{marginLeft:"16px",maxWidth:"98%"}})}));var wc=Object(j.b)((function(e){return{userService:e.session.userService,preferencesService:e.preferences.preferencesService}}),(function(e){return{checkSession:function(){return e(function(){var e=Object(fe.a)(me.a.mark((function e(t){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t(Ie(!0)),fetch("".concat(xe,"/check_session"),{credentials:"include"}).then((function(e){return e.json()})).then((function(e){"ok"===e.msg&&e.user?t(Ce(e.user)):t(Ce(Ne))})).catch((function(e){console.warn("check_session caught err:",e),t(Ce(Ne))})).finally((function(){t(Ie(!1)),e()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},getPreferences:function(){return e(function(){var e=Object(fe.a)(me.a.mark((function e(t){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t(Ae(!0));var c=localStorage&&localStorage.getItem("preferences");t(Ee(c?JSON.parse(c):Te)),t(Ae(!1)),e()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},setPreferences:function(t){return e(function(e){return function(){var t=Object(fe.a)(me.a.mark((function t(n){return me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,c){n(Ae(!0)),e?(localStorage&&localStorage.setItem("preferences",JSON.stringify(e)),n(Ee(e))):n(Ee(Te)),n(Ae(!1)),t()})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},logout:function(){return e(function(){var e=Object(fe.a)(me.a.mark((function e(t){return me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t(Ie(!0)),fetch("".concat(xe,"/logout"),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"}).catch(console.warn).finally((function(){t(Ce(Ne)),t(Ie(!1)),e()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){var t=Object(r.useState)(!0),n=Object(x.a)(t,2),i=n[0],s=n[1],o=Object(r.useState)(null),l=Object(x.a)(o,2),d=l[0],u=l[1],j=e.checkSession,b=e.userService,h=e.getPreferences,p=e.preferencesService,O=e.setPreferences;Object(r.useEffect)((function(){h&&h()}),[h]),Object(r.useEffect)((function(){p&&!p.isFetching&&p.preferences&&null===d&&u("true"===p.preferences.dark_mode)}),[p]),Object(r.useEffect)((function(){p&&p.preferences&&"true"===p.preferences.dark_mode!==d&&O({dark_mode:d?"true":"false"})}),[d]),Object(r.useEffect)((function(){j&&j()}),[j]),Object(r.useEffect)((function(){b&&!b.isFetching&&b.user&&s(!1)}),[b]);var m=Sc(),f=a.a.useState(!1),T=Object(x.a)(f,2),L=T[0],z=T[1],W=p&&p.preferences&&"true"===p.preferences.dark_mode?q:H;return Object(c.jsxs)(S.a,{theme:W,children:[Object(c.jsx)(w.a,{}),Object(c.jsx)(g.a,{children:Object(c.jsxs)("div",{className:m.root,children:[Object(c.jsx)(w.a,{}),b&&b.user&&"admin"===b.user.role&&Object(c.jsx)("div",{className:m.nav,children:Object(c.jsx)(I.a,{color:"secondary","aria-label":"menu",onClick:function(){return z(!0)},children:Object(c.jsx)(E.a,{})})}),b&&b.user&&"admin"===b.user.role&&Object(c.jsxs)(k.a,{classes:{paper:Object(y.a)(m.drawerPaper)},onClose:function(){return z(!1)},open:L,children:[Object(c.jsx)(C.a,{onClick:function(){return z(!1)},children:pe}),Object(c.jsx)(_.a,{}),Object(c.jsx)(A.a,{button:!0,onClick:function(){return u((function(e){return!e}))},children:Object(c.jsx)(P.a,{children:Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(c.jsx)("span",{children:"Dark Theme"}),Object(c.jsx)(N.a,{checked:null!==d&&void 0!==d&&d,value:"useDarkTheme",inputProps:{"aria-label":"secondary checkbox"}})]})})}),Object(c.jsx)(_.a,{}),Object(c.jsxs)(A.a,{button:!0,onClick:function(){return e.logout()},children:[Object(c.jsx)(F.a,{children:Object(c.jsx)(R.a,{})}),Object(c.jsx)(P.a,{primary:"log out",secondary:Object(c.jsx)("span",{style:{display:"block",textOverflow:"ellipsis",overflow:"hidden"},children:b&&b.user?b.user.email:""})})]}),Object(c.jsx)("div",{className:m.version,children:Object(c.jsx)("span",{children:ke})})]}),Object(c.jsx)("main",{className:m.content,children:i?Object(c.jsx)(Le,{}):Object(c.jsxs)(v.d,{children:[Object(c.jsx)(v.b,{path:"/login",component:ct}),Object(c.jsx)(v.b,{path:"/register",component:at}),Object(c.jsx)(st,{userService:b,path:"/products",component:yn,exact:!0}),Object(c.jsx)(st,{userService:b,path:"/products/import",component:_n}),Object(c.jsx)(st,{userService:b,path:"/products/onhand",component:Nn}),Object(c.jsx)(st,{userService:b,path:"/products/addstock",component:En}),Object(c.jsx)(st,{userService:b,path:"/orders",exact:!0,component:_t}),Object(c.jsx)(st,{userService:b,path:"/orders/edit/:id",component:Zn}),Object(c.jsx)(st,{userService:b,path:"/orders/create",component:Zn}),Object(c.jsx)(st,{userService:b,path:"/wholesaleorders",component:ln}),Object(c.jsx)(st,{userService:b,path:"/users",component:gn}),Object(c.jsx)(st,{userService:b,path:"/members",component:tc,exact:!0}),Object(c.jsx)(st,{userService:b,path:"/members/:id",component:ac}),Object(c.jsx)(st,{userService:b,path:"/storecredits",component:xt}),Object(c.jsx)(st,{userService:b,path:"/announcements",component:yc}),Object(c.jsx)(st,{userService:b,path:"/",component:et})]})})]})})]})})),kc=l()("a9970532605e3f85a84598092888a776");kc.use(u.a,a.a);var Cc=kc.getPlugin("react");s.a.render(Object(c.jsx)(Cc,{children:Object(c.jsx)(j.a,{store:f,children:Object(c.jsx)(wc,{})})}),document.querySelector("#root"))}},[[614,1,2]]]);
//# sourceMappingURL=main.fb81e64b.chunk.js.map